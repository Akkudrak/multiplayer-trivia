/*! For license information please see webserial.js.LICENSE.txt */
(()=>{"use strict";var e={147:e=>{e.exports={i8:"2.2.1"}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(()=>{const e={"created by danidoble":"creado por danidoble","Connection with the serial device completed.":"Conexión con el dispositivo serial completada.","Your connection with the serial device was successfully completed.":"Tu conexión con el dispositivo serial fue completada satisfactoriamente.",connect:"conectar",Connect:"Conectar",Disconnect:"Desconectar",disconnect:"desconectar","Coin Inserted":"Moneda insertada","Reject lever":"Palanca de rechazo","insert coin":"insertar moneda","Reset coin purse":"Reinicio del monedero","The configuration of coin purse was reset":"La configuración del monedero fue reiniciada","Coin inserted in profit box":"Moneda insertada en la caja de ganancias","Coin inserted in tube":"Moneda insertada en el tubo","50 pennies (the big one)":"50 centavos (la grande)","50 pennies (the little one)":"50 centavos (la chica)","Undefined value:":"Valor indefinido","Unknown value:":"Valor desconocido","Coin inserted":"Moneda insertada","Undefined status. Without information of this coin":"Estado indefinido. Sin información de esta moneda","Bank note inserted":"Billete insertado","Config coin purse":"Config monedero","Coin purse enabled":"Monedero habilitado","Coin purse disabled":"Monedero deshabilitado","Disabled by system request":"Deshabilitado por petición del sistema","Status unknown":"Estatus desconocido","The response of coin purse doesn't identified successfully":"La respuesta del monedero no se identificó correctamente","Configuration pre scroll disabled, bank note received automatic":"Configuración pre scroll deshabilitada, billete recibido automáticamente","Configuration pre scroll enabled":"Configuración pre scroll habilitada","Bill purse disabled":"Billetero deshabilitado","Bill purse enabled":"Billetero habilitado","read tubes":"leer tubos","Quantity of coins approx":"Cantidad de monedas aproximadas","Quantity of bank notes approx:":"Cantidad de billetes aproximados:","Quantity of bank notes":"Cantidad de billetes","bank notes":"billetes","bank note status":"estatus del billete","Bank note accepted":"Billete aceptado","Bank note rejected":"Billete rechazado","Unknown status bank note":"Estatus del billete desconocido","bank notes dispensed":"billetes dispensados",Dispensed:"Dispensados",dispense:"Dispensar","Quantity approx.":"Cantidad aprox.","No money dispensed":"No se dispensó dinero","Probably bill purse is empty":"Probablemente el billetero esta vácio","coins dispensed":"monedas dispensadas","status of dispense product":"Estatus del dispensado de producto","Product not delivered":"Producto no entregado","The product requested wasn't delivered":"El producto solicitado no fue entregado","Product delivered":"Producto entregado","The product requested was delivered":"El producto solicitado fue entregado",Error:"Error","status door":"estatus de la puerta","Door closed":"Puerta cerrada","Door open":"Puerta abierta","sensor status":"Estatus del sensor","Status of temperature":"Estatus de la temperatura","Temperature high":"Temperatura alta","Temperature low":"Temperatura baja","temperature status":"estatus de la temperatura","Relay status":"Estatus del relevador","Relay on":"Relevador encendido","Relay off":"Relevador apagado","Save memory bill purse":"Guardar memoria del billetero","Without information":"Sin información","Read memory bill purse":"Leer memoria del billetero","Card reader status":"Estatus del lector de tarjetas","Nayax disabled":"Nayax deshabilitado","Nayax enabled":"Nayax habilitado","The Nayax device was disabled successfully":"El dispositivo nayax fue deshabilitado satisfactoriamente","The Nayax device now is enabled":"El dispositivo nayax ahora esta habilitado","Pre authorized credit":"Crédito pre autorizado","The pre credit was authorized successfully":"El pre crédito fue autorizado correctamente","Cancellation in progress":"Cancelación en progreso","Cancellation request done successfully":"Solicitud de cancelación realizada","Sell approved":"Venta aprobada","Sell approved, starting dispense product":"Venta aprobada, iniciando dispensado de producto","This sell was denied, try again":"Esta venta fue denegada, vuelve a intentarlo","Session ended":"Sesión terminada","The session ended":"La sesión finalizó",Cancelled:"Cancelada","Cancellation complete":"Cancelación completada","Product not dispensed":"Producto no dispensado","Product not dispensed, payed with nayax device":"Producto no dispensado, pagado con nayax","The process of dispensing product ended successfully":"El proceso de dispensado de producto finalizó correctamente","No more information about dispense status":"No hay mas información sobre el estatus del dispensado","The status of card reader does not identified correctly":"El estatus del lector de tarjetas no se identifico correctamente",undefined:"indefinido","Response unrecognized":"Respuesta no reconocida","The response of application was received, but dont identify with any of current parameters":"La respuesta de la aplicación se recibió, pero no se identificó con ninguno de los parametros actuales","You sent a value higher than the pre-credit authorized by nayax":"Mandaste un valor superior al pre crédito autorizado por nayax","for validation is needed give a max amount of pre-credit authorized by nayax":"Por validación, es necesario establecer un monto máximo de pre crédito autorizado por nayax","custom code":"código personalizado","The price it is not defined, can not make a calc with a undefined value":"El precio no esta definido, no se puede hacer un calculo con un valor indefinido","The amount to be collected has not been covered":"El monto a cobrar no se ha cubierto","Operation response timed out.":"Se excedió el tiempo de espera para la respuesta de la operación.","The application connect successfully with website":"La aplicación se conectó correctamente con el sitio web","The connection with the serial device was ended by system request":"La conexión con el dispositivo serial se terminó por petición del sistema","The last instruction is not compatible with this version of the application":"La instrucción que se mando no es compatible con esta versión de la aplicación","Serial device disconnected":"Dispositivo serial desconectado","Connection with the serial device is not complete":"Conexión con el dispositivo serial no esta completa","Check the device is connected correctly":"Revisa que el dispositivo este conectado correctamente","The port was not linked to the serial device, so we closed":"El puerto no estaba vinculado al dispositivo serial, así que lo cerramos.","The response was not received in the time specified by the application":"La respuesta no se recibió en el tiempo especificado por la aplicación","Oops! you ran into an unknown error":"¡Uy! te encontraste con un error desconocido","You must declare a 'ext_owl_reload_when_finished' as a constant in your 'ext.js' file":"Debes declarar la constante 'ext_owl_reload_when_finished' en tu archivo 'ext.js'","Configuration complete":"Configuración completada","Configure bill purse":"Configurar billetero","Device disconnected":"Dispositivo desconectado",Reload:"Recargar","Trying reconnect":"Intentando reconectar","Dispensing error, the values allowed are 'undefined', true and false.":"Error de dispensado, los valores permitidos aquí son 'undefined', true y false.","Serial device detected again.":"Dispositivo serial detectado nuevamente.","Port released":"Puerto liberado","You send a new command to serial device before have an answer":"Enviaste un nuevo comando al dispositivo serial antes de obtener la respuesta","Sending in delay mode":"Enviando en modo demora","Commands in queue:":"Comandos en cola:","Bad configuration of nayax pre credit":"Configuración erronea del pre-crédito de nayax","Nayax not detected":"Nayax no detectado","The Nayax device was not detected":"El dispositivo nayax no fue detectado","Bank note inserted in stacker":"Billete insertado en la apliladora","Bank note in pre-stacker, waiting instruction of banknote":"Billete insertado en la pre apliladora, esperando instrucción de billete","Bank note inserted in recycler":"Billete insertado en el reciclador","You must allow the access to yours serial devices":"Debes permitir el acceso a tus dispositivos seriales","Please click the button below, and choose the device you want to use.":"Por favor haz clic en el botón de abajo, y elige el dispositivo que deseas usar.","Choose a serial port":"Elegir un puerto serial","Sorry your browser is not compatible with":"Lo sentimos tu navegador no es compatible con","Make sure you are in a compatible browser":"Asegurate de estar en un navegador compatible","In Chrome 78 - 88 you can enable support in":"En Chrome 78 - 88 puedes habilitar el soporte en","enabling the flag":"habilitando la bandera","In Chrome 89 the functionality is already integrated into the browser":"En Chrome 89 ya esta integrada la funcionalidad al navegador","You can use Microsoft Edge ^ v89 (Chromium) in versions lower than 89 should work the same as chrome.":"Puedes usar Microsoft Edge ^v89 (Chromium) en versiones menores a 89 debería funcionar igual que chrome.","No connections available":"No hay conexiones disponibles","This usually happens when the request is made, however; You must begin to request the 'status' of the machine until it responds.":"Normalmente esto sucede cuando la petición se realizó, sin embargo; se debe comenzar a solicitar el 'status' o 'Estado' de la máquina hasta que esta responda.",Ok:"Ok","The last command was successful.":"El último comando fue ejecutado correctamente.","sending of keypress":"Envío de tecla presionada",'The key "{pressed_key}" was pressed in the machine "{no_machine}".':'La tecla "{pressed_key}" fue presionada en la máquina "{no_machine}".',"Full code received: ":"Código completo recibido: ","The application connected to the website":"La aplicación se conecto con el sitio web","The connection with the device was terminated at the request of the system":"La conexión con el dispositivo se termino por petición del sistema","The instruction sent is not compatible with this version of the application":"La instrucción que se mando no es compatible con esta versión de la aplicación","Connection to device not completed":"Conexión con el dispositivo no completada","Check that it is connected correctly":"Revisa que este conectada correctamente","The port is not linked to the device, so it was closed.":"El puerto no esta vinculado al dispositivo, así que se cerro.",'The door of the machine "{no_machine}" was opened':'La tecla "{pressed_key}" fue presionada en la máquina "{no_machine}".','The door of the machine "{no_machine}" was closed':'Se cerró la puerta de la máquina "{no_machine}"',Disabled:"Deshabilitado","This channel is disabled":"Este canal no esta habilitado",Enabled:"Habilitado","This channel is enabled":"Este canal si esta habilitado","Sold Out":"Agotado","This channel is sold out, if is an error, reset memory machine":"Este canal esta agotado, si es un error reinicia la memoria de la máquina","Ready.":"Lista","The machine is ready.":"La máquina esta lista.",Busy:"Ocupada","The machine is busy.":"La máquina esta ocupada.","Invalid tray":"Bandeja no válida","Invalid channel":"Canal no válido","Empty channel":"Canal vácio","Elevator motor failure (Possible jam)":"Avería en el motor del ascensor (Posible atasco)","Malfunction in the elevator conveyor or product detector":"Avería en la cinta del ascensor o en el detector de producto","Failure in one of the phototransistors in the cabinet (Cabinet)":"Avería en alguno de los fototransistores del gabinete (Armario)","No channel detected":"Ningun canal detectado","Product detector fault":"Avería en el detector de producto","Malfunction in BUS 485":"Avería en el BUS 485","Product alarm under the elevator":"Alarma de producto bajo el ascensor","Elevator adjustment alarm A24V":"Alarma de ajuste del ascensor A24V","Button panel fault":"Avería en la botonera","Write error in EEPROM":"Error de escritura en el EEPROM","Communication error with temperature control":"Error de comunicación con el control de temperatura","Thermometer disconnected":"Termometro desconectado","Misconfigured thermometer":"Termometro desconfigurado","Faulty thermometer":"Termometro averiado","Extractor consumption detection error":"Error de detección de consumo del extractor","Channel search error":"Error en la búsqueda de canal","Blockage error in product outlet":"Error búsqueda boca de salida producto","Elevator interior locked":"Interior del ascensor bloqueado","Product detector verifier error":"Error en verificador de detector de producto","Waiting for product recall":"Esperando retirada de producto","Product expired by temperature":"Producto caducado por temperatura","Faulty automatic door":"Puerta automatica averiada","The CheckSum is wrong":"El CheckSum es incorrecto","One or both checksums are wrong, please check the calculation.":"Uno o ambos checksum están mal, por favor revisa el calculo.","Code divided":"Código dividido","In process!":"En proceso!","Wait, active channels are being assigned !. This message will close when finished":"Espera se están asignando los canales activos!. Este mensaje se cerrará cuando termine","Install sweetalert to see correctly the messages":"Instala sweetalert para ver correctamente los mensajes","This need load Boardroid 1 files":"Esto necesita cargar los archivos de la Boardroid 1","Please make sure the files are been loaded":"Por favor asegurate de que los archivos están siendo cargados","isn't a function":"No es una función","{data} isn't a function":"No es una función","Values in decimal":"Valores en decimal","Please don't use this function, the port will be open when device has been detected":"No utilice esta función, el puerto se abrirá cuando se detecte el dispositivo","Removing modal of devices":"Removiendo modal de dispositivos","Verifying connected devices":"Verificando dispositivos conectados","Opening with":"Abriendo con","Failed to open serial port. Trying again.":"Falla al abrir el puerto serial. Re-intentando.","There was an unexpected disconnection. an attempt was made to disconnect the port but it was already disconnected":"Se produjo una desconexión inesperada. se intentó desconectar el puerto pero ya estaba desconectado","Cell open.":"Celda abierta.","The selected cell was open successfully.":"La celda seleccionada fue abierta correctamente.","open cell":"abrir celda","Configuration applied.":"Configuración aplicada.","The configuration was successfully applied.":"La configuración fue aplicada correctamente","configure cell":"configurar celda","MISSING DEVICES":"FALTAN DISPOSITIVOS","A new device was detected, try to connect pressing the button below.":"Se detecto un nuevo dispositivo, intente conectarse presionando el botón de abajo.","Choose a port":"Elige un puerto","Unable to open a disabled cell":"No se puede abrir una celda desactivada","Security breach!":"¡Violación de la seguridad!","Webserial needs 'HTTPS' to work. Also please upgrade your request to avoid security breaches.":"Webserial necesita 'HTTPS' para funcionar. También actualice su solicitud para evitar violaciones de seguridad.",Upgrade:"Actualizar","Leave me alone":"Ahora no joven","Webserial it will not work":"Webserial no funcionará","The port isn't open.":"El puerto no esta abierto.","The change is more than can return":"El cambio es mas de lo que se puede entregar","All devices connected":"Todos los dispositivos conectados","Dispensing product: ":"Dispensando producto: ","Elevator full, pickup some products, will continue after 1 minute":"Elevador lleno, recoge algunos productos, continuará después de 1 minuto","Elevator full, pickup some products, will continue after :seconds seconds":"Elevador lleno, recoge algunos productos, continuará después de :seconds segundos","Pickup all products from elevator, no more products will been dispensed":"Recoge todos los productos del elevador, no hay mas productos para dispensar","Elevator full, pickup some products":"Elevador lleno, recoge algunos productos","Product dispensed successfully: ":"Producto dispensado correctamente: ","Multi dispense finished, delivered: ":"Multi dispensado finalizado, entregados: ","Product not-dispensed: ":"Producto no dispensado: ","Reset errors, wait...":"Reiniciar errores, espera...","The window will close automatically en [b] seconds":"La ventana se cerrará automáticamente en [b] segundos","Current cutoff temperature: ":"Temperatura de corte actual: ","Cutting temperature":"Temperatura de corte","THERMOMETER UNCONFIGURED.":"Termómetro desconfigurado.","THERMOMETER DISCONNECTED.":"Termómetro desconectado.","FAULTY THERMOMETER.":"Termómetro defectuoso.","CHANNEL SEARCH ERROR.":"ERROR DE BÚSQUEDA DE CANAL.","PRODUCT EXPIRED BY TEMPERATURE.":"PRODUCTO CADUCADO POR TEMPERATURA.","COMMUNICATION ERROR WITH THE CONTROL TEMPERATURE.":"ERROR DE COMUNICACIÓN CON EL CONTROL DE TEMPERATURA.","Failure in one of the photo transistors in the tank.":"Fallo en uno de los fototransistores del gabinete.","Elevator adjustment alarm at 24v.":"Alarma de ajuste de ascensor a 24v.","Failure on the 485 bus (ignore if it does not have a display).":"Falla en el bus 485 (ignorar si no tiene display).","Product detector fault.":"Fallo del detector de producto.","empty channel.":"canal vacío.","invalid channel.":"canal inválido.","This tray is invalid.":"Esta bandeja no es válida.","Be careful using all this functions, because emulate response can expose your application to errors, or loses of money.":"Tenga cuidado al usar todas estas funciones, porque emular la respuesta puede exponer su aplicación a errores o pérdidas de dinero.","This instance is incorrect to do an emulation":"Esta instancia es incorrecta para hacer una emulación","The emulation is disabled":"La emulación esta desactivada","Executing emulator be carefully":"Ejecutando emulador, ten cuidado","Invalid data to emulate":"Datos inválidos para emular","The price of the last read of coin purse doesn't have registered correctly":"El precio de la ultima lectura del monedero no se tiene registrada correctamente","Device(s) disconnected,":"Dispositivo(s) desconectado(s),","Jofemar Machine":"Máquina Jofemar","Wait, the active channels are being assigned! This message will close when finished.":"¡Espera se están asignando los canales activos!. Este mensaje se cerrará cuando termine.","An error was received, engines reading in process!":"¡Se recibió un error, lectura de motores en proceso!","Percentage of test matrix":"Porcentaje de la prueba de matriz","Port forgotten":"Puerto olvidado","Navigator don't support forget by now":"El navegador no soporta forget por ahora","Webserial version [no_version] created by danidoble":"Webserial versión [no_version] creada por danidoble","Tray requested is invalid":"La bandeja solicitada es inválida","Channel requested is invalid":"El canal solicitado es inválido","This function not works with boardroid instance":"Esta función no funciona con una instancia de Boardroid","This function not works with jofemar instance":"Esta función no funciona con una instancia de Jofemar","This function not works with locker instance":"Esta función no funciona con una instancia de Locker","This function only works with jofemar instance":"Esta función solo funciona con una instancia de Jofemar","This function only works with locker instance":"Esta función solo funciona con una instancia de Locker","This function only works with boardroid instance":"Esta función solo funciona con una instancia de Boardroid",Temperature:"Temperatura","Custom this temperature result function":"Personaliza la función del resultado de la temperatura","The change is more than can deliver":"El cambio es mas de lo que se puede entregar","The change is more than can deliver, showing alert in display":"El cambio es mas de lo que se puede entregar, mostrando alerta en pantalla","Lever pressed":"Palanca presionada",Dismiss:"Cerrar","Coin ejected":"Moneda expulsada","20 pesos":"20 pesos","Unused coin":"Moneda sin usar","Something come from coin changer but in MDB Docs is unused":"Algo llegó desde el monedero pero en la documentación de MDB no se utiliza","Coin rejected":"Moneda rechazada","This function is expecting string parameter":"Esta función esta un parámetro de cadena","This function is not expecting an empty string":"Esta función no espera una cadena vacía"};function t(){t=function(){return e};var e={},n=Object.prototype,i=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new E(i||[]);return r(a,"_invoke",{value:x(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p={};function _(){}function f(){}function v(){}var g={};d(g,s,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(S([])));w&&w!==n&&i.call(w,s)&&(g=w);var b=v.prototype=_.prototype=Object.create(g);function y(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,a,s,c){var l=h(e[r],e,a);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==o(u)&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var a;r(this,"_invoke",{value:function(e,i){function r(){return new t((function(t,r){n(e,i,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return D()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=h(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function C(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var r=h(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function S(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return f.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:f,configurable:!0}),f.displayName=d(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,d(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},y(k.prototype),d(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new k(u(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(b),d(b,l,"Generator"),d(b,s,(function(){return this})),d(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)}))}}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,u(i.key),i)}}function s(e,t){l(e,t),t.add(e)}function c(e,t,n){l(e,t),t.set(e,n)}function l(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}function h(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,f(e,t,"set"),n),n}function p(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function _(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,f(e,t,"get"))}function f(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var v=new WeakMap,g=new WeakMap,m=new WeakMap,w=new WeakMap,b=new WeakMap,y=new WeakMap,k=new WeakMap,x=new WeakMap,C=new WeakMap,M=new WeakMap,T=new WeakSet,E=new WeakSet,S=new WeakMap,D=new WeakMap,L=new WeakMap,A=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),s(this,E),s(this,T),c(this,v,{writable:!0,value:{log:!0,warn:!0,debug:!0,error:!0}}),c(this,g,{writable:!0,value:{}}),c(this,m,{writable:!0,value:0}),c(this,w,{writable:!0,value:1}),c(this,b,{writable:!0,value:0}),c(this,y,{writable:!0,value:0}),c(this,k,{writable:!0,value:0}),c(this,x,{writable:!0,value:_(this,w)+_(this,b)+_(this,y)}),c(this,C,{writable:!0,value:0}),c(this,M,{writable:!0,value:[]}),d(this,"_control",!1),d(this,"_control_page",null),d(this,"_enable_developer",!1),c(this,S,{writable:!0,value:[]}),c(this,D,{writable:!0,value:!1}),c(this,L,{writable:!0,value:0}),console.debug("Created by danidoble","https://github.com/danidoble","https://danidoble.com")}var i,l,u,f;return i=n,l=[{key:"onDD",value:function(e){var t="",n="danidoble";document.addEventListener("keydown",(function(i){if((t+=""+i.key)===n)return e();n.indexOf(t)&&(t=""+i.key)}))}},{key:"onTestModeOn",value:function(e){var t="",n="testmodeon";document.addEventListener("keydown",(function(i){if((t+=""+i.key)===n)return e();n.indexOf(t)&&(t=""+i.key)}))}},{key:"onTestModeOff",value:function(e){var t="",n="testmodeoff";document.addEventListener("keydown",(function(i){if((t+=""+i.key)===n)return e();n.indexOf(t)&&(t=""+i.key)}))}},{key:"__",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!==i&&"object"===o(i)?void 0!==i&&i[t]?i[t]:t:"es"===n.lang&&void 0!==e&&e[t]?e[t]:t}},{key:"decToHex",value:function(e){return parseInt(e).toString(16).toUpperCase()}},{key:"hexToDec",value:function(e){return parseInt(e,16)}},{key:"add0x",value:function(e){var t=[];return e.forEach((function(e,n){t[n]="0x"+e})),t}},{key:"hexMaker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;void 0===e&&(e="00");var n=t-e.toString().length;if(n>0)for(var i=0;i<n;i++)e="0"+e;return e.toString().toUpperCase()}},{key:"arrDecToHex",value:function(e){var t=this,n=[];return e.forEach((function(e,i){n[i]=t.decToHex(e)})),n}},{key:"arrHexToDec",value:function(e){var t=this,n=[];return e.forEach((function(e,i){n[i]=t.decToHex(e)})),n}},{key:"sumHex",value:function(e){var t=0;return e.forEach((function(e){t+=parseInt(e,16)})),t.toString(16)}},{key:"boardroidSumHex",value:function(e){var t=0;return e.forEach((function(e,n){0!==n&&11!==n&&(t+=parseInt(e,16))})),t.toString(16).toUpperCase()}},{key:"relaySumHex",value:function(e){var t=0;return e.forEach((function(e,n){3!==n&&(t+=parseInt(e,16))})),t.toString(16).toUpperCase()}},{key:"jofemarCalcCheckSums",value:function(e){e=this.add0x([this.decToHex(parseInt(e).toString())]);var t=[];return t.push((255&e|240).toString(16).toUpperCase()),t.push((255&e|15).toString(16).toUpperCase()),t}},{key:"log",value:function(){if(_(this,v).log){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length?console.log(t[0]):console.log(t),console.debug(p(this,T,P).call(this,"log",t))}}},{key:"error",value:function(){if(_(this,v).error){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length?console.error(t[0]):console.error(t),console.debug(p(this,T,P).call(this,"error",t))}}},{key:"debug",value:function(){if(_(this,v).debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length?console.debug(t[0]):console.debug(t),console.debug(p(this,T,P).call(this,"debug",t))}}},{key:"warn",value:function(){if(_(this,v).warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length?console.warn(t[0]):console.warn(t),console.debug(p(this,T,P).call(this,"warn",t))}}},{key:"setBoardroidConnectionConstant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=["F1","06","00","00","00","00","00","00","00","00","F2","F8"];return t[1]=this.hexMaker(this.decToHex((5+e).toString())),t[11]=this.boardroidSumHex(t),this.add0x(t)}},{key:"setLockerConnectionConstant",value:function(){var e=["02","06","00","03","03","1D","F8","1B","03","F9"];return this.add0x(e)}},{key:"setRelayConnectionConstant",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=["A0","01","00","A1"];return t[1]=this.hexMaker(this.decToHex(e.toString())),t[3]=this.relaySumHex(t),this.add0x(t)}},{key:"setJofemarConnectionConstant",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=["02","30","30",(128+t).toString(16),"53","FF","FF"],i=[];return n.forEach((function(t){i.push(e.hexMaker(t))})),this.jofemarMakeBytes(i)}},{key:"jofemarMakeBytes",value:function(e){for(var t=this.hexToDec(this.sumHex(e)),n=this.jofemarCalcCheckSums(t.toString()),i=0;i<2;i++)e.push(this.hexMaker(n[i]));return e.push("03"),this.add0x(e)}},{key:"isWebserialSupported",value:function(e){var t=document.getElementById(window[e]);return null===t&&(t=document.getElementById(e)),null===t?(console.error(e+" must be an id of element in the DOM"),!1):(t.classList.toggle("hidden","serial"in navigator),"serial"in navigator)}},{key:"setDeviceStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"boardroid",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("boardroid"===e.toLowerCase()){var i=document.getElementById(window["_id_br"+t+"_btn_connect_serial"]);if(null===i)return alert("'_id_br"+t+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;n?i.classList.add("hidden"):i.classList.remove("hidden")}else if("jofemar"===e.toLowerCase()){var r=document.getElementById(window["_id_jof"+t+"_btn_connect_serial"]);if(null===r)return alert("'_id_jof"+t+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;n?r.classList.add("hidden"):r.classList.remove("hidden")}else if("locker"===e.toLowerCase()){var o=document.getElementById(window["_id_lock"+t+"_btn_connect_serial"]);if(null===o)return alert("'_id_lock"+t+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;n?o.classList.add("hidden"):o.classList.remove("hidden")}else if("relay"===e.toLowerCase()){var a=document.getElementById(window["_id_relay"+t+"_btn_connect_serial"]);if(null===a)return alert("'_id_relay"+t+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;n?a.classList.add("hidden"):a.classList.remove("hidden")}var s=document.getElementById(_id_vl_modal_permissions);if(null===s)return alert(_id_vl_modal_permissions+" must be an id of element in the DOM"),!1;s.setAttribute("data-action",e),s.click()}},{key:"checkDevicesConnected",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=0;_(this,g).boardroid={},_(this,g).jofemar={},_(this,g).lockers={},_(this,g).relays={};var n=document.getElementById(window._devices_disconnected_names);n.innerText="";for(var i=1;i<=_(this,w);i++){var r=document.getElementById("_id_br"+i+"_btn_connect_serial");if(null===r)return alert("'_id_br"+i+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;window["owl_br"+i+"_connected"]?(t++,_(this,g).boardroid["no_"+i]=!0,r.classList.add("hidden")):(""!==n.innerText.trim()?n.innerText+=",":n.innerText=dd.__("Device(s) disconnected,"),n.innerText+=" Boardroid #"+i,_(this,g).boardroid["no_"+i]=!1,r.classList.remove("hidden"),this.setDeviceStatus("boardroid",i,!1))}for(var o=1;o<=_(this,b);o++){var a=document.getElementById("_id_jof"+o+"_btn_connect_serial");if(null===a)return alert("'_id_jof"+o+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;window["owl_jof"+o+"_connected"]?(t++,_(this,g).jofemar["no_"+o]=!0,a.classList.add("hidden")):(""!==n.innerText.trim()?n.innerText+=",":n.innerText=dd.__("Device(s) disconnected,"),n.innerText+=" "+dd.__("Jofemar Machine")+" #"+o,_(this,g).jofemar["no_"+o]=!1,a.classList.remove("hidden"),this.setDeviceStatus("jofemar",o,!1))}for(var s=1;s<=_(this,y);s++){var c=document.getElementById(window["_id_lock"+s+"_btn_connect_serial"]);if(null===c)return alert("'_id_lock"+s+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;window["owl_lock"+s+"_connected"]?(t++,_(this,g).lockers["no_"+s]=!0,c.classList.add("hidden")):(""!==n.innerText.trim()?n.innerText+=",":n.innerText=dd.__("Device(s) disconnected,"),n.innerText+=" Locker #"+s,_(this,g).lockers["no_"+s]=!1,c.classList.remove("hidden"),this.setDeviceStatus("locker",s,!1))}for(var l=1;l<=_(this,k);l++){var d=document.getElementById(window["_id_relay"+l+"_btn_connect_serial"]);if(null===d)return alert("'_id_relay"+l+"_btn_connect_serial' must be an variable with the id of element in the DOM"),!1;window["owl_relay"+l+"_connected"]?(t++,_(this,g).relays["no_"+l]=!0,d.classList.add("hidden")):(""!==n.innerText.trim()?n.innerText+=",":n.innerText=dd.__("Device(s) disconnected,"),n.innerText+=" Relay #"+l,_(this,g).relays["no_"+l]=!1,d.classList.remove("hidden"),this.setDeviceStatus("relay",l,!1))}var u=document.getElementById(_id_vl_open_modal_permissions);if(null===u)return alert(_id_vl_open_modal_permissions+" must be an id of element in the DOM"),!1;if(0!==_(this,m)&&(clearTimeout(_(this,m)),h(this,m,0)),t>=_(this,x))this.log(dd.__("All devices connected"),_(this,g)),document.querySelector("body").style.overflow="auto",u.classList.add("hidden");else{var p=this;h(this,m,setTimeout((function(){p.error(dd.__("MISSING DEVICES"),_(p,g)),!0===e&&setTimeout((function(){p.checkDevicesConnected()}),3e3)}),1e3)),document.querySelector("body").style.overflow="hidden",u.classList.remove("hidden"),dd.showDisconnectedMessage()}}},{key:"showDisconnectedMessage",value:function(){!0===dd._enable_developer?(document.getElementById(window._id_vl_not_device).style.display="none",document.getElementById(window._id_btn_to_connect_container).style.display="",document.getElementById(window._id_btn_to_connect_container).classList.add("inline-block")):(document.getElementById(window._id_vl_not_device).style.display="",document.getElementById(window._id_btn_to_connect_container).style.display="none",document.getElementById(window._id_btn_to_connect_container).classList.remove("inline-block"))}},{key:"addButtonToPermissions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Boardroid",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="br";"locker"===e.toLowerCase()?n="lock":"jofemar"===e.toLowerCase()?n="jof":"relay"===e.toLowerCase()&&(n="relay");var i=this;_(i,S).push({prefix:n,name:e,number:t}),h(i,L,setInterval((function(){_(i,S).length>0?!1===_(i,D)&&(h(i,D,!0),i.putHTMLBtnIntoDom(e,n,t).then((function(){var e=JSON.stringify(_(i,S).slice(1));h(i,S,JSON.parse(e)),h(i,D,!1)}))):(clearInterval(_(i,L)),h(i,L,0))}),300))}},{key:"putHTMLBtnIntoDom",value:(f=r(t().mark((function e(n,i,o){var a,s,c,l;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=document.getElementById(window._vl_btns_code_),window["_id_"+i+o+"_btn_connect_serial"]="_id_"+i+o+"_btn_connect_serial",null!==document.getElementById(window["_id_"+i+o+"_btn_connect_serial"])){e.next=12;break}a.innerHTML+='<button type="button" data-prefix=\''+i+"' data-number='"+o+"' id=\"_id_"+i+o+'_btn_connect_serial" class="btn-connect-serial btn ws-my-1 justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm">'+n+" "+o+": "+dd.__("Choose a port")+"</button>",s=document.querySelectorAll(".btn-connect-serial"),c=t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s[n].addEventListener("click",r(t().mark((function e(){var i,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s[n].getAttribute("data-prefix"),r=s[n].getAttribute("data-number"),e.next=4,window[i+r].initSerial();case 4:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})),l=0;case 7:if(!(l<s.length)){e.next=12;break}return e.delegateYield(c(l),"t0",9);case 9:l++,e.next=7;break;case 12:case"end":return e.stop()}}),e)}))),function(e,t,n){return f.apply(this,arguments)})},{key:"getRandomInt",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}},{key:"setExpectedConnectedDevices",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h(this,x,_(this,w)+_(this,b)+_(this,y)+_(this,k)),e&&h(this,x,_(this,x)-1),h(this,C,0)}},{key:"removePermissionOverlay",value:function(){if(void 0===window.permission_observer){var e=document.getElementById(window._id_vl_open_modal_permissions);if(null!==e){e.classList.contains("hidden")||(e.classList.add("hidden"),e.style.removeProperty("display")),window.permission_observer=new MutationObserver((function(t){t.forEach((function(t){"attributes"===t.type.toLowerCase()?"class"===t.attributeName.toLowerCase()?e.classList.contains("hidden")||(e.classList.add("hidden"),e.style.removeProperty("display")):"style"===t.attributeName.toLowerCase()?"none"!==e.style.display&&(e.classList.add("hidden"),e.style.removeProperty("display")):console.warn(t):console.warn(t)}))}));var t={attributes:!0,childList:!1,characterData:!1},n=document.getElementById("container-warning-modal-permission");window.permission_observer.observe(n,t)}}}},{key:"restorePermissionOverlay",value:function(){void 0!==window.permission_observer&&(window.permission_observer.disconnect(),window.permission_observer=void 0)}},{key:"number_boardroid_project",get:function(){return _(this,w)},set:function(e){h(this,w,e),this.setExpectedConnectedDevices()}},{key:"number_jofemar_project",get:function(){return _(this,b)},set:function(e){h(this,b,e),this.setExpectedConnectedDevices()}},{key:"number_lockers_project",get:function(){return _(this,y)},set:function(e){h(this,y,e),this.setExpectedConnectedDevices()}},{key:"number_relays_project",set:function(e){h(this,k,e),this.setExpectedConnectedDevices()}},{key:"console",get:function(){return{log:_(this,v).log,warn:_(this,v).warn,error:_(this,v).error,debug:_(this,v).debug}},set:function(e){_(this,v).log=e,_(this,v).error=e,_(this,v).warn=e,_(this,v).debug=e}},{key:"consoleLog",get:function(){return _(this,v).log},set:function(e){_(this,v).log=e}},{key:"consoleWarn",get:function(){return _(this,v).warn},set:function(e){_(this,v).warn=e}},{key:"consoleDebug",get:function(){return _(this,v).debug},set:function(e){_(this,v).debug=e}},{key:"consoleError",get:function(){return _(this,v).error},set:function(e){_(this,v).error=e}},{key:"totalExpectedDevices",get:function(){return _(this,x)}},{key:"connectedDevices",get:function(){return _(this,g)}},{key:"extSaveConsole",value:function(e,t){console.clear()}},{key:"saveConsole",value:function(){p(this,E,j).call(this,{reason:dd.__("unload page, force log of console data to save")},!0)}},{key:"find",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?(console.warn(dd.__("This function is expecting string parameter")),null):""===e.trim()?(console.warn(dd.__("This function is not expecting an empty string")),null):document.querySelector(e)}},{key:"findAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?(console.warn(dd.__("This function is expecting string parameter")),[]):""===e.trim()?(console.warn(dd.__("This function is not expecting an empty string")),[]):document.querySelectorAll(e)}},{key:"$id",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?(console.warn(dd.__("This function is expecting string parameter")),null):""===e.trim()?(console.warn(dd.__("This function is not expecting an empty string")),null):document.getElementById(e)}},{key:"$cls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?(console.warn(dd.__("This function is expecting string parameter")),[]):""===e.trim()?(console.warn(dd.__("This function is not expecting an empty string")),[]):document.querySelectorAll("."+e)}},{key:"consoleData",get:function(){return _(this,M)}},{key:"setDeveloperMode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];dd._enable_developer=e,dd.removePermissionOverlay(),dd.restorePermissionOverlay(),dd.checkDevicesConnected(!1)}},{key:"messageDisplay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"error";switch(n.trim().toLowerCase()){case"success":case"info":case"warning":case"question":n=n.trim().toLowerCase();break;default:n="error"}"function"==typeof Swal.fire?Swal.fire({icon:n,title:e,html:t}):dd.error(e,t,n)}},{key:"htmlData",value:function(){window._id_vl_boardroid="boardroid-container",window._id_vl_not_support="_owl_serial_navigator_not_supported",window._id_vl_btn_close_not_support="_owl_serial_close_navigator_not_supported",window._id_vl_modal_permissions="_owl_btn_choose_serial_modal",window._id_vl_log_serial="_owl_log_serial",window._id_vl_btn_open_modal_permissions="btn-open-warning-modal-permission",window._id_vl_not_device="owl_device_not_detected",window._id_vl_open_modal_permissions="container-warning-modal-permission",window.owl_image_reload="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIj48cGF0aCBkPSJNNDYzLjcwMiAxNjIuNjU1TDQ0Mi40OTEgMTQuMTY0Yy0xLjc0NC0xMi4xNzQtMTYuNzA3LTE3LjIzMy0yNS40NTktOC40ODFsLTMwLjg5NCAzMC44OTRDMzQ2LjQxMSAxMi42MTIgMzAxLjMwOSAwIDI1NC45MzIgMCAxMTUuNDY0IDAgMy40OTEgMTA5LjE2LjAwNSAyNDguNTExYy0uMTkgNy42MTcgNS4zNDcgMTQuMTUgMTIuODc2IDE1LjIzNGw1OS45NDEgOC41NjljOC45MzYgMS4zMDQgMTcuMjQ5LTUuNzEyIDE3LjEyNS0xNS4wNThDODguNzA0IDE2NS4yODYgMTYyLjk4NiA5MCAyNTQuOTMyIDkwYzIyLjI2NSAwIDQ0LjI2NyA0LjUyNiA2NC42IDEzLjE4M2wtMjkuNzggMjkuNzhjLTguNjk3IDguNjk3LTMuNzYxIDIzLjcwNiA4LjQ4MSAyNS40NTlsMTQ4LjQ5MSAyMS4yMTFjOS43ODQgMS40NzUgMTguMzgxLTcuMDM0IDE2Ljk3OC0xNi45Nzh6TTQ5OS4xMTcgMjQ5LjQxMmwtNTkuODk3LTguNTU1Yy03LjczOC0uOTgtMTcuMTI0IDUuNjUxLTE3LjEyNCAxNi4xNDMgMCA5MC45ODEtNzQuMDE5IDE2NS0xNjUgMTY1YTE2NS4yMDcgMTY1LjIwNyAwIDAxLTY0LjMwNi0xMy4wNTJsMjguODI4LTI4LjgyOGM4LjY5Ny04LjY5NyAzLjc2MS0yMy43MDYtOC40ODEtMjUuNDU5TDY0LjY0NiAzMzMuNDM1Yy05Ljc1My0xLjM5My0xOC4zOSA2Ljk3MS0xNi45NzggMTYuOTc4bDIxLjIxIDE0OC40OTJjMS43NDYgMTIuMTg3IDE2LjY5NiAxNy4yMTIgMjUuNDU5IDguNDgxbDMxLjY0MS0zMS42MjZDMTY1LjUxNCA0OTkuNTA1IDIxMC41ODcgNTEyIDI1Ny4wOTYgNTEyYzEzOC43OTQgMCAyNTAuNzUyLTEwOC42MTggMjU0Ljg5Ny0yNDcuMjguMjItNy42MzItNS4zMTctMTQuMjI0LTEyLjg3Ni0xNS4zMDh6IiBmaWxsPSIjZmZmIiBkYXRhLW9yaWdpbmFsPSIjMDAwMDAwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLz48L3N2Zz4=",window._vl_btns_code_="container_btns_serials",window._devices_disconnected_names="_devices_disconnected_names",window._id_btn_to_connect_container="_id_btn_to_connect_container_webserial",window._id_image_not_device_detected="_id_image_not_device_detected",window.owl_image_not_device_detected="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnN2Z2pzPSJodHRwOi8vc3ZnanMuY29tL3N2Z2pzIiB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeD0iMCIgeT0iMCIgdmlld0JveD0iMCAwIDg4Ljc4NCA4OC43ODQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiIGNsYXNzPSIiPjxnPjxnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggc3R5bGU9IiIgZD0iTTU4Ljc0LDBIMzAuMDI3djI2LjAzM0g1OC43NEM1OC43NCwyNi4wMzMsNTguNzQsMCw1OC43NCwweiBNNDAuMTczLDE3LjQ5N2gtNi4yODF2LTYuMjgxaDYuMjgxICAgIFYxNy40OTd6IE01NC44NzUsMTcuNDk3aC02LjI3N3YtNi4yODFoNi4yNzdWMTcuNDk3eiIgZmlsbD0iI2ZmZmZmZiIgZGF0YS1vcmlnaW5hbD0iIzAxMDAwMiIgY2xhc3M9IiI+PC9wYXRoPjxwYXRoIHN0eWxlPSIiIGQ9Ik02NS40MzYsMjguOTMxYy0wLjIwNCwwLjYxMi0xLjAyNywxLjA0NS0yLjQzNCwxLjA0NUgyNS44NDZjLTEuNTI1LDAtMi40MTItMC40OTctMi40OTgtMS4xOTkgICAgYy0wLjEwNCwwLjM5LTAuMTY4LDAuODQxLTAuMTY4LDEuMzk2djI4LjY4NGMwLDQuNTU2LDMuODE5LDguMjg1LDguNDgyLDguMjg1aDI1LjQ0MmM0LjY2MywwLDguNDc4LTMuNzI5LDguNDc4LTguMjg1VjMwLjE3MyAgICBDNjUuNTksMjkuNjc5LDY1LjUxOCwyOS4yOTMsNjUuNDM2LDI4LjkzMXogTTUwLjMxNSw0MS43NjJjLTAuMzI5LTAuMDA0LTAuNjU5LDAtMC45ODQsMGMtMC4wMTQsMC4wMjktMC4wMTQsMC4wNTQtMC4wMTQsMC4wNzUgICAgYzAsMC43MzQsMCwxLjQ2NywwLDIuMjAxYzAuMDE0LDAuNzAxLTAuMjU4LDEuMzAzLTAuNzE5LDEuODE4Yy0wLjI4NiwwLjMwNC0wLjYwOCwwLjU4LTAuOTA5LDAuODYyICAgIGMtMC44MDUsMC43NzMtMS42MTQsMS41MjgtMi40MjYsMi4zMDFjLTAuMjIyLDAuMjA4LTAuMzI2LDAuNDgzLTAuMzY5LDAuNzc3Yy0wLjAwNywwLjA3OS0wLjAxNCwwLjE1Ny0wLjAxNCwwLjIzNiAgICBjMCwxLjc1LDAsMy41MDQsMCw1LjI2MWMwLDAuMDY4LDAuMDE0LDAuMDg2LDAuMDg5LDAuMTA3YzAuOTkxLDAuMjMzLDEuNzI1LDEuMDYzLDEuODY1LDIuMDgzICAgIGMwLjE3NSwxLjMwMy0wLjcyNywyLjU0NS0yLjAyMiwyLjc1OWMtMS4zMzgsMC4yMjItMi41NzctMC42MzMtMi44NTYtMS45NTRjLTAuMjU4LTEuMjkyLDAuNTY1LTIuNTg0LDEuODQzLTIuODgxICAgIGMwLjA3OS0wLjAyMSwwLjA5My0wLjA1NCwwLjA5My0wLjEyOWMtMC4wMDctMC41MjMtMC4wMDctMS4wNDUtMC4wMDctMS41NjhjMC0wLjM1NC0wLjExMS0wLjY2Mi0wLjMyOS0wLjk0MSAgICBjLTAuMDIxLTAuMDIxLTAuMDIxLTAuMDM2LTAuMDYxLTAuMDYxYy0xLjA3LTEuMDEzLTIuMTU4LTIuMDI5LTMuMjE3LTMuMDZjLTAuNTIzLTAuNTE1LTAuODItMS4xNi0wLjgyLTEuOTIyICAgIGMwLTAuNzU5LDAtMS41MDcsMC0yLjI3NmMwLTAuMDU3LTAuMDE0LTAuMDgyLTAuMDc1LTAuMTA3Yy0wLjYyMy0wLjI0My0wLjk4OC0wLjg4LTAuOTE2LTEuNTIxICAgIGMwLjA4Mi0wLjY5OCwwLjYwOC0xLjIyLDEuMjg4LTEuMzEzYzAuOTAyLTAuMTE1LDEuNzE0LDAuNjIzLDEuNjY0LDEuNTM5Yy0wLjAzNiwwLjYxOS0wLjM1NCwxLjA1Mi0wLjkzMSwxLjMwMyAgICBjLTAuMDU0LDAuMDE4LTAuMDY4LDAuMDQ3LTAuMDY4LDAuMDkzYzAsMC43OTUsMCwxLjU5MywwLjAwNywyLjM4N2MwLjAwNywwLjQwMSwwLjE2MSwwLjc0OCwwLjQ0NywxLjAzMSAgICBjMC45ODQsMC45MzQsMS45NjUsMS44NjEsMi45NDksMi43ODRjMC4wMjEsMC4wMTQsMC4wMzYsMC4wMzYsMC4wNTcsMC4wNjhjMC01LjA1LDAtMTAuMDg5LDAtMTUuMTMxYy0wLjM5LDAtMC43OTgsMC0xLjIxNywwICAgIGMwLjU4LTAuOTk1LDEuMTM0LTEuOTc2LDEuNzE0LTIuOTY3YzAuNTgsMC45ODgsMS4xNDIsMS45NjgsMS43MTQsMi45NTZjLTAuNDI2LDAtMC44MiwwLTEuMjE3LDBjMCwzLjgwOC0wLjAxNCw3LjYxNiwwLDExLjQyNyAgICBjMC4wMTQtMC4wMTQsMC4wMjktMC4wMjksMC4wNDMtMC4wMzljMS4wMTMtMC45NjMsMi4wMjYtMS45MDQsMy4wMjQtMi44NjdjMC4yMTEtMC4yMDgsMC4zMTUtMC40NjUsMC4zNzItMC43NDggICAgYzAuMDE0LTAuMDc1LDAuMDE0LTAuMTUsMC4wMTQtMC4yMjJjMC0wLjc2NiwwLTEuNTI1LDAtMi4yOThjMC0wLjAxNCwwLTAuMDMyLDAtMC4wNjRjLTAuMzI5LDAtMC42NTEsMC0wLjk3NywwICAgIGMwLTAuOTkxLDAtMS45NzksMC0yLjk1NmMwLjk3NywwLjAwNCwxLjk1OCwwLDIuOTU2LDBDNTAuMzE1LDM5Ljc4Niw1MC4zMTUsNDAuNzcsNTAuMzE1LDQxLjc2MnoiIGZpbGw9IiNmZmZmZmYiIGRhdGEtb3JpZ2luYWw9IiMwMTAwMDIiIGNsYXNzPSIiPjwvcGF0aD48cGF0aCBzdHlsZT0iIiBkPSJNNDcuMTA4LDc0LjE4Mmg1LjA3NWMxLjQzMiwwLDIuNjA5LTEuMTcsMi42MDktMi42MDV2LTEuODQzYzAtMC4xMzYtMC4wNjQtMC4yNTEtMC4wNzUtMC4zNzkgICAgaC0yMC42NWMtMC4wMjUsMC4xMjktMC4wNzUsMC4yNDctMC4wNzUsMC4zNzl2MS44NDNjMCwxLjQyOCwxLjE2MywyLjYwNSwyLjYwMiwyLjYwNWg1LjI2NGMwLjE2MSwxLjQwNiwwLjc4NCw0LjMyLDMuMTg5LDcuMjMzICAgIGM0LjAzLDQuODg1LDEwLjk0NCw3LjM2OSwyMC41NTcsNy4zNjl2LTUuMkM1MC4zNzIsODMuNTgsNDcuNjAyLDc2LjY1OSw0Ny4xMDgsNzQuMTgyeiIgZmlsbD0iI2ZmZmZmZiIgZGF0YS1vcmlnaW5hbD0iIzAxMDAwMiIgY2xhc3M9IiI+PC9wYXRoPjwvZz48L2c+PC9nPjwvc3ZnPg==",window.__webserial_html__=document.createElement("div"),window.__webserial_html__.setAttribute("id",window._id_vl_boardroid),window.__webserial_html__.innerHTML='<div class="fixed z-40x inset-0 overflow-y-auto hidden" id="'+window._id_vl_open_modal_permissions+'"><button id="'+window._id_vl_btn_open_modal_permissions+'" class="hidden"></button><div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"><div class="fixed inset-0 transition-opacity" aria-hidden="true"><div class="absolute inset-0 bg-gray-800 opacity-75"></div><span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">​</span><div id="'+window._id_btn_to_connect_container+'" class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6" role="dialog" aria-modal="true" aria-labelledby="modal-headline"><div><div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full"><svg class="h-10 w-10 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div><div class="mt-3 text-center sm:mt-5"><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-headline">'+__("You must allow the access to yours serial devices")+'</h3><div class="mt-2"><p class="text-sm text-gray-500">'+__("Please click the button below, and choose the device you want to use.")+'</p></div><h3 class="text-lg leading-6 font-medium text-gray-900" id="_message-txt-permissions"></h3></div></div><div class="mt-5 sm:mt-6"><button type="button" id="'+window._id_vl_modal_permissions+'" class="hidden"></button><div id="'+window._vl_btns_code_+'"></div></div></div></div></div><div id="'+window._id_vl_log_serial+'"></div><div id="'+window._id_vl_not_device+'" class="'+window._id_vl_not_device+'" style="display: none"><img src="'+window.owl_image_not_device_detected+'" alt="'+__("Device disconnected")+'" class="owl-w-100 owl-p-4 owl-max-h-80vh" id="'+window._id_image_not_device_detected+'"><div id="'+window._devices_disconnected_names+'" class="owl-w-100 owl-p-4 ws-text-center ws-text-white ws-text-3xl ws-max-w-80 ws-m-auto"></div><a href="'+location.toString()+'" class="owl-btn owl-btn-link owl-fixed-bottom"><img src="'+window.owl_image_reload+'" style="max-width:60px;margin:0 auto;" alt="'+__("Reload")+'"></a></div></div><div id="'+window._id_vl_not_support+'" class="hidden fixed inset-x-0 pb-2 sm:pb-5 bottom-0">\n<div class="max-w-7xl mx-auto px-2 sm:px-6 lg:px-8">\n  <div class="bg-pink-50 shadow rounded-lg">\n    <div class="max-w-7xl mx-auto py-3 px-3 sm:px-6 lg:px-8">\n      <div class="flex items-center justify-between flex-wrap">\n        <div class="w-0 flex-1 flex items-center">\n          <span class="flex p-2 rounded-lg">\n            <svg class="w-10 h-10 text-rose-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" /></svg>          </span>\n          <div class="ml-3">               <h3 class="ml-2 text-lg font-medium text-red-700">'+__("Sorry your browser is not compatible with")+" <b>Web Serial</b>. "+__("Make sure you are in a compatible browser")+'</h3>               <div class="mt-2 text-sm text-gray-900">                   <ul class="list-disc pl-5 space-y-1">                       <li>'+__("In Chrome 78 - 88 you can enable support in")+' <code class="text-blue-700">chrome://flags</code> '+__("enabling the flag")+' <code class="text-blue-700">#enable-experimental-web-platform-features</code></li>                       <li>'+__("In Chrome 89 the functionality is already integrated into the browser")+"</li>                       <li>"+__("You can use Microsoft Edge ^ v89 (Chromium) in versions lower than 89 should work the same as chrome.")+'<br><code class="text-blue-700">edge://flags</code> '+__("enabling the flag")+' <code class="text-blue-700">#enable-experimental-web-platform-features</code></li>                   </ul>               </div>          </div>        </div>\n        <div class="order-2 flex-shrink-0 sm:order-3 sm:ml-3">\n          <button type="button" id="'+window._id_vl_btn_close_not_support+'" class="-mr-1 flex p-2 rounded-md hover:bg-rose-100 hover:text-rose-600 focus:outline-none focus:ring-2 focus:ring-white sm:-mr-2">\n            <span class="sr-only">'+__("Dismiss")+'</span>\n            <svg class="w-10 h-10" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n</div>'}}],l&&a(i.prototype,l),u&&a(i,u),Object.defineProperty(i,"prototype",{writable:!1}),n}();function P(e,t){var n=null,i=new Error;try{i.name=__(e.toLowerCase()),i.message=JSON.stringify(t)}catch(e){n=e}finally{null===n&&(n=i),console.debug("_trace_real_",e+": ",t,n)}var r={__trace__:n.stack.toString().split("\n    "),info:t};return p(this,E,j).call(this,r),r}function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date,i=n.getTime(),r=dd.hexMaker(n.getDate()),o=n.getFullYear(),a=dd.hexMaker(n.getMonth()+1),s=dd.hexMaker(n.getHours()),c=dd.hexMaker(n.getMinutes()),l=dd.hexMaker(n.getSeconds()),d=n.getMilliseconds(),u=new URL(window.location),p={unix:i,date:o+"-"+a+"-"+r,time:s+":"+c+":"+l+"."+d,uri:u.href},f={object:e,date:p};_(this,M).push(f),(_(this,M).length>=300||!0===t)&&(this.extSaveConsole(JSON.stringify(_(this,M)),JSON.stringify(p)),h(this,M,[]))}d(A,"enable_simulator",!1),d(A,"lang","en");const I=A;function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,W(i.key),i)}}function O(e,t,n){return(t=W(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){var t=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==N(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===N(t)?t:String(t)}function F(e,t,n){return q(e,t),z(n,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,n)}function R(e,t,n,i){return q(e,t),z(n,"set"),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,n,i),i}function z(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function U(e,t,n){return q(e,t),n}function q(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}var Y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);console.debug("%cEmulator webserial. %s","color:white;font-family:system-ui;font-size:1.5rem;-webkit-text-stroke: 1px black;font-weight:bold","\n\rCreated by danidoble."),console.debug("https://github.com/danidoble","https://danidoble.com"),(e.console||!0===e.first_emulation)&&(e.first_emulation=!1,dd.warn(dd.__("Be careful using all this functions, because emulate response can expose your application to errors, or loses of money.")))}var t,n,i;return t=e,i=[{key:"status",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)){var n=[];switch(F(e,e,ee)){case"Boardroid":n=["2",(5+F(e,e,te)).toString(16).toUpperCase()];break;case"Jofemar":n=["6"];break;case"Locker":n=["0","8"]}U(e,e,V).call(e,n)}}},{key:"cellOpen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,Z).call(e)||U(e,e,V).call(e,["0","7","4","4","4"])}},{key:"cellInactive",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,Z).call(e)||U(e,e,V).call(e,["0","7","5","5","5"])}},{key:"cellConfig",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,Z).call(e)||U(e,e,V).call(e,["0","6"])}},{key:"keyPressed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,$).call(e)){var n=["30","31","32","33","34","35","36","37","38","39","2A","23","41","42","43","44"];U(e,e,V).call(e,["2",dd.decToHex(128+F(e,e,te)),"54",n[dd.getRandomInt(0,15)]])}}},{key:"doorOpen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,K).call(e)){var n=[];switch(F(e,e,ee)){case"Boardroid":n=["2","D8","dc"];break;case"Jofemar":n=["2",dd.decToHex(128+F(e,e,te)),"50","4F"]}U(e,e,V).call(e,n)}}},{key:"doorClose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,K).call(e)){var n=[];switch(F(e,e,ee)){case"Boardroid":n=["2","D8","db"];break;case"Jofemar":n=["2",dd.decToHex(128+F(e,e,te)),"50","43"]}U(e,e,V).call(e,n)}}},{key:"channelDisconnected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["2",dd.decToHex(128+F(e,e,te)),"43","43","43","FD"])}},{key:"channelConnected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["2",dd.decToHex(128+F(e,e,te)),"43","43","43","FC"])}},{key:"channelEmpty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["2",dd.decToHex(128+F(e,e,te)),"43","43","43","FF"])}},{key:"currentAssignTemperature",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["2",dd.decToHex(128+F(e,e,te)),"43","54","16"])}},{key:"currentTemperature",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,K).call(e)){var n=[];switch(F(e,e,ee)){case"Boardroid":n=["2","D9","44","30"];break;case"Jofemar":n=["2",dd.decToHex(128+F(e,e,te)),"43","74","2B","30","39","2E","31","7F","43"]}U(e,e,V).call(e,n)}}},{key:"machineReady",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","30"])}},{key:"machineBusy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","31"])}},{key:"invalidTray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","32"])}},{key:"invalidChannel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","33"])}},{key:"statusEmptyChannel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","34"])}},{key:"elevatorJam",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","35"])}},{key:"elevatorMalfunction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","36"])}},{key:"phototransistorsFailure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","37"])}},{key:"allChannelsEmpty",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","38"])}},{key:"productDetectorFault",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","39"])}},{key:"displayMachineDisconnected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","41"])}},{key:"productUnderElevator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","42"])}},{key:"elevatorSettingAlarm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","43"])}},{key:"buttonPanelFault",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","44"])}},{key:"errorWritingEEPROM",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","45"])}},{key:"errorControlTemperature",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","46"])}},{key:"thermometerDisconnected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","47"])}},{key:"thermometerMisconfigured",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","48"])}},{key:"thermometerFault",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","49"])}},{key:"errorExtractorConsumption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","4A"])}},{key:"channelSearchError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","4B"])}},{key:"productExitMouthSearchError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","4C"])}},{key:"elevatorInteriorLocked",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","4D"])}},{key:"productDetectorVerifierError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","4E"])}},{key:"waitingForProductRecall",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","4F"])}},{key:"productExpiredByTemperature",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","50"])}},{key:"faultyAutomaticDoor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","51"])}},{key:"rejectLever",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","A0","1"])}},{key:"resetCoinPurse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","A0","2"])}},{key:"coinInsertedBox",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var i=["40","41","42","43","44","45"],r=i[dd.getRandomInt(0,5)];if(null!==n&&!isNaN(parseFloat(n)))switch(n){case"0.5":r=i[1];break;case"1":r=i[2];break;case"2":r=i[3];break;case"5":r=i[4];break;case"10":r=i[5]}U(e,e,V).call(e,["2","A0",r])}}},{key:"coinInsertedTube",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var i=["50","51","52","53","54","55"],r=i[dd.getRandomInt(0,5)];if(null!==n&&!isNaN(parseFloat(n)))switch(n){case"0.5":r=i[0];break;case"1":r=i[2];break;case"2":r=i[3];break;case"5":r=i[4];break;case"10":r=i[5]}U(e,e,V).call(e,["2","A0",r])}}},{key:"banknoteInsertedStacker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var i=["80","81","82","83","84"],r=i[dd.getRandomInt(0,4)];if(null!==n&&!isNaN(parseFloat(n)))switch(n){case"20":r=i[0];break;case"50":r=i[1];break;case"100":r=i[2];break;case"200":r=i[3];break;case"500":r=i[4]}U(e,e,V).call(e,["2","B0",r])}}},{key:"banknoteInsertedPreStacker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var n=["90","91","92","93","94"];U(e,e,V).call(e,["2","B0",n[dd.getRandomInt(0,5)]])}}},{key:"banknoteEjected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var n=["a0","a1","a2","a3","a4"];U(e,e,V).call(e,["2","B0",n[dd.getRandomInt(0,5)]])}}},{key:"banknoteInsertedRecycler",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var i=["b0","b1","b2","b3","b4"],r=i[dd.getRandomInt(0,4)];if(null!==n&&!isNaN(parseFloat(n)))switch(n){case"50":r=i[1];break;case"20":r=i[0];break;case"100":r=i[2];break;case"200":r=i[3];break;case"500":r=i[4]}U(e,e,V).call(e,["2","B0",r])}}},{key:"banknoteTaken",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","B0","2a"])}},{key:"coinPurseEnabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","D0","1"])}},{key:"coinPurseDisabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","D0","0"])}},{key:"billPurseDisabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var n=["0","1"];U(e,e,V).call(e,["2","D1","0",n[dd.getRandomInt(0,1)]])}}},{key:"billPurseEnabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var n=["0","1"];U(e,e,V).call(e,["2","D1","1",n[dd.getRandomInt(0,1)]])}}},{key:"readTubes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f"];U(e,e,V).call(e,["2","D2",n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)]])}}},{key:"readBillPurse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c"];if(t._ict){var i="0",r="0",o="0",a="0",s="0";switch(t._ict_bill){case 0:i=n[dd.getRandomInt(0,31)];break;case 1:r=n[dd.getRandomInt(0,31)];break;case 2:o=n[dd.getRandomInt(0,31)];break;case 3:a=n[dd.getRandomInt(0,31)];break;case 4:s=n[dd.getRandomInt(0,31)]}U(e,e,V).call(e,["2","D3",i,r,o,a,s,"0"])}else U(e,e,V).call(e,["2","D3",n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,2)],n[dd.getRandomInt(0,1)],n[dd.getRandomInt(0,1)]])}}},{key:"banknoteAccepted",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","D4","1"])}},{key:"banknoteRejected",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","D4","0"])}},{key:"banknotesDispensed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,X).call(e)){var n=["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c"];if(t._ict){var i="0",r="0",o="0",a="0",s="0";switch(t._ict_bill){case 0:i=n[dd.getRandomInt(0,30)];break;case 1:r=n[dd.getRandomInt(0,30)];break;case 2:o=n[dd.getRandomInt(0,30)];break;case 3:a=n[dd.getRandomInt(0,30)];break;case 4:s=n[dd.getRandomInt(0,30)]}U(e,e,V).call(e,["2","D5",i,r,o,a,s,"0"])}else U(e,e,V).call(e,["2","D5",n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,30)],n[dd.getRandomInt(0,2)],n[dd.getRandomInt(0,1)],n[dd.getRandomInt(0,1)]])}}},{key:"coinsDispensed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","D6"])}},{key:"productDispensed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,K).call(e))switch(F(e,e,ee)){case"Boardroid":U(e,e,V).call(e,["2","D7","A","0","0","0","0","0","0","0","0","0","F2"]);break;case"Jofemar":U(e,e,V).call(e,["6","30"])}}},{key:"productNotDispensed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!1!==U(e,e,J).call(e,t)&&!U(e,e,K).call(e))switch(F(e,e,ee)){case"Boardroid":U(e,e,V).call(e,["2","D7","A","0","0","1","0","0","0","0","0","0","F2"]);break;case"Jofemar":U(e,e,V).call(e,["6","34"])}}},{key:"relayOn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DA","1"])}},{key:"relayOff",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DA","0"])}},{key:"nayaxEnabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","1"])}},{key:"nayaxDisabled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","0"])}},{key:"nayaxPreCreditAuthorized",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","3"])}},{key:"nayaxCancelRequest",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","4"])}},{key:"nayaxSellApproved",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","5"])}},{key:"nayaxSellDenied",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","6"])}},{key:"nayaxEndSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","7"])}},{key:"nayaxCancelled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","8"])}},{key:"nayaxDispensed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","A","0"])}},{key:"nayaxNotDispensed",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,X).call(e)||U(e,e,V).call(e,["2","DD","A","1"])}},{key:"fullTray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!1===U(e,e,J).call(e,t)||U(e,e,$).call(e)||U(e,e,V).call(e,["6","4F"])}}],(n=null)&&B(t.prototype,n),i&&B(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(){var e=!0===Danidoble.enable_simulator&&!0===Y.enable_simulator;return e||U(Y,Y,Q).call(Y,dd.__("The emulation is disabled")),e}function H(e){return void 0===JSON.parse(e.toString()).__class?(U(Y,Y,Q).call(Y,dd.__("This instance is incorrect to do an emulation")),!1):(R(Y,Y,ee,JSON.parse(e.toString()).__class),R(Y,Y,te,JSON.parse(e.toString()).__number_device),!0)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t?dd.error(e):dd.error(e,t)}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!U(Y,Y,G).call(Y))return!1;if(null!==e&&"object"===N(e)){if(Y.instance=e,!U(Y,Y,H).call(Y,e))return Y.instance=null,!1;if(Y.console||!0===Y.first_emulation){if(!0===Y.first_emulation){var t="color:white;font-family:system-ui;font-size:2rem;-webkit-text-stroke: 1px black;font-weight:bold";console.debug("%cEmulator webserial. %s",t,"\n\rCreated by danidoble."),console.debug("https://github.com/danidoble","https://danidoble.com")}Y.first_emulation=!1,dd.warn(dd.__("Be careful using all this functions, because emulate response can expose your application to errors, or loses of money."))}return!0}return null!==Y.instance&&"object"===N(Y.instance)?!!U(Y,Y,H).call(Y,Y.instance)||(Y.instance=null,!1):(U(Y,Y,Q).call(Y,dd.__("This instance is incorrect to do an emulation")),!1)}function V(e){Y.instance.extEmulate({code:e})}function Z(){return"Locker"!==F(Y,Y,ee)&&(dd.error(dd.__("This function only works with locker instance")),!0)}function X(){return"Boardroid"!==F(Y,Y,ee)&&(dd.error(dd.__("This function only works with boardroid instance")),!0)}function $(){return"Jofemar"!==F(Y,Y,ee)&&(dd.error(dd.__("This function only works with jofemar instance")),!0)}function K(){return"Locker"===F(Y,Y,ee)&&(dd.error(dd.__("This function not works with locker instance")),!0)}O(Y,"first_emulation",!0),O(Y,"console",!0),O(Y,"enable_simulator",!1),O(Y,"instance",null);var ee={writable:!0,value:"Boardroid"},te={writable:!0,value:1};const ne=Y;function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function re(){re=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new M(r||[]);return i(a,"_invoke",{value:y(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function h(){}function p(){}function _(){}var f={};c(f,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&n.call(g,o)&&(f=g);var m=_.prototype=h.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==ie(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function y(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return E()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=_,i(m,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:p,configurable:!0}),p.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new b(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(m),c(m,s,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function oe(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function ae(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){oe(o,i,r,a,s,"next",e)}function s(e){oe(o,i,r,a,s,"throw",e)}a(void 0)}))}}function se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,ue(i.key),i)}}function le(e,t){pe(e,t),t.add(e)}function de(e,t,n){return(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==ie(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ie(t)?t:String(t)}function he(e,t,n){pe(e,t),t.set(e,n)}function pe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _e(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function fe(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ge(e,t,"set"),n),n}function ve(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ge(e,t,"get"))}function ge(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var me=new WeakMap,we=new WeakMap,be=new WeakMap,ye=new WeakMap,ke=new WeakMap,xe=new WeakMap,Ce=new WeakMap,Me=new WeakMap,Te=new WeakMap,Ee=new WeakMap,Se=new WeakMap,De=new WeakMap,Le=new WeakMap,Ae=new WeakMap,Pe=new WeakMap,je=new WeakMap,Ie=new WeakMap,Ne=new WeakMap,Be=new WeakMap,Oe=new WeakMap,We=new WeakMap,Fe=new WeakMap,Re=new WeakMap,ze=new WeakMap,Ue=new WeakMap,qe=new WeakMap,Ye=new WeakMap,Ge=new WeakMap,He=new WeakMap,Qe=new WeakMap,Je=new WeakMap,Ve=new WeakMap,Ze=new WeakMap,Xe=new WeakMap,$e=new WeakMap,Ke=new WeakMap,et=new WeakMap,tt=new WeakMap,nt=new WeakMap,it=new WeakSet,rt=new WeakSet,ot=new WeakSet,at=new WeakSet,st=new WeakSet,ct=new WeakSet,lt=new WeakSet,dt=new WeakSet,ut=new WeakSet,ht=new WeakSet,pt=new WeakSet,_t=new WeakSet,ft=new WeakSet,vt=new WeakSet,gt=new WeakSet,mt=new WeakSet,wt=new WeakSet,bt=new WeakSet,yt=new WeakSet,kt=new WeakSet,xt=new WeakSet,Ct=new WeakSet,Mt=new WeakSet,Tt=new WeakSet,Et=new WeakSet,St=new WeakSet,Dt=new WeakSet;function Lt(){Object.freeze(ve(this,Ze))}function At(){return Pt.apply(this,arguments)}function Pt(){return(Pt=ae(re().mark((function e(){var t,n,i,r,o,a=this;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._serial_filters,e.next=4,navigator.serial.getPorts({filters:t});case 4:if(!((n=e.sent).length>0)){e.next=46;break}if(e.prev=6,!(ve(this,Ae)<n.length)){e.next=21;break}if(i=ve(this,Ae),r=n[i].getInfo(),!(t.length>0)){e.next=18;break}if(r.usbProductId!==t[0].usbProductId||r.usbVendorId!==t[0].usbVendorId){e.next=15;break}fe(this,we,n[i]),e.next=16;break;case 15:throw new Error("The port is already open.");case 16:e.next=19;break;case 18:fe(this,we,n[i]);case 19:e.next=36;break;case 21:return fe(this,Ae,0),e.prev=22,e.t0=fe,e.t1=this,e.t2=we,e.next=28,navigator.serial.requestPort({filters:t});case 28:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.next=36;break;case 32:return e.prev=32,e.t4=e.catch(22),_e(this,ut,Ft).call(this,e.t4),e.abrupt("return");case 36:if(ve(this,we)){e.next=38;break}throw new Error("Select another port please");case 38:e.next=44;break;case 40:return e.prev=40,e.t5=e.catch(6),_e(this,ut,Ft).call(this,e.t5),e.abrupt("return");case 44:e.next=60;break;case 46:return e.prev=46,e.t6=fe,e.t7=this,e.t8=we,e.next=52,navigator.serial.requestPort({filters:t});case 52:e.t9=e.sent,(0,e.t6)(e.t7,e.t8,e.t9),e.next=60;break;case 56:return e.prev=56,e.t10=e.catch(46),_e(this,ut,Ft).call(this,e.t10),e.abrupt("return");case 60:e.next=65;break;case 62:e.prev=62,e.t11=e.catch(0),_e(this,ut,Ft).call(this,e.t11);case 65:return e.prev=65,_e(this,ht,Rt).call(this,!0),e.next=69,ve(this,we).open(this._serial_config_port);case 69:return o=this,ve(this,we).ondisconnect=function(e){_e(o,kt,Zt).call(o,e)},ve(this,we).onconnect=function(e){_e(o,kt,Zt).call(o,e)},this.extSentData({message:"Boardroid  "+dd.__("Opening with"),hex:ve(this,De)}),fe(this,Pe,[]),fe(this,je,setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(a,st,Ot).call(a,ve(a,De),"connect_start");case 2:case"end":return e.stop()}}),e)}))),ve(this,Ie))),_e(this,_t,Ut).call(this,ve(this,De)),e.next=78,_e(this,at,Nt).call(this);case 78:e.next=83;break;case 80:e.prev=80,e.t12=e.catch(65),_e(this,ut,Ft).call(this,e.t12);case 83:return e.abrupt("return",0);case 84:case"end":return e.stop()}}),e,this,[[0,62],[6,40],[22,32],[46,56],[65,80]])})))).apply(this,arguments)}function jt(){return It.apply(this,arguments)}function It(){return(It=ae(re().mark((function e(){var t,n=this;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!ve(this,be)){e.next=8;break}return(t=ve(this,be).cancel())&&t.then((function(e){e&&dd.log(e)})).catch((function(e){_e(n,ut,Ft).call(n,e)})),e.next=6,ve(this,xe);case 6:fe(this,be,null),fe(this,xe,null);case 8:if(!ve(this,Me)){e.next=17;break}return e.next=11,ve(this,Me).getWriter().close();case 11:return e.next=13,ve(this,Me).getWriter().close();case 13:return e.next=15,ve(this,Ce);case 15:fe(this,Me,null),fe(this,Ce,null);case 17:fe(this,we,null),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),_e(this,ut,Ft).call(this,e.t0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})))).apply(this,arguments)}function Nt(){return Bt.apply(this,arguments)}function Bt(){return(Bt=ae(re().mark((function e(){var t,n,i,r,o,a,s,c,l,d,u,h,p;return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve(this,we).readable||!ve(this,Te)){e.next=47;break}if(ve(this,Xe)){e.next=28;break}fe(this,be,ve(this,we).readable.getReader()),e.prev=3;case 4:return e.next=7,ve(this,be).read();case 7:if(t=e.sent,n=t.value,!t.done){e.next=14;break}return ve(this,be).releaseLock(),fe(this,Te,!1),e.abrupt("break",18);case 14:if(_e(this,pt,zt).call(this,n),ve(this,Ee).length===ve(this,Se)){for(r in i=[],ve(this,Ee))i.push(ve(this,Ee)[r].toString(16));ve(this,Ee)&&_e(this,vt,Yt).call(this,i),fe(this,Ee,new Uint8Array(0))}else if(ve(this,Ee).length<ve(this,Se))setTimeout((function(){}),1e3);else if(ve(this,Ee).length>ve(this,Se)){for(o=[],a=0;a<ve(this,Se);a++)o[a]=ve(this,Ee)[a];if(o.length===ve(this,Se)){for(c in s=[],o)s.push(o[c].toString(16));o&&_e(this,vt,Yt).call(this,s)}if(o=void 0,o=[],9999,ve(this,Ee).length===2*ve(this,Se))for(l=14;l<2*ve(this,Se);l++)o[l-ve(this,Se)]=ve(this,Ee)[l];if(o.length===ve(this,Se)){for(u in d=[],o)d.push(o[u].toString(16));o&&_e(this,vt,Yt).call(this,d)}o=void 0,o=[],fe(this,Ee,new Uint8Array(0)),ve(this,Ee).length===2*ve(this,Se)&&fe(this,Ee,new Uint8Array(0))}e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),_e(this,ut,Ft).call(this,e.t0);case 23:return e.prev=23,ve(this,be).releaseLock(),e.finish(23);case 26:e.next=45;break;case 28:fe(this,ye,new TextDecoderStream),fe(this,ke,ve(this,we).readable.pipeTo(ve(this,ye).writable)),fe(this,be,ve(this,ye).readable.getReader());case 31:return e.next=34,ve(this,be).read();case 34:if(h=e.sent,p=h.value,!h.done){e.next=41;break}return ve(this,be).releaseLock(),fe(this,Te,!1),e.abrupt("break",44);case 41:_e(this,vt,Yt).call(this,p),e.next=31;break;case 44:ve(this,ke).then((function(e){dd.log(e)})).catch((function(e){dd.error(e)}));case 45:e.next=0;break;case 47:return fe(this,Te,!0),e.next=50,ve(this,we).close();case 50:case"end":return e.stop()}}),e,this,[[3,20,23,26]])})))).apply(this,arguments)}function Ot(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=ae(re().mark((function e(t,n){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._last_error.message=dd.__("Operation response timed out."),this._last_error.handler=n,this._last_error.code=t,clearTimeout(ve(this,je)),fe(this,je,void 0),"connect"!==this._last_error.handler){e.next=10;break}_e(this,Et,en).call(this),this.reconnect(),e.next=17;break;case 10:if("connect_start"!==this._last_error.handler){e.next=17;break}return _e(this,ot,jt).call(this),fe(this,me,!1),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me),fe(this,Ae,ve(this,Ae)+1),e.next=17,_e(this,rt,At).call(this);case 17:this.extTimeoutMessage(t,n);case 18:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ft(e){var t=this;if(null===document.getElementById(_id_vl_btn_open_modal_permissions))return dd.error(e),void dd.error("_id_vl_btn_open_modal_permissions doesn't exist in DOM");e.toString().includes("Failed to execute 'requestPort' on 'Serial': Must be handling a user gesture to show a permission request")?(document.getElementById(window["_id_br"+ve(this,Le)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("The port is already open.")?(dd.debug(e),dd.warn(dd.__("Failed to open serial port. Trying again.")),_e(this,Tt,Kt).call(this),_e(this,ot,jt).call(this),setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fe(t,Ae,ve(t,Ae)+1),e.next=3,_e(t,rt,At).call(t);case 3:case"end":return e.stop()}}),e)}))),500),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Cannot read properties of undefined (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),_e(this,Et,en).call(this),_e(this,ot,jt).call(this),setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,rt,At).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Cannot read properties of null (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),_e(this,Et,en).call(this),_e(this,ot,jt).call(this),setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,rt,At).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")?dd.warn(dd.__("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")):e.toString().includes("The port is closed.")?document.getElementById(_id_vl_btn_open_modal_permissions).click():e.toString().includes("Select another port please")||e.toString().includes("No port selected by the user")||e.toString().includes("Cannot read property 'writable' of null")?(document.getElementById(window["_id_br"+ve(this,Le)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Cannot read property 'writable' of undefined")?(document.getElementById(window["_id_br"+ve(this,Le)+"_btn_connect_serial"]).classList.remove("hidden"),_e(this,Et,en).call(this),setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initSerial();case 2:case"end":return e.stop()}}),e)}))),100)):e.toString().includes("The device has been lost")?(document.getElementById(window["_id_br"+ve(this,Le)+"_btn_connect_serial"]).classList.remove("hidden"),_e(this,Et,en).call(this)):e.toString().includes("Failed to open serial port")?(dd.warn(dd.__("Failed to open serial port. Trying again.")),_e(this,Et,en).call(this),_e(this,ot,jt).call(this),setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,rt,At).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("navigator.serial is undefined")?document.getElementById(ve(this,qe)).classList.remove("hidden"):e.toString().includes("This readable stream reader has been released and cannot be used to cancel its previous owner stream")?(document.getElementById(window["_id_br"+ve(this,Le)+"_btn_connect_serial"]).classList.remove("hidden"),_e(this,Et,en).call(this),dd.checkDevicesConnected(),this.extUnexpectedDisconnection(e)):dd.error(e)}function Rt(e){fe(this,me,e),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me),dd.setDeviceStatus("boardroid",ve(this,Le),e);var t=dd.__("Connect");if(e?t=dd.__("Disconnect"):(this.__connected_devices-=1,dd.checkDevicesConnected()),null!==ve(this,He))for(var n=0;n<ve(this,He).length;n++)ve(this,He)[n].textContent=t}function zt(e){if(void 0!==e){var t=new Uint8Array(ve(this,Ee).length+e.byteLength);t.set(ve(this,Ee),0),t.set(new Uint8Array(e),ve(this,Ee).length),fe(this,Ee,t)}}function Ut(e){try{if(ve(this,Xe)){var t=new TextEncoderStream,n=t.readable.pipeTo(ve(this,we).writable);t.writable.getWriter().write(e).then((function(e){e&&dd.log(e)})),n.then((function(e){dd.log(e)})).catch((function(e){dd.error(e)}))}else{var i=new Uint8Array(e),r=ve(this,we).writable.getWriter();r.write(i).then((function(e){e&&dd.log(e)})),r.releaseLock()}}catch(e){_e(this,ut,Ft).call(this,e)}}function qt(e){var t=0;return e.forEach((function(e,n){0!==n&&11!==n&&(t+=parseInt(e,16))})),t.toString(16)}function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ve(this,Xe)&&dd.warn("Modo texto habilitado",e),0===e?_e(this,wt,Qt).call(this,t):e&&14===e.length?(fe(this,me,!0),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me),void 0!==ve(this,Ne)&&(clearInterval(ve(this,Ne)),fe(this,Ne,void 0)),clearTimeout(ve(this,je)),fe(this,je,void 0),_e(this,mt,Ht).call(this,e)):_e(this,gt,Gt).call(this,e,t)}function Gt(e,t){this.extDividedCodeMessage(e,t)}function Ht(e){var t={},n={};switch(e[1].toString().toUpperCase()){case(5+ve(this,Le)).toString(16).toUpperCase():dd.checkDevicesConnected(),_e(this,Mt,$t).call(this),t.name=dd.__("Connection with the serial device completed."),t.description=dd.__("Your connection with the serial device was successfully completed."),t.request=dd.__("connect"),t.no_code=200;break;case"A0":switch(t.name=dd.__("Coin Inserted"),t.request=dd.__("insert coin"),n.tube="tube",n.box="profit box",n.where="",n.coin="0",e[2].toString()){case"1":t.name=dd.__("Lever pressed"),t.description=dd.__("Reject lever"),t.no_code=210;break;case"2":t.name=dd.__("Reset coin purse"),t.description=dd.__("The configuration of coin purse was reset"),t.no_code=211;break;case"40":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("50 pennies (the big one)"),n.coin="G50",t.no_code=212,n.where="box";break;case"41":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("50 pennies (the little one)"),n.coin="C50",t.no_code=213,n.where="box";break;case"42":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("1 peso"),n.coin="P1",t.no_code=214,n.where="box";break;case"43":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("2 pesos"),n.coin="P2",t.no_code=215,n.where="box";break;case"44":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("5 pesos"),n.coin="P5",t.no_code=216,n.where="box";break;case"45":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("10 pesos"),n.coin="P10",t.no_code=217,n.where="box";break;case"46":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿46?",t.no_code=218,n.where="box";break;case"47":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("20 pesos"),t.no_code=219,n.where="box";break;case"48":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿48?",t.no_code=820,n.where="box";break;case"49":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿49?",t.no_code=821,n.where="box";break;case"4A":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿4A?",t.no_code=822,n.where="box";break;case"4B":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿4B?",t.no_code=823,n.where="box";break;case"4C":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿4C?",t.no_code=824,n.where="box";break;case"4D":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿4D?",t.no_code=825,n.where="box";break;case"4E":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿4E?",t.no_code=826,n.where="box";break;case"4F":t.name=dd.__("Coin inserted in "+n.box),t.description=dd.__("Undefined value:")+" ¿4F?",t.no_code=827,n.where="box";break;case"50":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("50 pennies (the big one)"),n.coin="G50",t.no_code=220,n.where="tube";break;case"51":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("50 pennies (the little one)"),n.coin="C50",t.no_code=221,n.where="tube";break;case"52":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("1 peso"),n.coin="P1",t.no_code=222,n.where="tube";break;case"53":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("2 pesos"),n.coin="P2",t.no_code=223,n.where="tube";break;case"54":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("5 pesos"),n.coin="P5",t.no_code=224,n.where="tube";break;case"55":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("10 pesos"),n.coin="P10",t.no_code=225,n.where="tube";break;case"56":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿56?",t.no_code=226,n.where="tube";break;case"57":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("20 pesos"),t.no_code=227,n.where="tube";break;case"58":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿58?",t.no_code=828,n.where="tube";break;case"59":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿59?",t.no_code=829,n.where="tube";break;case"5A":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿5A?",t.no_code=830,n.where="tube";break;case"5B":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿5B?",t.no_code=831,n.where="tube";break;case"5C":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿5C?",t.no_code=832,n.where="tube";break;case"5D":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿5D?",t.no_code=833,n.where="tube";break;case"5E":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿5E?",t.no_code=834,n.where="tube";break;case"5F":t.name=dd.__("Coin inserted in "+n.tube),t.description=dd.__("Undefined value:")+" ¿5F?",t.no_code=835,n.where="tube";break;case"60":case"61":case"62":case"63":case"64":case"65":case"66":case"67":case"68":case"69":case"6A":case"6B":case"6C":case"6D":case"6E":case"6F":t.name=dd.__("Unused coin"),t.description=dd.__("Something come from coin changer but in MDB Docs is unused"),t.no_code=836,n.where="unused";break;case"70":t.name=dd.__("Coin rejected"),t.description=dd.__("50 pennies (the big one)"),n.coin="G50",t.no_code=837,n.where="nothing";break;case"71":t.name=dd.__("Coin rejected"),t.description=dd.__("50 pennies (the little one)"),n.coin="C50",t.no_code=839,n.where="nothing";break;case"72":t.name=dd.__("Coin rejected"),t.description=dd.__("1 peso"),n.coin="P1",t.no_code=840,n.where="nothing";break;case"73":t.name=dd.__("Coin rejected"),t.description=dd.__("2 pesos"),n.coin="P2",t.no_code=841,n.where="nothing";break;case"74":t.name=dd.__("Coin rejected"),t.description=dd.__("5 pesos"),n.coin="P5",t.no_code=842,n.where="nothing";break;case"75":t.name=dd.__("Coin rejected"),t.description=dd.__("10 pesos"),n.coin="P10",t.no_code=843,n.where="nothing";break;case"76":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿76?",t.no_code=844,n.where="nothing";break;case"77":t.name=dd.__("Coin rejected"),t.description=dd.__("20 pesos"),t.no_code=845,n.where="nothing";break;case"78":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿78?",t.no_code=846,n.where="nothing";break;case"79":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿79?",t.no_code=847,n.where="nothing";break;case"7A":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿7A?",t.no_code=848,n.where="nothing";break;case"7B":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿7B?",t.no_code=849,n.where="nothing";break;case"7C":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿7C?",t.no_code=850,n.where="nothing";break;case"7D":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿7D?",t.no_code=851,n.where="nothing";break;case"7E":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿7E?",t.no_code=852,n.where="nothing";break;case"7F":t.name=dd.__("Coin rejected"),t.description=dd.__("Undefined value:")+" ¿7F?",t.no_code=853,n.where="nothing";break;case"90":t.name=dd.__("Coin ejected"),t.description=dd.__("50 pennies (the big one)"),n.coin="G50",t.no_code=854,n.where="out";break;case"91":t.name=dd.__("Coin ejected"),t.description=dd.__("50 pennies (the little one)"),n.coin="C50",t.no_code=855,n.where="out";break;case"92":t.name=dd.__("Coin ejected"),t.description=dd.__("1 peso"),n.coin="P1",t.no_code=856,n.where="out";break;case"93":t.name=dd.__("Coin ejected"),t.description=dd.__("2 pesos"),n.coin="P2",t.no_code=857,n.where="out";break;case"94":t.name=dd.__("Coin ejected"),t.description=dd.__("5 pesos"),n.coin="P5",t.no_code=858,n.where="out";break;case"95":t.name=dd.__("Coin ejected"),t.description=dd.__("10 pesos"),n.coin="P10",t.no_code=859,n.where="out";break;case"96":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿96?",t.no_code=860,n.where="out";break;case"97":t.name=dd.__("Coin ejected"),t.description=dd.__("20 pesos"),t.no_code=861,n.where="out";break;case"98":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿98?",t.no_code=862,n.where="out";break;case"99":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿99?",t.no_code=863,n.where="out";break;case"9A":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿9A?",t.no_code=864,n.where="out";break;case"9B":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿9B?",t.no_code=865,n.where="out";break;case"9C":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿9C?",t.no_code=866,n.where="out";break;case"9D":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿9D?",t.no_code=867,n.where="out";break;case"9E":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿9E?",t.no_code=868,n.where="out";break;case"9F":t.name=dd.__("Coin ejected"),t.description=dd.__("Undefined value:")+" ¿9F?",t.no_code=869,n.where="out";break;default:t.name=dd.__("Coin inserted"),t.description=dd.__("Undefined status. Without information of this coin"),t.no_code=228}this.countMoney(n.coin,n.where),"tube"!==n.where&&"out"!==n.where||this.extUpdateTubes(),this.extCoinInserted({message:t,additional:n});break;case"B0":switch(t.request=dd.__("Bank note inserted"),n.aux_name="",n.bill="0",n.value,n.inserted=dd.__("Bank note in pre-stacker, waiting instruction of banknote"),n.rejected=dd.__("Bank note rejected"),n.accepted=dd.__("Bank note accepted"),n.bill_stacker=dd.__("Bank note inserted in stacker"),n.bill_recycler=dd.__("Bank note inserted in recycler"),n.where="",n.bills={b20:"20 pesos",b50:"50 pesos",b100:"100 pesos",b200:"200 pesos",b500:"500 pesos",b1000:"1000 pesos"},n.billRetire={r20:"20 pesos",r50:"50 pesos",r100:"100 pesos",r200:"200 pesos",r500:"500 pesos",r1000:"1000 pesos"},e[2].toString()){case"80":n.value=n.bills.b20,n.aux_name=n.bill_stacker,n.bill="P20",t.no_code=229,n.where="stacker";break;case"81":n.value=n.bills.b50,n.aux_name=n.bill_stacker,n.bill="P50",t.no_code=230,n.where="stacker";break;case"82":n.value=n.bills.b100,n.aux_name=n.bill_stacker,n.bill="P100",t.no_code=231,n.where="stacker";break;case"83":n.value=n.bills.b200,n.aux_name=n.bill_stacker,n.bill="P200",t.no_code=232,n.where="stacker";break;case"84":n.value=n.bills.b500,n.aux_name=n.bill_stacker,n.bill="P500",t.no_code=233,n.where="stacker";break;case"85":n.value=dd.__("Unknown value:")+" ¿85?",n.aux_name=n.bill_stacker,t.no_code=234,n.where="stacker";break;case"86":n.value=dd.__("Unknown value:")+" ¿86?",n.aux_name=n.bill_stacker,t.no_code=235,n.where="stacker";break;case"87":n.value=dd.__("Unknown value:")+" ¿87?",n.aux_name=n.bill_stacker,t.no_code=236,n.where="stacker";break;case"90":n.value=n.bills.b20,n.aux_name=n.inserted,t.no_code=237;break;case"91":n.value=n.bills.b50,n.aux_name=n.inserted,t.no_code=238;break;case"92":n.value=n.bills.b100,n.aux_name=n.inserted,t.no_code=239;break;case"93":n.value=n.bills.b200,n.aux_name=n.inserted,t.no_code=240;break;case"94":n.value=n.bills.b500,n.aux_name=n.inserted,t.no_code=241;break;case"95":n.value=dd.__("Unknown value:")+" ¿95?",n.aux_name=n.inserted,t.no_code=242;break;case"96":n.value=dd.__("Unknown value:")+" ¿96?",n.aux_name=n.inserted,t.no_code=243;break;case"97":n.value=dd.__("Unknown value:")+" ¿97?",n.aux_name=n.inserted,t.no_code=244;break;case"a0":n.value=n.bills.b20,n.aux_name=n.rejected,t.no_code=245;break;case"a1":n.value=n.bills.b50,n.aux_name=n.rejected,t.no_code=246;break;case"a2":n.value=n.bills.b100,n.aux_name=n.rejected,t.no_code=247;break;case"a3":n.value=n.bills.b200,n.aux_name=n.rejected,t.no_code=248;break;case"a4":n.value=n.bills.b500,n.aux_name=n.rejected,t.no_code=249;break;case"a5":n.value=dd.__("Unknown value:")+" ¿a5?",n.aux_name=n.rejected,t.no_code=250;break;case"a6":n.value=dd.__("Unknown value:")+" ¿a6?",n.aux_name=n.rejected,t.no_code=251;break;case"a7":n.value=dd.__("Unknown value:")+" ¿a7?",n.aux_name=n.rejected,t.no_code=252;break;case"b0":n.value=n.bills.b20,n.aux_name=n.bill_recycler,n.bill="P20",t.no_code=253,n.where="recycler";break;case"b1":n.value=n.bills.b50,n.aux_name=n.bill_recycler,n.bill="P50",t.no_code=254,n.where="recycler";break;case"b2":n.value=n.bills.b100,n.aux_name=n.bill_recycler,n.bill="P100",t.no_code=255,n.where="recycler";break;case"b3":n.value=n.bills.b200,n.aux_name=n.bill_recycler,n.bill="P200",t.no_code=256,n.where="recycler";break;case"b4":n.value=n.bills.b500,n.aux_name=n.bill_recycler,n.bill="P500",t.no_code=257,n.where="recycler";break;case"b5":n.value=dd.__("Unknown value:")+" ¿a5",n.aux_name=n.bill_recycler,t.no_code=258,n.where="recycler";break;case"b6":n.value=dd.__("Unknown value:")+" ¿a6",n.aux_name=n.bill_recycler,t.no_code=259,n.where="recycler";break;case"b7":n.value=dd.__("Unknown value:")+" ¿a7",n.aux_name=n.bill_recycler,t.no_code=260,n.where="recycler";break;case"2a":n.value=n.billRetire.r50,n.aux_name=n.billRetire,n.bill="R50",t.no_code=260,n.where="recyclerOut"}t.name=n.aux_name,t.description=n.value,this.countMoney(n.bill,n.where);break;case"D0":switch(t.request=dd.__("Config coin purse"),n.message1="",n.message2="",e[2].toString()){case"1":n.message1=dd.__("Coin purse enabled"),n.message2=dd.__("Configuration complete"),t.no_code=261;break;case"0":n.message1=dd.__("Coin purse disabled"),n.message2=dd.__("Disabled by system request"),t.no_code=262;break;default:n.message1=dd.__("Status unknown"),n.message2=dd.__("The response of coin purse doesn't identify successfully"),t.no_code=263}t.name=dd.__(n.message1),t.description=dd.__(n.message2);break;case"D1":switch(t.request=dd.__("Configure bill purse"),n.status_pre_scrow="",e[3].toString()){case"0":n.status_pre_scrow=dd.__("Configuration pre scroll disabled, bank note received automatic"),t.no_code=265;break;case"1":n.status_pre_scrow=dd.__("Configuration pre scroll enabled"),t.no_code=266}switch(e[2].toString()){case"0":n.message1=dd.__("Bill purse disabled");break;case"1":n.message1=dd.__("Bill purse enabled")}"0"===e[2].toString()&&(n.status_pre_scrow="",t.no_code=264),t.name=n.message1,t.description=n.status_pre_scrow;break;case"D2":t.request=dd.__("read tubes"),t.no_code=267,n.coins={c50c:e[2],c50g:e[3],p1:e[4],p2:e[5],p5:e[6],p10:e[7]},ve(this,ze).tubes.C50=dd.hexToDec(n.coins.c50c),ve(this,ze).tubes.G50=dd.hexToDec(n.coins.c50g),ve(this,ze).tubes.P1=dd.hexToDec(n.coins.p1),ve(this,ze).tubes.P2=dd.hexToDec(n.coins.p2),ve(this,ze).tubes.P5=dd.hexToDec(n.coins.p5),ve(this,ze).tubes.P10=dd.hexToDec(n.coins.p10),ve(this,ze).total=.5*ve(this,ze).tubes.C50+.5*ve(this,ze).tubes.G50+ve(this,ze).tubes.P1+2*ve(this,ze).tubes.P2+5*ve(this,ze).tubes.P5+10*ve(this,ze).tubes.P10+.5*ve(this,ze).box.C50+.5*ve(this,ze).box.G50+ve(this,ze).box.P1+2*ve(this,ze).box.P2+5*ve(this,ze).box.P5+10*ve(this,ze).box.P10,t.name=dd.__("read tubes"),t.description=dd.__("Quantity of coins approx"),this.percentageTubes(),this.amountTubes();break;case"D3":t.request=dd.__("read bank notes"),t.no_code=268,n.bills={b20:e[2],b50:e[3],b100:e[4],b200:e[5],b500:e[6],b1000:e[7]},ve(this,Ue).recycler.P20=dd.hexToDec(n.bills.b20),ve(this,Ue).recycler.P50=dd.hexToDec(n.bills.b50),ve(this,Ue).recycler.P100=dd.hexToDec(n.bills.b100),ve(this,Ue).recycler.P200=dd.hexToDec(n.bills.b200),ve(this,Ue).recycler.P500=dd.hexToDec(n.bills.b500),ve(this,Ue).recycler.P1000=dd.hexToDec(n.bills.b1000),ve(this,Ue).total=20*ve(this,Ue).recycler.P20+50*ve(this,Ue).recycler.P50+100*ve(this,Ue).recycler.P100+200*ve(this,Ue).recycler.P200+500*ve(this,Ue).recycler.P500+1e3*ve(this,Ue).recycler.P1000+20*ve(this,Ue).stacker.P20+50*ve(this,Ue).stacker.P50+100*ve(this,Ue).stacker.P100+200*ve(this,Ue).stacker.P200+500*ve(this,Ue).stacker.P500+1e3*ve(this,Ue).stacker.P1000,t.name=dd.__("Quantity of bank notes"),t.description=dd.__("Quantity of bank notes approx:")+" 20 pesos = "+n.bills.b20+" "+dd.__("bank notes")+" 50 pesos = "+n.bills.b50+" "+dd.__("bank notes")+" 100 pesos = "+n.bills.b100+" "+dd.__("bank notes")+" 200 pesos = "+n.bills.b200+" "+dd.__("bank notes")+" 500 pesos = "+n.bills.b500+" "+dd.__("bank notes")+" 1000 pesos = "+n.bills.b1000+" "+dd.__("bank notes")+dd.__("Quantity of bank notes approx:")+" ";break;case"D4":switch(t.request=dd.__("bank note status"),n.status_bill="",e[2].toString()){case"1":n.status_bill=dd.__("Bank note accepted"),t.no_code=269;break;case"0":n.status_bill=dd.__("Bank note rejected"),t.no_code=270;break;default:n.status_bill=dd.__("Unknown status bank note"),t.no_code=271}t.name=n.status_bill,t.description="";break;case"D5":t.request=dd.__("bank notes dispensed"),t.no_code=272,n.bills={b20cc:parseInt(e[2],16),b50cc:parseInt(e[3],16),b100cc:parseInt(e[4],16),b200cc:parseInt(e[5],16),b500cc:parseInt(e[6],16),b1000cc:parseInt(e[7],16)},n.quantity_dispensed=20*n.bills.b20cc+50*n.bills.b50cc+100*n.bills.b100cc+200*n.bills.b200cc+500*n.bills.b500cc+1e3*n.bills.b1000cc,n.message1=dd.__("Dispensed")+"  "+n.quantity_dispensed+" pesos",n.message2=dd.__("Quantity approx.")+" $20x"+n.bills.b20cc+". $50x"+n.bills.b50cc+". $100x"+n.bills.b100cc+". $200x"+n.bills.b200cc+". $500x"+n.bills.b500cc+". $1000x"+n.bills.b1000cc,0===n.quantity_dispensed&&(n.message1=dd.__("No money dispensed"),n.message2=dd.__("Probably bill purse is empty"),t.no_code=273),t.name=n.message1,t.description=n.message2;break;case"D6":if(t.request=dd.__("coins dispensed"),t.no_code=274,t.name=dd.__("coins dispensed"),t.description="",isNaN(this._last_change_coin_purse)&&("function"==typeof Swal.fire?Swal.fire(dd.__("The price of the last read of coin purse doesn't have registered correctly")):dd.warn(dd.__("The price of the last read of coin purse doesn't have registered correctly")),this._last_change_coin_purse=0),fe(this,We,ve(this,We)+this._last_change_coin_purse),void 0===ve(this,Je)){var i=this;fe(this,Je,setTimeout((function(){i.extRetireBill(),clearTimeout(ve(i,Je)),fe(i,Je,void 0)}),500))}break;case"D7":switch(t.request=dd.__("status of dispense product"),n.status_dispense="",e[5].toString()){case"1":n.status_dispense=dd.__("Product not delivered"),n.message2=dd.__("The product requested wasn't delivered"),t.no_code=275,fe(this,Qe,!1);break;case"0":n.status_dispense=dd.__("Product delivered"),n.message2=dd.__("The product requested was delivered")+": "+parseInt(e[2],16),t.no_code=276,fe(this,Qe,!0);break;default:n.status_dispense=dd.__("Status unknown"),n.message2=dd.__("Error"),t.no_code=277,fe(this,Qe,!1)}t.name=n.status_dispense,t.description=n.message2;break;case"D8":switch(t.request=dd.__("status door"),t.no_code=211,n.status="",e[13]){case"db":n.status=dd.__("Door closed"),t.no_code=278,_e(this,Ct,Xt).call(this,"close");break;case"dc":n.status=dd.__("Door open"),t.no_code=279,_e(this,Ct,Xt).call(this,"open");break;default:n.status=dd.__("Status unknown"),t.no_code=280}t.name=n.status,t.description="";break;case"D9":t.request=dd.__("temperature status"),t.no_code=281,1===e[3].length&&(e[3]="0"+e[3]),n.temp_high=255*parseInt(e[2],16),n.temp_low=parseInt(e[3],16),n.temperature=parseFloat((.1*(n.temp_high+n.temp_low)).toString()),t.name=dd.__("Status of temperature"),t.description=dd.__("Temperature")+": "+n.temperature,this._arr_log_temperature.push({high:n.temp_high,low:n.temp_low,temperature:n.temperature}),this.extTemperature(n.temperature);break;case"DA":t.request=dd.__("Relay status"),t.no_code=213,"1"===e[2].toString()?(t.name=dd.__("Relay on"),t.no_code=282):"0"===e[2].toString()?(t.name=dd.__("Relay off"),t.no_code=283):(t.name=dd.__("Status unknown"),t.no_code=284),t.description="";break;case"DB":t.request=dd.__("Save memory bill purse"),t.no_code=285,t.name=dd.__("Status unknown"),t.description=dd.__("Without information");break;case"DC":t.request=dd.__("Read memory bill purse"),t.no_code=295,t.name=dd.__("Status unknown"),t.description=dd.__("Without information");break;case"DD":switch(t.request=dd.__("Card reader status"),e[2].toString().toUpperCase()){case"0":t.no_code=505,t.name=dd.__("Nayax disabled"),t.description=dd.__("The Nayax device was disabled successfully");break;case"1":case"2":t.no_code=506,t.name=dd.__("Nayax enabled"),t.description=dd.__("The Nayax device now is enabled");break;case"3":t.no_code=507,t.name=dd.__("Pre authorized credit"),t.description=dd.__("The pre credit was authorized successfully");break;case"4":t.no_code=508,t.name=dd.__("Cancellation in progress"),t.description=dd.__("Cancellation request done successfully");break;case"5":t.no_code=509,t.name=dd.__("Sell approved"),t.description=dd.__("Sell approved, starting dispense product");break;case"6":t.no_code=510,t.name=dd.__("Sell denied"),t.description=dd.__("This sell was denied, try again");break;case"7":t.no_code=511,t.name=dd.__("Session ended"),t.description=dd.__("The session ended");break;case"8":t.no_code=512,t.name=dd.__("Cancelled"),t.description=dd.__("Cancellation complete");break;case"A":switch(e[8]){case"1":t.no_code=513,t.name=dd.__("Product not dispensed"),t.description=dd.__("Product not dispensed, payed with nayax device");break;case"0":t.no_code=514,t.name=dd.__("Product dispensed"),t.description=dd.__("The process of dispensing product ended successfully");break;default:t.no_code=515,t.name=dd.__("Status unknown"),t.description=dd.__("No more information about dispense status")}break;default:t.no_code=516,t.name=dd.__("Status unknown"),t.description=dd.__("The status of card reader does not identified correctly")}break;default:t.request=dd.__("undefined"),t.name=dd.__("Response unrecognized"),t.description=dd.__("The response of application was received, but dont identify with any of current parameters"),t.no_code=404}this.extSerialMessage({code:e,message:t.name,description:t.description,request:t.request,no_code:t.no_code})}function Qt(e){clearTimeout(ve(this,je));var t={},n=this;switch(t.name="",t.description="",e.no_code){case 700:t.name=e.message,t.description=dd.__("The application connect successfully with website");break;case 701:t.name=e.message,t.description=dd.__("The connection with the serial device was ended by system request");break;case 702:t.name=e.message,t.description=dd.__("The last instruction is not compatible with this version of the application");break;case 703:_e(this,Et,en).call(this),void 0===ve(this,Ne)&&fe(this,Ne,setInterval((function(){n.reconnect()}),n._time_to_reconnect)),t.name=dd.__("Serial device disconnected"),t.description=e.description;break;case 704:t.name=e.message,t.description=e.description;break;case 705:_e(this,Et,en).call(this),void 0===ve(this,Ne)&&fe(this,Ne,setInterval((function(){n.reconnect()}),n._time_to_reconnect)),t.name=dd.__("Connection with the serial device is not complete"),t.description=dd.__("Check the device is connected correctly");break;case 706:t.name=e.message,t.description=dd.__("The port was not linked to the serial device, so we closed");break;case 707:t.name=e.message,t.description=dd.__("The response was not received in the time specified by the application");break;default:t.name=e.message,t.description=dd.__("Oops! you ran into an unknown error")}this.extAppMessage({message:t.name,description:t.description,no_code:e.no_code})}function Jt(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];e.forEach((function(e){i.push(dd.hexMaker(e))})),i[11]=dd.hexMaker(_e(this,ft,qt).call(this,i)),i=dd.add0x(i),void 0!==ve(this,je)?(ve(this,Pe).push({bytes:i,to_do:n}),dd.warn(dd.__("You send a new command to serial device before have an answer")+". "+dd.__("Commands in queue:")+" "+ve(this,Pe).length),fe(this,Re,setInterval((function(){void 0===ve(t,je)&&ve(t,Pe).length>0&&(dd.log(dd.__("Sending in delay mode")+". "+dd.__("Commands in queue:")+" "+ve(t,Pe).length),clearInterval(ve(t,Re)),fe(t,Re,void 0),fe(t,je,setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve(t,Pe)[0].bytes){e.next=3;break}return e.next=3,_e(t,st,Ot).call(t,ve(t,Pe)[0].bytes,ve(t,Pe)[0].to_do);case 3:case"end":return e.stop()}}),e)}))),"dispense"===ve(t,Pe)[0].to_do?t._time_response_engines:t._time_response_general)),t.extSentData({message:n,hex:ve(t,Pe)[0].bytes}),_e(t,_t,Ut).call(t,ve(t,Pe)[0].bytes),fe(t,Pe,ve(t,Pe).splice(1)))}),500))):(fe(this,Pe,[]),fe(this,je,setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t,st,Ot).call(t,i,n);case 2:case"end":return e.stop()}}),e)}))),"dispense"===n?this._time_response_engines:this._time_response_general)),this.extSentData({message:n,hex:i}),_e(this,_t,Ut).call(this,i))}function Vt(e){fe(this,me,!1),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me),dd.warn(e),this.extConnectionLost(e)}function Zt(e){var t=this;fe(this,me,!1),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me),_e(this,yt,Vt).call(this,e),fe(this,Ae,0),setTimeout(ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.disconnect();case 2:case"end":return e.stop()}}),e)}))),100)}function Xt(e){this.extLogDoorStatus(e)}function $t(){this.extDefaultLoad()}function Kt(){this.extWithDevice()}function en(){this.extWithoutDevice()}function tn(){return nn.apply(this,arguments)}function nn(){return(nn=ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serial"in navigator)||!("forget"in SerialPort.prototype)){e.next=3;break}return e.next=3,ve(this,we).forget();case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function rn(e){"object"===ie(e.code)?(dd.warn(dd.__("Executing emulator be carefully")),ve(this,me)||(fe(this,me,!0),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me),void 0!==ve(this,Ne)&&(clearInterval(ve(this,Ne)),fe(this,Ne,void 0))),clearTimeout(ve(this,je)),fe(this,je,void 0),_e(this,mt,Ht).call(this,e.code)):dd.error(dd.__("Invalid data to emulate"))}const on=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];se(this,e),le(this,Dt),le(this,St),le(this,Et),le(this,Tt),le(this,Mt),le(this,Ct),le(this,xt),le(this,kt),le(this,yt),le(this,bt),le(this,wt),le(this,mt),le(this,gt),le(this,vt),le(this,ft),le(this,_t),le(this,pt),le(this,ht),le(this,ut),le(this,dt),le(this,lt),le(this,ct),le(this,st),le(this,at),le(this,ot),le(this,rt),le(this,it),he(this,me,{writable:!0,value:!1}),he(this,we,{writable:!0,value:void 0}),he(this,be,{writable:!0,value:void 0}),he(this,ye,{writable:!0,value:void 0}),he(this,ke,{writable:!0,value:void 0}),he(this,xe,{writable:!0,value:void 0}),he(this,Ce,{writable:!0,value:void 0}),he(this,Me,{writable:!0,value:void 0}),he(this,Te,{writable:!0,value:!0}),he(this,Ee,{writable:!0,value:new Uint8Array(0)}),he(this,Se,{writable:!0,value:14}),he(this,De,{writable:!0,value:dd.setBoardroidConnectionConstant(1)}),he(this,Le,{writable:!0,value:1}),he(this,Ae,{writable:!0,value:0}),he(this,Pe,{writable:!0,value:[]}),he(this,je,{writable:!0,value:void 0}),he(this,Ie,{writable:!0,value:500}),he(this,Ne,{writable:!0,value:void 0}),he(this,Be,{writable:!0,value:10}),he(this,Oe,{writable:!0,value:0}),he(this,We,{writable:!0,value:0}),he(this,Fe,{writable:!0,value:void 0}),he(this,Re,{writable:!0,value:void 0}),he(this,ze,{writable:!0,value:{tubes:{G50:0,C50:0,P1:0,P2:0,P5:0,P10:0},box:{G50:0,C50:0,P1:0,P2:0,P5:0,P10:0},G50:0,C50:0,P1:0,P2:0,P5:0,P10:0,total:0}}),he(this,Ue,{writable:!0,value:{stacker:{P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0},recycler:{P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0},recyclerOut:{P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0},P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0,total:0}}),he(this,qe,{writable:!0,value:"_id_vl_not_support"}),he(this,Ye,{writable:!0,value:void 0}),he(this,Ge,{writable:!0,value:null}),he(this,He,{writable:!0,value:null}),he(this,Qe,{writable:!0,value:void 0}),he(this,Je,{writable:!0,value:void 0}),he(this,Ve,{writable:!0,value:void 0}),he(this,Ze,{writable:!0,value:{_interval_reconnection:void 0,_waiting_for_sense:void 0,_price:void 0,_change:0,_timer_until_response:void 0,_status_dispense:void 0,_amount_inserted:0,_amount_retired:0,_aux_iteration:10,_time_response_general:3e3,_time_response_connect_start:500,_time_response_engines:15e3,_time_to_reconnect:7e3,_count_timeout_sense:0,_arr_log_temperature:[],_last_error:{message:null,handler:null,code:null,no_code:666},_arr_coins:{tubes:{G50:0,C50:0,P1:0,P2:0,P5:0,P10:0},box:{G50:0,C50:0,P1:0,P2:0,P5:0,P10:0},G50:0,C50:0,P1:0,P2:0,P5:0,P10:0,total:0},_arr_bills:{stacker:{P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0},recycler:{P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0},recyclerOut:{P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0},P20:0,P50:0,P100:0,P200:0,P500:0,P1000:0,total:0},_time_to_reload:2e3}}),de(this,"_serial_filters",[]),he(this,Xe,{writable:!0,value:!1}),de(this,"default_alert",!1),he(this,$e,{writable:!0,value:0}),he(this,Ke,{writable:!0,value:0}),de(this,"_serial_config_port",{baudRate:115200,dataBits:8,stopBits:1,parity:"none",bufferSize:32768,flowControl:"none"}),de(this,"_time_response_general",4e3),de(this,"_time_response_engines",15e3),de(this,"_nayax_max_pre_credit",0),de(this,"_price",void 0),de(this,"_change",0),de(this,"_arr_log_temperature",[]),de(this,"_last_error",{message:null,handler:null,code:null,no_code:666}),de(this,"_time_to_reconnect",7e3),de(this,"_show_without_device",!0),de(this,"_change_returned_verified",0),de(this,"_no_dispense_all_money",!1),de(this,"_last_change_coin_purse",0),de(this,"_ict",!0),de(this,"_ict_bill",1),de(this,"_reload_when_finished",!0),de(this,"_log_time_door_open",[{name:"open",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()}]),de(this,"_log_time_door_close",[{name:"close",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()}]),de(this,"_counter_sense_door",1),de(this,"_limit_sense_door",30),he(this,et,{writable:!0,value:0}),he(this,tt,{writable:!0,value:2e3}),he(this,nt,{writable:!0,value:1e3}),de(this,"__sense_selection",null),de(this,"__sense_id_movement",null);var r="color:white;font-family:system-ui;font-size:2rem;-webkit-text-stroke: 1px black;font-weight:bold";console.debug("%cBoardroid webserial. %s",r,"\n\rCreated by danidoble."),dd.addButtonToPermissions("Boardroid",ve(this,Le)),null!==t&&(this._serial_filters=t),null!==n&&(this._serial_config_port={baudRate:n.baudRate?n.baudRate:115200,dataBits:n.dataBits?n.dataBits:8,stopBits:n.stopBits?n.stopBits:1,parity:n.parity?n.parity:"none",bufferSize:n.bufferSize?n.bufferSize:32768,flowControl:n.flowControl?n.flowControl:"none"}),!0===i&&fe(this,Xe,i),_e(this,it,Lt).call(this)}var t,n,i,r,o;return t=e,n=[{key:"softReload",value:function(){fe(this,Ne,ve(this,Ze)._interval_reconnection),fe(this,Fe,ve(this,Ze)._waiting_for_sense),this._price=ve(this,Ze)._price,this._change=ve(this,Ze)._change,fe(this,je,ve(this,Ze)._timer_until_response),fe(this,Qe,ve(this,Ze)._status_dispense),fe(this,Oe,ve(this,Ze)._amount_inserted),fe(this,We,ve(this,Ze)._amount_retired),fe(this,Be,ve(this,Ze)._aux_iteration),this._time_response_general=ve(this,Ze)._time_response_general,this._time_to_reconnect=ve(this,Ze)._time_to_reconnect,this._arr_log_temperature=ve(this,Ze)._arr_log_temperature,this._last_error=ve(this,Ze)._last_error,fe(this,ze,ve(this,Ze)._arr_coins),fe(this,Ue,ve(this,Ze)._arr_bills),this._time_response_engines=ve(this,Ze)._time_response_engines,fe(this,tt,ve(this,Ze)._time_to_reload),fe(this,et,ve(this,Ze)._count_timeout_sense),this._log_time_door_open=[{name:"open",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()}],this._log_time_door_close=[{name:"close",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()}],this._counter_sense_door=1,fe(this,Ye,void 0),this._limit_sense_door=30,this.extSoftReload()}},{key:"disconnect",value:(o=ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ve(this,me)&&this.extAppMessage({description:"Disconnected",message:"disconnect",no_code:303}),e.next=3,_e(this,ot,jt).call(this);case 3:fe(this,me,!1),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me);case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"forgetSerial",value:function(){"serial"in navigator&&"forget"in SerialPort.prototype?_e(this,St,tn).call(this).then((function(){dd.log(__("Port forgotten"))})):dd.warn("Navigator don't support forget by now")}},{key:"initSerial",value:(r=ae(re().mark((function e(){return re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dd.isWebserialSupported(ve(this,qe))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_e(this,rt,At).call(this);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setBytesConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;fe(this,Le,e),fe(this,De,dd.setBoardroidConnectionConstant(e)),dd.addButtonToPermissions("Boardroid",ve(this,Le))}},{key:"connect",value:function(){for(var e=[],t=0;t<ve(this,De).length;t++)e.push(ve(this,De)[t].toLowerCase().replaceAll("0x",""));_e(this,bt,Jt).call(this,e,"connect")}},{key:"reconnect",value:function(){this.extReconnectionMessage()}},{key:"configCoinPurse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FF",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"FF",i=["F1","C1",e,t,n,"00","00","00","00","00","F2","00"];_e(this,bt,Jt).call(this,i,"01"===e.toString()?"Coin purse enabled":"Coin purse disabled")}},{key:"readCoinTubes",value:function(){_e(this,bt,Jt).call(this,["F1","C2","00","00","00","00","00","00","00","00","F2","00"],"read tubes")}},{key:"dispenseCoins",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"00",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"00",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"00",o=["F1","C6",e,t,n,i,r,"00","00","00","F2","00"];_e(this,bt,Jt).call(this,o,"coins dispensed")}},{key:"enableCoinPurse",value:function(){this.configCoinPurse("01")}},{key:"configBillPurse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00",n=["F1","C0",e,t,"00","00","00","00","00","00","F2","00"];_e(this,bt,Jt).call(this,n,"01"===e.toString()?"Bill purse enabled":"Bill purse disabled")}},{key:"dispenseBanknotes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"00",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"00",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"00",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"00",a=["F1","C5",e,t,n,i,r,o,"00","00","F2","00"];_e(this,bt,Jt).call(this,a,"bank note dispensed")}},{key:"dispenseBanknotesICT",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"01",t=dd.decToHex(this._ict_bill.toString()),n=["F1","C5",t,e,"00","00","00","00","00","00","F2","00"];_e(this,bt,Jt).call(this,n,"bank note dispensed")}},{key:"dispense",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"00",i=["F1","C7",e,t,n,"00","00","00","00","00","F2","00"];_e(this,bt,Jt).call(this,i,"dispense")}},{key:"coolingRelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00",t=["F1","CC",e,"00","00","00","00","00","00","00","F2","00"];_e(this,bt,Jt).call(this,t,"01"===e.toString()?"Relay on":"Relay off")}},{key:"disableNayax",value:function(){_e(this,bt,Jt).call(this,["F1","CD","00","00","00","00","00","00","00","00","F2","00"],"Nayax disabled")}},{key:"disableCoinPurse",value:function(){this.configCoinPurse()}},{key:"enableBillPurse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00";this._ict?this.configBillPurse("FF","FF"):this.configBillPurse("01",e)}},{key:"disableBillPurse",value:function(){this.configBillPurse()}},{key:"disablePaymentPurses",value:function(){var e=this;setTimeout((function(){e.disableCoinPurse(),setTimeout((function(){e.disableBillPurse()}),1e3)}),200)}},{key:"executeTestEnginesMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;fe(t,Ke,100*(ve(t,Be)-10)/79),this.default_alert?ve(t,Ke)>=0&&ve(t,Ke)<100?"function"==typeof Swal.fire&&(Swal.isVisible()||Swal.fire({title:"¡En proceso!",html:"¡Espera se está realizando una prueba de matriz!. Este mensaje se cerrará cuando termine.<br/><b></b>",icon:"warning",showCancelButton:!1,showConfirmButton:!1,didOpen:function(){Swal.showLoading();var e=Swal.getHtmlContainer().querySelector("b");fe(t,$e,setInterval((function(){e.textContent=ve(t,Ke).format(0,3,",",".")+"%"}),100))},allowOutsideClick:!1})):ve(t,Ke)>=100&&"function"==typeof Swal.fire&&Swal.isVisible()&&(clearInterval(ve(this,$e)),fe(this,$e,0),Swal.close()):t.extPercentageTestMatrix(ve(t,Ke)),90!==ve(t,Be)?setTimeout((function(){var n,i=dd.decToHex((ve(t,Be)-1).toString()),r="00";!0===e&&(r=dd.decToHex(ve(t,Be).toString())),setTimeout((function(){t.dispense(i,r,"04")}),500),ve(t,Be)<90&&t.executeTestEnginesMatrix(e),fe(t,Be,(n=ve(t,Be),++n))}),1e3):fe(t,Be,10)}},{key:"countMoney",value:function(e,t){var n=!1;switch(e.toUpperCase()){case"G50":"tube"===t?ve(this,ze).tubes.G50+=1:ve(this,ze).box.G50+=1,ve(this,ze).G50+=1,fe(this,Oe,ve(this,Oe)+.5),ve(this,ze).total+=.5;break;case"C50":"tube"===t?ve(this,ze).tubes.C50+=1:ve(this,ze).box.C50+=1,ve(this,ze).C50+=1,fe(this,Oe,ve(this,Oe)+.5),ve(this,ze).total+=.5;break;case"P1":"tube"===t?ve(this,ze).tubes.P1+=1:ve(this,ze).box.P1+=1,ve(this,ze).P1+=1,fe(this,Oe,ve(this,Oe)+1),ve(this,ze).total+=1;break;case"P2":"tube"===t?ve(this,ze).tubes.P2+=1:ve(this,ze).box.P2+=1,ve(this,ze).P2+=1,fe(this,Oe,ve(this,Oe)+2),ve(this,ze).total+=2;break;case"P5":"tube"===t?ve(this,ze).tubes.P5+=1:ve(this,ze).box.P5+=1,ve(this,ze).P5+=1,fe(this,Oe,ve(this,Oe)+5),ve(this,ze).total+=5;break;case"P10":"tube"===t?ve(this,ze).tubes.P10+=1:ve(this,ze).box.P10+=1,ve(this,ze).P10+=1,fe(this,Oe,ve(this,Oe)+10),ve(this,ze).total+=10;break;case"P20":"stacker"===t?ve(this,Ue).stacker.P20+=1:ve(this,Ue).recycler.P20+=1,ve(this,Ue).P20+=1,fe(this,Oe,ve(this,Oe)+20),ve(this,Ue).total+=20;break;case"P50":"stacker"===t?ve(this,Ue).stacker.P50+=1:ve(this,Ue).recycler.P50+=1,ve(this,Ue).P50+=1,fe(this,Oe,ve(this,Oe)+50),ve(this,Ue).total+=50;break;case"P100":"stacker"===t?ve(this,Ue).stacker.P100+=1:ve(this,Ue).recycler.P100+=1,ve(this,Ue).P100+=1,fe(this,Oe,ve(this,Oe)+100),ve(this,Ue).total+=100;break;case"P200":"stacker"===t?ve(this,Ue).stacker.P200+=1:ve(this,Ue).recycler.P200+=1,ve(this,Ue).P200+=1,fe(this,Oe,ve(this,Oe)+200),ve(this,Ue).total+=200;break;case"P500":"stacker"===t?ve(this,Ue).stacker.P500+=1:ve(this,Ue).recycler.P500+=1,ve(this,Ue).P500+=1,fe(this,Oe,ve(this,Oe)+500),ve(this,Ue).total+=500;break;case"P1000":"stacker"===t?ve(this,Ue).stacker.P1000+=1:ve(this,Ue).recycler.P1000+=1,ve(this,Ue).P1000+=1,fe(this,Oe,ve(this,Oe)+1e3),ve(this,Ue).total+=1e3;break;case"R50":dd.log(dd.__("Dispensing bill")),"recyclerOut"===t&&(ve(this,Ue).recyclerOut.P50+=1),ve(this,Ue).P50-=1,fe(this,We,ve(this,We)+50),ve(this,Ue).total-=50;break;default:n=!0}switch(e.toUpperCase()){case"R20":case"R50":case"R100":this.extRetireBill();break;default:n?this.extCancelProcessByLever():this.extMoneySession()}}},{key:"resetBillsOut",value:function(){ve(this,Ue).recyclerOut=ve(this,Ze)._arr_bills.recyclerOut}},{key:"customCode",value:function(e){_e(this,bt,Jt).call(this,e,"custom code")}},{key:"acceptBanknote",value:function(){_e(this,bt,Jt).call(this,["F1","C4","01","00","00","00","00","00","00","00","F2","00"],"Bank note accepted")}},{key:"rejectBanknote",value:function(){_e(this,bt,Jt).call(this,["F1","C4","00","00","00","00","00","00","00","00","F2","00"],"Bank note rejected")}},{key:"readTemperature",value:function(){_e(this,bt,Jt).call(this,["F1","CB","00","00","00","00","00","00","00","00","F2","00"],"temperature status")}},{key:"saveMemoryBillPurse",value:function(e,t,n,i,r,o,a){var s=["F1","C8",e,"00",t,n,i,r,o,a,"F2","00"];_e(this,bt,Jt).call(this,s,"Save memory bill purse")}},{key:"dispenseSensor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00";this.dispense(e,t,"00")}},{key:"dispenseTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1E";"00"===dd.hexMaker(n.toString(),2)&&(n="1E"),this.dispense(e,t,n)}},{key:"enableCoolingRelay",value:function(){this.coolingRelay("01")}},{key:"disableCoolingRelay",value:function(){this.coolingRelay()}},{key:"nayaxCashless",value:function(e,t,n,i,r,o){if("00"!==dd.hexMaker(e.toString()))if(0===this._nayax_max_pre_credit)this.nayaxPreCreditFail("define");else{var a=parseInt(256*dd.decToHex(r)+dd.decToHex(o));if(!isNaN(a)&&this._nayax_max_pre_credit>=a){var s=["F1","CD",e,t,n,i,r,o,"00","00","F2","00"];_e(this,bt,Jt).call(this,s,"Nayax enabled")}else this.nayaxPreCreditFail("amount")}else this.disableNayax()}},{key:"calcNayaxPrice",value:function(e){e=parseInt(e);var t=Math.floor(e/256),n=dd.hexMaker(dd.decToHex((0).toString())).toUpperCase();return t>=1&&(n=dd.hexMaker(dd.decToHex(t.toString())).toUpperCase()),{high:n,low:dd.hexMaker(dd.decToHex((e-256*t).toString())).toUpperCase()}}},{key:"returnChange",value:function(){var e=this;this._last_change_coin_purse=0;var t=.5*ve(this,ze).tubes.G50+ve(this,ze).tubes.P1+2*ve(this,ze).tubes.P2+5*ve(this,ze).tubes.P5+10*ve(this,ze).tubes.P10,n=20*ve(this,Ue).recycler.P20+50*ve(this,Ue).recycler.P50;dd.log([this._change,"billetes disponibles",ve(this,Ue).recycler,"Monedas disponibles",ve(this,ze).tubes]);var i={coins:{c50:0,p1:0,p2:0,p5:0,p10:0},bills:{b20:0,b50:0,b100:0,b200:0,b500:0,b1000:0,total_to_dispense:0}},r=this._change,o=!1;if(this._change>0)for(var a=!1,s=0;s<80&&0!==r;s++)if(r-1e3>=0&&ve(this,Ue).recycler.P1000>i.bills.b1000?(i.bills.b1000++,i.bills.total_to_dispense+=1e3,r-=1e3):r-500>=0&&ve(this,Ue).recycler.P500>i.bills.b500?(i.bills.b500++,i.bills.total_to_dispense+=500,r-=500):r-200>=0&&ve(this,Ue).recycler.P200>i.bills.b200?(i.bills.b200++,i.bills.total_to_dispense+=200,r-=200):r-100>=0&&ve(this,Ue).recycler.P100>i.bills.b100?(i.bills.b100++,i.bills.total_to_dispense+=100,r-=100):r-50>=0&&ve(this,Ue).recycler.P50>i.bills.b50?(i.bills.b50++,i.bills.total_to_dispense+=50,r-=50):r-20>=0&&ve(this,Ue).recycler.P20>i.bills.b20?(i.bills.b20++,i.bills.total_to_dispense+=20,r-=20):r-10>=0&&ve(this,ze).tubes.P10>i.coins.p10?(i.coins.p10++,r-=10):r-5>=0&&ve(this,ze).tubes.P5>i.coins.p5?(i.coins.p5++,r-=5):r-2>=0&&ve(this,ze).tubes.P2>i.coins.p2?(i.coins.p2++,r-=2):r-1>=0&&ve(this,ze).tubes.P1>i.coins.p1?(i.coins.p1++,r-=1):r-.5>=0&&ve(this,ze).tubes.G50>i.coins.c50&&(i.coins.c50++,r-=.5),79===s&&r>0){if(s=0,a){o=!0;break}a=!0}var c=JSON.stringify({coins:{c50:i.coins.c50,p1:i.coins.p1,p2:i.coins.p2,p5:i.coins.p5,p10:i.coins.p10},bills:{p20:i.bills.b20,p50:i.bills.b50,p100:i.bills.b100,p200:i.bills.b200,p500:i.bills.b500,p1000:i.bills.b1000},change:this._change}),l=!0;this._change_returned_verified=this._change,this._change>t+n?(l=!1,this._change_returned_verified=t+n,dd.warn(dd.__("The change is more than can deliver")),this.extRetireBill(!0)):o&&(l=!1,dd.warn(dd.__("The change is more than can deliver, showing alert in display")),this._no_dispense_all_money=!0,this.extRetireBill(!0));var d=JSON.parse(c);if(d.change>0){var u=!1;Object.keys(d.bills).forEach((function(e){!u&&d.bills[e]>0&&(u=!0)}));var h=!1;if(Object.keys(d.coins).forEach((function(e){!h&&d.coins[e]>0&&(h=!0)})),dd.log([d,{bills:u},{coins:h}]),l||u||(this._no_dispense_all_money=!0),u)if(!0===this._ict){var p=0;0===this._ict_bill?p=i.bills.b20:1===this._ict_bill?p=i.bills.b50:2===this._ict_bill?p=i.bills.b100:3===this._ict_bill?p=i.bills.b200:4===this._ict_bill?p=i.bills.b500:5===this._ict_bill&&(p=i.bills.b1000),this.dispenseBanknotesICT(dd.decToHex(p.toString()))}else{var _={b20:d.bills.p20.toString(16),b50:d.bills.p50.toString(16),b100:d.bills.p100.toString(16),b200:d.bills.p200.toString(16),b500:d.bills.p500.toString(16),b1000:d.bills.p1000.toString(16)};this.dispenseBanknotes(_.b20,_.b50,_.b100,_.b200,_.b500,_.b1000)}if(h){ve(this,ze).tubes.G50>=d.coins.c50?this._last_change_coin_purse+=.5*d.coins.c50:this._last_change_coin_purse+=.5*ve(this,ze).tubes.G50,ve(this,ze).tubes.P1>=d.coins.p1?this._last_change_coin_purse+=1*d.coins.p1:this._last_change_coin_purse+=ve(this,ze).tubes.P1,ve(this,ze).tubes.P2>=d.coins.p2?this._last_change_coin_purse+=2*d.coins.p2:this._last_change_coin_purse+=2*ve(this,ze).tubes.P2,ve(this,ze).tubes.P5>=d.coins.p5?this._last_change_coin_purse+=5*d.coins.p5:this._last_change_coin_purse+=5*ve(this,ze).tubes.P5,ve(this,ze).tubes.P10>=d.coins.p10?this._last_change_coin_purse+=10*d.coins.p10:this._last_change_coin_purse+=10*ve(this,ze).tubes.P10;var f={c50:d.coins.c50.toString(16),p1:d.coins.p1.toString(16),p2:d.coins.p2.toString(16),p5:d.coins.p5.toString(16),p10:d.coins.p10.toString(16)};setTimeout((function(){e.dispenseCoins(f.c50,f.p1,f.p2,f.p5,f.p10)}),1500)}}}},{key:"returnChangeCoinPurse",value:function(){var e={coins:{c50:0,p1:0,p2:0,p5:0,p10:0}},t=this._change;if(this._change>0)for(var n=!1,i=0;i<80&&0!==t;i++)if(t-10>=0&&ve(this,ze).tubes.P10>e.coins.p10?(e.coins.p10++,t-=10):t-5>=0&&ve(this,ze).tubes.P5>e.coins.p5?(e.coins.p5++,t-=5):t-2>=0&&ve(this,ze).tubes.P2>e.coins.p2?(e.coins.p2++,t-=2):t-1>=0&&ve(this,ze).tubes.P1>e.coins.p1?(e.coins.p1++,t-=1):t-.5>=0&&ve(this,ze).tubes.G50>e.coins.c50&&(e.coins.c50++,t-=.5),79===i&&t>0){if(i=0,n)break;n=!0}var r=JSON.stringify({coins:{c50:e.coins.c50,p1:e.coins.p1,p2:e.coins.p2,p5:e.coins.p5,p10:e.coins.p10},change:this._change}),o=JSON.parse(r);if(o.change>0){var a=!1;if(Object.keys(o.coins).forEach((function(e){!a&&o.coins[e]>0&&(a=!0)})),dd.log(o),a){var s={c50:o.coins.c50.toString(16),p1:o.coins.p1.toString(16),p2:o.coins.p2.toString(16),p5:o.coins.p5.toString(16),p10:o.coins.p10.toString(16)};this.dispenseCoins(s.c50,s.p1,s.p2,s.p5,s.p10)}}}},{key:"returnChangeBillPurse",value:function(){var e={bills:{b20:0,b50:0,b100:0,b200:0,b500:0,b1000:0}},t=this._change;if(this._change>0)for(var n=!1,i=0;i<80&&0!==t;i++)if(t-1e3>=0&&ve(this,Ue).recycler.P1000>e.bills.b1000?(e.bills.b1000++,e.bills.total_to_dispense+=1e3,t-=1e3):t-500>=0&&ve(this,Ue).recycler.P500>e.bills.b500?(e.bills.b500++,e.bills.total_to_dispense+=500,t-=500):t-200>=0&&ve(this,Ue).recycler.P200>e.bills.b200?(e.bills.b200++,e.bills.total_to_dispense+=200,t-=200):t-100>=0&&ve(this,Ue).recycler.P100>e.bills.b100?(e.bills.b100++,e.bills.total_to_dispense+=100,t-=100):t-50>=0&&ve(this,Ue).recycler.P50>e.bills.b50?(e.bills.b50++,e.bills.total_to_dispense+=50,t-=50):t-20>=0&&ve(this,Ue).recycler.P20>e.bills.b20&&(e.bills.b20++,e.bills.total_to_dispense+=20,t-=20),79===i&&t>0){if(i=0,n)break;n=!0}var r=JSON.stringify({bills:{p20:e.bills.b20,p50:e.bills.b50,p100:e.bills.b100,p200:e.bills.b200,p500:e.bills.b500,p1000:e.bills.b1000},change:this._change}),o=JSON.parse(r);if(o.change>0){var a=!1,s=0;if(Object.keys(o.bills).forEach((function(e){!a&&o.bills[e]>0&&("p20"===e?s+=20*o.bills[e]:"p50"===e?s+=50*o.bills[e]:"p100"===e?s+=100*o.bills[e]:"p200"===e?s+=200*o.bills[e]:"p500"===e?s+=500*o.bills[e]:"p1000"===e&&(s+=1e3*o.bills[e]),a=!0)})),!0===this._ict){var c=0;0===this._ict_bill?c=s/20:1===this._ict_bill?c=s/50:2===this._ict_bill?c=s/100:3===this._ict_bill?c=s/200:4===this._ict_bill?c=s/500:5===this._ict_bill&&(c=s/1e3),this.dispenseBanknotesICT(dd.decToHex(c.toString())),dd._control||this._ict_bill}else this.dispenseBanknotes(o.bills.p20.toString(16),o.bills.p50.toString(16),o.bills.p100.toString(16),o.bills.p200.toString(16),o.bills.p500.toString(16),o.bills.p1000.toString(16))}}},{key:"calcChange",value:function(){if(void 0===this._price)return{error:dd.__("The price it is not defined, can not make a calc with a undefined value")};if(ve(this,Oe)===this._price)this._change=0;else{if(!(ve(this,Oe)>this._price))return{error:dd.__("The amount to be collected has not been covered")};this._change=ve(this,Oe)-this._price}return{change:this._change,error:0}}},{key:"getBackInsertedMoney",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BOTH";if(!(this.__amount_inserted<=0)){var t=this._change;this._change=this.__amount_inserted,"BOTH"===e?this.returnChange():"COINS"===e?this.returnChangeCoinPurse():"BILLS"===e?this.returnChangeBillPurse():this._change=t}}},{key:"clearErrors",value:function(){this._last_error=ve(this,Ze)._last_error}},{key:"clearSenseProduct",value:function(){clearInterval(ve(this,Fe)),fe(this,Fe,void 0),fe(this,Qe,void 0),fe(this,et,0)}},{key:"reloadPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];void 0===this._reload_when_finished?dd.error(dd.__("You must declare a boolean value for '_reload_when_finished'")):this._reload_when_finished&&(!0===e?location.reload():this.softReload())}},{key:"percentageTubes",value:function(){dd.warn("Deprecated, is not useful if has more than 1 tube of same denomination");var e={p10:(ve(this,ze).tubes.P10/58*100).format(0,3,",","."),p5:(ve(this,ze).tubes.P5/69*100).format(0,3,",","."),p2:(ve(this,ze).tubes.P2/78*100).format(0,3,",","."),p1:(ve(this,ze).tubes.P1/90*100).format(0,3,",","."),c50:(ve(this,ze).tubes.G50/78*100).format(0,3,",",".")};this.extPercentageTubes(e)}},{key:"amountTubes",value:function(){this.extAmountTubes(ve(this,ze).tubes)}},{key:"extUpdateTubes",value:function(){this.amountTubes()}},{key:"extCoinInserted",value:function(e){}},{key:"startSenseDoor",value:function(){var e=this;this._log_time_door_open=[{name:"open",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()+3e4}],this._log_time_door_close=[{name:"close",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()+3e4}],fe(this,Ye,setInterval((function(){e.extBikeMessageElapsedTimeSenseDoor(),e._counter_sense_door++,e._counter_sense_door>e._limit_sense_door&&(clearInterval(ve(e,Ye)),fe(e,Ye,void 0),e._counter_sense_door=0,e.extBikeCalc())}),1e3))}},{key:"nayaxPreCreditFail",value:function(e){"amount"===e?dd.warn(dd.__("The amount overflow pre-credit max for nayax")):dd.error(dd.__("Define a pre-credit max for nayax"))}},{key:"waitingForSense",value:function(e,t){var n=this;this.__sense_selection=e,this.__sense_id_movement=t,fe(this,Fe,setInterval((function(){var e;void 0===ve(n,Qe)?(dd.log("dispensando... #timeout:",ve(n,et)+"/15"),ve(n,et)>=15?(fe(n,et,0),fe(n,Qe,!1)):fe(n,et,(e=ve(n,et),++e)),n.extWaitingForSense("undefined")):ve(n,Qe)?(dd.log("dispensing: "+ve(n,Qe)),n.clearSenseProduct(),n.extWaitingForSense("dispensed")):ve(n,Qe)||(n.clearSenseProduct(),n.extWaitingForSense("not-dispensed"))}),ve(this,nt)))}},{key:"waitingForSenseTest",value:function(e,t){var n=this;this.__sense_selection=e,this.__sense_id_movement=t,fe(this,Fe,setInterval((function(){var e;void 0===ve(n,Qe)?(dd.log("dispensando... #timeout:",ve(n,et)+"/15"),ve(n,et)>=15?(fe(n,et,0),fe(n,Qe,!1)):fe(n,et,(e=ve(n,et),++e)),n.extWaitingForSenseTest("undefined")):ve(n,Qe)?(dd.log("dispensing: "+ve(n,Qe)),n.clearSenseProduct(),n.extWaitingForSenseTest("dispensed")):ve(n,Qe)||(n.clearSenseProduct(),n.extWaitingForSenseTest("not-dispensed"))}),ve(this,nt)))}},{key:"hasToReturnChange",value:function(e){var t=.5*ve(this,ze).tubes.G50+ve(this,ze).tubes.P1+2*ve(this,ze).tubes.P2+5*ve(this,ze).tubes.P5+10*ve(this,ze).tubes.P10,n=20*ve(this,Ue).recycler.P20+50*ve(this,Ue).recycler.P50,i={coins:{c50:0,p1:0,p2:0,p5:0,p10:0},bills:{b20:0,b50:0,b100:0,b200:0,b500:0,b1000:0,total_to_dispense:0}},r=e,o=!1;if(e>0)for(var a=!1,s=0;s<80&&0!==r;s++)if(r-1e3>=0&&ve(this,Ue).recycler.P1000>i.bills.b1000?(i.bills.b1000++,i.bills.total_to_dispense+=1e3,r-=1e3):r-500>=0&&ve(this,Ue).recycler.P500>i.bills.b500?(i.bills.b500++,i.bills.total_to_dispense+=500,r-=500):r-200>=0&&ve(this,Ue).recycler.P200>i.bills.b200?(i.bills.b200++,i.bills.total_to_dispense+=200,r-=200):r-100>=0&&ve(this,Ue).recycler.P100>i.bills.b100?(i.bills.b100++,i.bills.total_to_dispense+=100,r-=100):r-50>=0&&ve(this,Ue).recycler.P50>i.bills.b50?(i.bills.b50++,i.bills.total_to_dispense+=50,r-=50):r-20>=0&&ve(this,Ue).recycler.P20>i.bills.b20?(i.bills.b20++,i.bills.total_to_dispense+=20,r-=20):r-10>=0&&ve(this,ze).tubes.P10>i.coins.p10?(i.coins.p10++,r-=10):r-5>=0&&ve(this,ze).tubes.P5>i.coins.p5?(i.coins.p5++,r-=5):r-2>=0&&ve(this,ze).tubes.P2>i.coins.p2?(i.coins.p2++,r-=2):r-1>=0&&ve(this,ze).tubes.P1>i.coins.p1?(i.coins.p1++,r-=1):r-.5>=0&&ve(this,ze).tubes.G50>i.coins.c50&&(i.coins.c50++,r-=.5),79===s&&r>0){if(s=0,a){o=!0;break}a=!0}return!(e>t+n||o)}},{key:"readBillPurse",value:function(){_e(this,bt,Jt).call(this,["F1","C3","00","00","00","00","00","00","00","00","F2","B5"],"read bill")}},{key:"readTubes",value:function(){_e(this,bt,Jt).call(this,["F1","C2","00","00","00","00","00","00","00","00","F2","00"],"read tubes")}},{key:"sendText",value:function(e){ve(this,Xe)&&_e(this,_t,Ut).call(this,e)}},{key:"arrCoins",get:function(){return ve(this,ze)}},{key:"arrBills",get:function(){return ve(this,Ue)}},{key:"__isConnected",get:function(){return ve(this,me)},set:function(e){fe(this,me,e),window["owl_br"+ve(this,Le)+"_connected"]=ve(this,me)}},{key:"__originalValues",get:function(){return ve(this,Ze)}},{key:"__serialPort",get:function(){return ve(this,we)}},{key:"__amount_retired",get:function(){return ve(this,We)}},{key:"__amount_inserted",get:function(){return ve(this,Oe)}},{key:"toString",value:function(){var e=this;return JSON.stringify({__class:"Boardroid",__number_device:ve(e,Le),__connected:ve(e,me),__connection:ve(e,De)})}},{key:"extSerialMessage",value:function(e){dd.log(e)}},{key:"extAppMessage",value:function(e){dd.log(e)}},{key:"extReconnectionMessage",value:function(){dd.log(dd.__("Trying reconnect"))}},{key:"extTimeoutMessage",value:function(e,t){dd.warn("Timeout",e,t)}},{key:"extPercentageTubes",value:function(e){dd.log(e)}},{key:"extAmountTubes",value:function(e){dd.log(e)}},{key:"extMoneySession",value:function(){dd.log("Make your own function with this same name","Example: br1.extMoneySession = function(){console.log('Customize me')}")}},{key:"extConnectionLost",value:function(){dd.log("Make your own function with this same name","Example: br1.extConnectionLost = function(){console.log('Customize me')}")}},{key:"extSoftReload",value:function(){dd.log("Make your own function with this same name","Example: br1.extSoftReload = function(){console.log('Customize me')}")}},{key:"extSentData",value:function(e){dd.log(e)}},{key:"extUnexpectedDisconnection",value:function(e){dd.warn(dd.__("There was an unexpected disconnection. an attempt was made to disconnect the port but it was already disconnected"),e)}},{key:"extBikeMessageElapsedTimeSenseDoor",value:function(){document.querySelector("body").innerText=this._counter_sense_door+" Segundos han transcurrido"}},{key:"extBikeCalc",value:function(){this._log_time_door_open[0].listen_since;this._log_time_door_open.forEach((function(e){e.listen_since||(e.time,e.time)})),dd.log(this._log_time_door_open)}},{key:"extDividedCodeMessage",value:function(e,t){dd.log(e,t)}},{key:"extDefaultLoad",value:function(){this.disablePaymentPurses()}},{key:"extWithDevice",value:function(){dd.log(dd.__("Device connected"))}},{key:"extWithoutDevice",value:function(){dd.log(dd.__("Without device"))}},{key:"extLogDoorStatus",value:function(e){dd.warn(e)}},{key:"extRetireBill",value:function(){dd.log("Make your own function with this same name","Example: br1.extRetireBill = function(){console.log('Customize me')}")}},{key:"extWaitingForSense",value:function(e){var t=this;switch(e){case"dispensed":dd.log('Result of dispense: "dispensed"'),setTimeout((function(){t.softReload()}),ve(this,tt));break;case"not-dispensed":dd.log('not-Result of dispense: "dispensed"'),setTimeout((function(){t.softReload()}),ve(this,tt))}}},{key:"extWaitingForSenseTest",value:function(e){var t=this;switch(e){case"dispensed":dd.log('Result of test dispense: "dispensed"'),setTimeout((function(){t.softReload()}),ve(this,tt));break;case"not-dispensed":dd.log('not-Result of test dispense: "not dispensed"'),setTimeout((function(){t.softReload()}),ve(this,tt))}}},{key:"extEmulate",value:function(e){_e(this,Dt,rn).call(this,e)}},{key:"extCancelProcessByLever",value:function(){dd.log(__("Lever pressed"))}},{key:"extPercentageTestMatrix",value:function(e){dd.log(dd.__("Percentage of test matrix")+": "+e.format(0,3,",",".")+"%")}},{key:"extTemperature",value:function(e){dd.log(dd.__("Custom this temperature result function"))}}],n&&ce(t.prototype,n),i&&ce(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function sn(){sn=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new M(r||[]);return i(a,"_invoke",{value:y(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function h(){}function p(){}function _(){}var f={};c(f,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&n.call(g,o)&&(f=g);var m=_.prototype=h.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==an(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function y(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return E()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=_,i(m,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:p,configurable:!0}),p.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new b(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(m),c(m,s,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function cn(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function ln(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){cn(o,i,r,a,s,"next",e)}function s(e){cn(o,i,r,a,s,"throw",e)}a(void 0)}))}}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function un(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_n(i.key),i)}}function hn(e,t){vn(e,t),t.add(e)}function pn(e,t,n){return(t=_n(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _n(e){var t=function(e,t){if("object"!==an(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==an(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===an(t)?t:String(t)}function fn(e,t,n){vn(e,t),t.set(e,n)}function vn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function mn(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,bn(e,t,"set"),n),n}function wn(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,bn(e,t,"get"))}function bn(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var yn=new WeakMap,kn=new WeakMap,xn=new WeakMap,Cn=new WeakMap,Mn=new WeakMap,Tn=new WeakMap,En=new WeakMap,Sn=new WeakMap,Dn=new WeakMap,Ln=new WeakMap,An=new WeakMap,Pn=new WeakMap,jn=new WeakMap,In=new WeakMap,Nn=new WeakMap,Bn=new WeakMap,On=new WeakMap,Wn=new WeakMap,Fn=new WeakMap,Rn=new WeakMap,zn=new WeakMap,Un=new WeakMap,qn=new WeakMap,Yn=new WeakMap,Gn=new WeakMap,Hn=new WeakMap,Qn=new WeakMap,Jn=new WeakMap,Vn=new WeakMap,Zn=new WeakMap,Xn=new WeakMap,$n=new WeakMap,Kn=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,ii=new WeakMap,ri=new WeakMap,oi=new WeakMap,ai=new WeakMap,si=new WeakMap,ci=new WeakMap,li=new WeakMap,di=new WeakMap,ui=new WeakMap,hi=new WeakMap,pi=new WeakMap,_i=new WeakMap,fi=new WeakMap,vi=new WeakMap,gi=new WeakSet,mi=new WeakSet,wi=new WeakSet,bi=new WeakSet,yi=new WeakSet,ki=new WeakSet,xi=new WeakSet,Ci=new WeakSet,Mi=new WeakSet,Ti=new WeakSet,Ei=new WeakSet,Si=new WeakSet,Di=new WeakSet,Li=new WeakSet,Ai=new WeakSet,Pi=new WeakSet,ji=new WeakSet,Ii=new WeakSet,Ni=new WeakSet,Bi=new WeakSet,Oi=new WeakSet,Wi=new WeakSet,Fi=new WeakSet,Ri=new WeakSet,zi=new WeakSet,Ui=new WeakSet,qi=new WeakSet,Yi=new WeakSet,Gi=new WeakSet,Hi=new WeakSet;function Qi(){Object.freeze(wn(this,li))}function Ji(){return Vi.apply(this,arguments)}function Vi(){return(Vi=ln(sn().mark((function e(){var t,n,i,r,o;return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this._serial_filters,e.next=4,navigator.serial.getPorts({filters:t});case 4:if(!((n=e.sent).length>0)){e.next=46;break}if(e.prev=6,!(wn(this,Pn)<n.length)){e.next=21;break}if(i=wn(this,Pn),r=n[i].getInfo(),!(t.length>0)){e.next=18;break}if(r.usbProductId!==t[0].usbProductId||r.usbVendorId!==t[0].usbVendorId){e.next=15;break}mn(this,kn,n[i]),e.next=16;break;case 15:throw new Error("The port is already open.");case 16:e.next=19;break;case 18:mn(this,kn,n[i]);case 19:e.next=36;break;case 21:return mn(this,Pn,0),e.prev=22,e.t0=mn,e.t1=this,e.t2=kn,e.next=28,navigator.serial.requestPort({filters:t});case 28:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.next=36;break;case 32:return e.prev=32,e.t4=e.catch(22),gn(this,xi,nr).call(this,e.t4),e.abrupt("return");case 36:if(wn(this,kn)){e.next=38;break}throw new Error("Select another port please");case 38:e.next=44;break;case 40:return e.prev=40,e.t5=e.catch(6),gn(this,xi,nr).call(this,e.t5),e.abrupt("return");case 44:e.next=60;break;case 46:return e.prev=46,e.t6=mn,e.t7=this,e.t8=kn,e.next=52,navigator.serial.requestPort({filters:t});case 52:e.t9=e.sent,(0,e.t6)(e.t7,e.t8,e.t9),e.next=60;break;case 56:return e.prev=56,e.t10=e.catch(46),gn(this,xi,nr).call(this,e.t10),e.abrupt("return");case 60:e.next=65;break;case 62:e.prev=62,e.t11=e.catch(0),gn(this,xi,nr).call(this,e.t11);case 65:return e.prev=65,gn(this,Ci,ir).call(this,!0),e.next=69,wn(this,kn).open(this._serial_config_port);case 69:return wn(o=this,kn).ondisconnect=function(e){gn(o,Oi,fr).call(o,e)},wn(o,kn).onconnect=function(e){gn(o,Oi,fr).call(o,e)},o.extSentData({message:"Jofemar  "+dd.__("Opening with"),hex:wn(this,Ln)}),mn(o,In,[]),mn(o,Nn,[]),mn(o,zn,setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(o,ki,er).call(o,wn(o,Ln),"connect_start");case 2:case"end":return e.stop()}}),e)}))),wn(o,Un))),gn(o,Ti,or).call(o,wn(o,Ln)),e.next=79,gn(o,yi,$i).call(o);case 79:e.next=84;break;case 81:e.prev=81,e.t12=e.catch(65),gn(this,xi,nr).call(this,e.t12);case 84:return e.abrupt("return",0);case 85:case"end":return e.stop()}}),e,this,[[0,62],[6,40],[22,32],[46,56],[65,81]])})))).apply(this,arguments)}function Zi(){return Xi.apply(this,arguments)}function Xi(){return(Xi=ln(sn().mark((function e(){var t,n=this;return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!wn(this,xn)){e.next=8;break}return(t=wn(this,xn).cancel())&&t.then((function(e){e&&dd.log(e)})).catch((function(e){gn(n,xi,nr).call(n,e)})),e.next=6,wn(this,Cn);case 6:mn(this,xn,null),mn(this,Cn,null);case 8:if(!wn(this,Tn)){e.next=17;break}return e.next=11,wn(this,Tn).getWriter().close();case 11:return e.next=13,wn(this,Tn).getWriter().close();case 13:return e.next=15,wn(this,Mn);case 15:mn(this,Tn,null),mn(this,Mn,null);case 17:mn(this,kn,null),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),gn(this,xi,nr).call(this,e.t0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})))).apply(this,arguments)}function $i(){return Ki.apply(this,arguments)}function Ki(){return(Ki=ln(sn().mark((function e(){var t,n,i;return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this;case 1:if(!wn(t,kn).readable||!wn(t,En)){e.next=29;break}mn(t,xn,wn(t,kn).readable.getReader()),e.prev=3;case 4:return e.next=7,wn(t,xn).read();case 7:if(n=e.sent,i=n.value,!n.done){e.next=14;break}return wn(t,xn).releaseLock(),mn(t,En,!1),e.abrupt("break",19);case 14:gn(this,Mi,rr).call(this,i),void 0!==wn(t,Dn)&&(clearTimeout(wn(t,Dn)),mn(t,Dn,void 0)),mn(t,Dn,setTimeout((function(){var e=[];for(var n in wn(t,Sn))e.push(wn(t,Sn)[n].toString(16));wn(t,Sn)&&gn(t,Ei,ar).call(t,e),mn(t,Sn,new Uint8Array(0))}),300)),e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),gn(this,xi,nr).call(this,e.t0);case 24:return e.prev=24,wn(this,xn).releaseLock(),e.finish(24);case 27:e.next=1;break;case 29:return mn(this,En,!0),e.next=32,wn(this,kn).close();case 32:case"end":return e.stop()}}),e,this,[[3,21,24,27]])})))).apply(this,arguments)}function er(e,t){return tr.apply(this,arguments)}function tr(){return(tr=ln(sn().mark((function e(t,n){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._last_error.message=dd.__("Operation response timed out."),this._last_error.handler=n,this._last_error.code=t,clearTimeout(wn(this,zn)),mn(this,zn,void 0),"connect"!==this._last_error.handler){e.next=10;break}gn(this,zi,mr).call(this),gn(this,Ii,pr).call(this),e.next=17;break;case 10:if("connect_start"!==this._last_error.handler){e.next=17;break}return gn(this,wi,Zi).call(this),mn(this,yn,!1),window["owl_jof"+wn(this,An)+"_connected"]=wn(this,yn),mn(this,Pn,wn(this,Pn)+1),e.next=17,gn(this,mi,Ji).call(this);case 17:this.extTimeoutMessage(t,n);case 18:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function nr(e){var t=this;if(null===document.getElementById(_id_vl_btn_open_modal_permissions))return dd.error(e),void dd.error("_id_vl_btn_open_modal_permissions doesn't exist in DOM");e.toString().includes("Failed to execute 'requestPort' on 'Serial': Must be handling a user gesture to show a permission request")?(document.getElementById(window["_id_jof"+wn(t,An)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("The port is already open.")?(dd.warn(dd.__("Failed to open serial port. Trying again.")),gn(t,Ri,gr).call(t),gn(t,wi,Zi).call(t),setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mn(t,Pn,wn(t,Pn)+1),e.next=3,gn(t,mi,Ji).call(t);case 3:case"end":return e.stop()}}),e)}))),500),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")?dd.warn(dd.__("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")):e.toString().includes("The port is closed.")?document.getElementById(_id_vl_btn_open_modal_permissions).click():e.toString().includes("Select another port please")||e.toString().includes("No port selected by the user")||e.toString().includes("Cannot read property 'writable' of null")?(document.getElementById(window["_id_jof"+wn(t,An)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Cannot read property 'writable' of undefined")?(document.getElementById(window["_id_jof"+wn(t,An)+"_btn_connect_serial"]).classList.remove("hidden"),gn(t,zi,mr).call(t),setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initSerial();case 2:case"end":return e.stop()}}),e)}))),100)):e.toString().includes("The device has been lost")?(document.getElementById(window["_id_jof"+wn(t,An)+"_btn_connect_serial"]).classList.remove("hidden"),gn(t,zi,mr).call(t)):e.toString().includes("Failed to open serial port")?(dd.warn(dd.__("Failed to open serial port. Trying again.")),gn(t,zi,mr).call(t),gn(t,wi,Zi).call(t),setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(t,mi,Ji).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Cannot read properties of undefined (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),gn(t,zi,mr).call(t),gn(t,wi,Zi).call(t),setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(t,mi,Ji).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Cannot read properties of null (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),gn(t,zi,mr).call(t),gn(t,wi,Zi).call(t),setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(t,mi,Ji).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("navigator.serial is undefined")?document.getElementById(wn(t,$n)).classList.remove("hidden"):e.toString().includes("This readable stream reader has been released and cannot be used to cancel its previous owner stream")?(document.getElementById(window["_id_jof"+wn(t,An)+"_btn_connect_serial"]).classList.remove("hidden"),gn(t,zi,mr).call(t),dd.checkDevicesConnected(),t.extUnexpectedDisconnection(e)):dd.error(e)}function ir(e){mn(this,yn,e),window["owl_jof"+wn(this,An)+"_connected"]=wn(this,yn),dd.setDeviceStatus("jofemar",wn(this,An),e);var t=dd.__("Connect");if(e?t=dd.__("Disconnect"):(this.__connected_devices-=1,dd.checkDevicesConnected()),null!==this._serial_btn_connect_serial)for(var n=0;n<this._serial_btn_connect_serial.length;n++)this._serial_btn_connect_serial[n].textContent=t}function rr(e){if(void 0!==e){var t=new Uint8Array(wn(this,Sn).length+e.byteLength);t.set(wn(this,Sn),0),t.set(new Uint8Array(e),wn(this,Sn).length),mn(this,Sn,t)}}function or(e){try{var t=new Uint8Array(e),n=wn(this,kn).writable.getWriter();n.write(t).then((function(e){e&&dd.log(e)})),n.releaseLock()}catch(e){gn(this,xi,nr).call(this,e)}}function ar(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0===e)gn(this,Pi,ur).call(this,t);else if(e&&e.length>0){var n=!1;wn(this,yn)||(n=!0),mn(this,yn,!0),window["owl_jof"+wn(this,An)+"_connected"]=wn(this,yn),void 0!==wn(this,Gn)&&(clearInterval(wn(this,Gn)),mn(this,Gn,void 0)),clearTimeout(wn(this,zn)),mn(this,zn,void 0),gn(this,Ai,dr).call(this,e,n)}else gn(this,Wi,vr).call(this,e,t)}function sr(e){var t=this;"open"===e?t.extDoorOpen():"close"===e?(t.extDoorClose(),t.clearSenseProduct(),setTimeout((function(){t.resetAll()}),100)):dd.error(dd.__("Type unrecognized",e))}function cr(e){var t=null,n=null,i=!1,r=!1;switch(e){case"35":i=!0,n=dd.__("Elevator motor failure (possible jam)");break;case"37":i=!0,n=dd.__("Failure in one of the photo transistors in the tank.");break;case"38":i=!0,n=dd.__("No channel detected.");break;case"44":i=!0,n=dd.__("Button panel fault.");break;case"45":i=!0,n=dd.__("WRITING ERROR TO EEPROM.");break;case"47":i=!0,n=dd.__("THERMOMETER DISCONNECTED.");break;case"4A":i=!0,n=dd.__("ERROR IN DETECTION OF EXTRACTOR CONSUMPTION.");break;case"4C":i=!0,n=dd.__("PRODUCT OUTLET SEARCH ERROR.");break;case"4D":i=!0,n=dd.__("INTERIOR OF ELEVATOR BLOCKED.");break;case"4E":i=!0,n=dd.__("ERROR IN PRODUCT DETECTOR CHECKER.")}if(wn(this,ai))switch(t=i?dd.__("Error in machine")+" "+wn(this,An):dd.__("Warning in machine")+" "+wn(this,An),e){case"32":r=!0,n=dd.__("This tray is invalid.");break;case"33":r=!0,n=dd.__("invalid channel.");break;case"34":r=!0,n=dd.__("empty channel.");break;case"39":r=!0,n=dd.__("Product detector fault.");break;case"41":r=!0,n=dd.__("Failure on the 485 bus (ignore if it does not have a display).");break;case"43":r=!0,n=dd.__("Elevator adjustment alarm at 24v.");break;case"46":r=!0,n=dd.__("COMMUNICATION ERROR WITH THE CONTROL TEMPERATURE.");break;case"48":r=!0,n=dd.__("THERMOMETER UNCONFIGURED.");break;case"49":r=!0,n=dd.__("FAULTY THERMOMETER.");break;case"4B":r=!0,n=dd.__("CHANNEL SEARCH ERROR.");break;case"50":r=!0,n=dd.__("PRODUCT EXPIRED BY TEMPERATURE.")}else i&&(t=dd.__("Error in machine")+" "+wn(this,An));(i||r)&&this.extErrorDisplay({title:t,message:n,type:i?"error":"warn"})}function lr(e){var t=this,n={message:null,description:null,request:null,code:5999,additional:null};switch(e[1].toString().toUpperCase()){case"30":n.message=dd.__("Machine ready"),n.description=dd.__("The machine is now ready"),n.code=6010,void 0!==wn(t,Qn)&&(mn(t,Jn,!0),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"31":n.message=dd.__("Machine busy"),n.description=dd.__("The machine is now busy with other thing"),n.code=6011;break;case"32":n.message=dd.__("Invalid tray"),n.description=dd.__("The tray requested is invalid"),n.code=6012,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),dd.error(dd.__("Invalid Tray requested")),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1)),this._auto_read_engines_on_fail&&setTimeout((function(){dd.warn(dd.__("An error was received, engines reading in process!")),mn(t,oi,!0),t.assignChannels()}),1e4);break;case"33":n.message=dd.__("Invalid Channel"),n.description=dd.__("The channel was invalid for use"),n.code=6013,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),dd.error(dd.__("Invalid channel requested")),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1)),t._auto_read_engines_on_fail&&setTimeout((function(){dd.warn(dd.__("An error was received, engines reading in process!")),mn(t,oi,!0),t.assignChannels()}),1e4);break;case"34":n.message=dd.__("Empty Channel"),n.description=dd.__("The channel is empty right now, reset errors if that not the case"),n.code=6014,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"35":n.message=dd.__("Jam"),n.description=dd.__("Jam in engine of elevator"),n.code=6015,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),dd.error(dd.__("Jam in engine of elevator")),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"36":n.message=dd.__("Malfunction"),n.description=dd.__("Malfunction in the elevator belt or product detector"),n.code=6016,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),dd.error(dd.__("Malfunction in the elevator belt or product detector")),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"37":n.message=dd.__("Phototransistors"),n.description=dd.__("Failure in one of the phototransistors in the cabinet (Cabinet)"),n.code=6017,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),dd.error(dd.__("Failure in one of the phototransistors in the cabinet (Cabinet)")),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"38":n.message=dd.__("Empty channels"),n.description=dd.__("no channel detected"),n.code=6018,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),dd.error(dd.__("no channel detected")),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"39":n.message=dd.__("Product detector fault"),n.description=dd.__("Product detector fault"),n.code=6019,void 0!==wn(t,Qn)&&(mn(t,Jn,"ELEVATOR"),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),t.collect(),mn(t,On,!1),mn(t,Wn,!0),null!==t._custom_waiting_withdrawal_timer?mn(t,Fn,t._custom_waiting_withdrawal_timer):mn(t,Fn,6e4));break;case"40":n.message="I dont know",n.description="If you know... well change this",n.code=6020;break;case"41":n.message=dd.__("485 BUS fault"),n.description=dd.__("Display of machine is disconnected"),n.code=6021,void 0!==wn(t,Qn)&&(mn(t,Jn,!0),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"42":n.message=dd.__("Product under elevator"),n.description=dd.__("Product alarm under the elevator"),n.code=6022;break;case"43":n.message=dd.__("Elevator setting alarm"),n.description=dd.__("Elevator setting alarm A24V"),n.code=6023;break;case"44":n.message=dd.__("Button panel fault"),n.description=dd.__("Button panel fault"),n.code=6024;break;case"45":n.message=dd.__("Write error in EEPROM"),n.description=dd.__("Write error in EEPROM"),n.code=6025;break;case"46":n.message=dd.__("Error temperature control"),n.description=dd.__("Communication error with temperature control"),n.code=6026;break;case"47":n.message=dd.__("Thermometer disconnected"),n.description=dd.__("Thermometer disconnected"),n.code=6027,t.extThermometer(n);break;case"48":n.message=dd.__("Thermometer misconfigured"),n.description=dd.__("Thermometer misconfigured"),n.code=6028,t.extThermometer(n);break;case"49":n.message=dd.__("Thermometer fault"),n.description=dd.__("Thermometer fault"),n.code=6029,t.extThermometer(n);break;case"4A":n.message=dd.__("Error extractor consumption"),n.description=dd.__("Extractor consumption detection error"),n.code=6030;break;case"4B":n.message=dd.__("Channel search error"),n.description=dd.__("Channel search error"),n.code=6031,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"4C":n.message=dd.__("Product exit mouth search error"),n.description=dd.__("Product exit mouth search error"),n.code=6032,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),mn(t,On,!1));break;case"4D":n.message=dd.__("Elevator interior locked"),n.description=dd.__("Elevator interior locked"),n.code=6033;break;case"4E":n.message=dd.__("Product detector verifier error"),n.description=dd.__("Product detector verifier error"),n.code=6034,void 0!==wn(t,Qn)&&(mn(t,Jn,!1),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),t.collect(),mn(t,On,!1));break;case"4F":n.message=dd.__("Waiting for product recall"),n.description=dd.__("Waiting for product recall"),n.code=6035,void 0!==wn(t,Qn)&&(mn(t,Jn,"ELEVATOR"),clearInterval(wn(t,Qn)),mn(t,Qn,void 0),t.collect(),mn(t,On,!1),mn(t,Wn,!0),null!==t._custom_waiting_withdrawal_timer?mn(t,Fn,t._custom_waiting_withdrawal_timer):mn(t,Fn,6e4));break;case"50":n.message=dd.__("Product expired by temperature"),n.description=dd.__("Product expired by temperature"),n.code=6036;break;case"51":n.message=dd.__("Faulty automatic door"),n.description=dd.__("Faulty automatic door"),n.code=6037}return gn(t,Di,cr).call(t,e[1].toString().toUpperCase()),n}function dr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},i={},r=this;switch(e[0].toString().toUpperCase()){case"2":if(e[1]&&e[2]){var o={message:null,description:null,request:"event",code:6100,additional:null};switch(i={machine:{hex:null,desc:null}},e[1]&&(i.machine.hex=e[1],i.machine.dec=dd.hexToDec(e[1])-128),e[2].toString().toUpperCase()){case"54":switch(i.key={hex:e[3],dec:dd.hexToDec(e[3]),ascii:null},e[3].toString().toUpperCase()){case"31":i.key.ascii="1";break;case"32":i.key.ascii="2";break;case"33":i.key.ascii="3";break;case"34":i.key.ascii="4";break;case"35":i.key.ascii="5";break;case"36":i.key.ascii="6";break;case"37":i.key.ascii="7";break;case"38":i.key.ascii="8";break;case"39":i.key.ascii="9";break;case"30":i.key.ascii="0";break;case"2A":i.key.ascii="*";break;case"23":i.key.ascii="#";break;case"41":i.key.ascii="A";break;case"42":i.key.ascii="B";break;case"43":i.key.ascii="C";break;case"44":i.key.ascii="D"}o.message=dd.__("Key pressed");var a=dd.__("The key {{key_pressed}} was pressed in the machine");a=a.replaceAll("{{key_pressed}}",i.key.ascii),o.description=a,o.additional=dd.__("Complete code received: ")+JSON.stringify(e),o.code=6101;break;case"50":switch(e[3].toString().toUpperCase()){case"4F":gn(r,Si,sr).call(r,"open"),o.message=dd.__("Door open"),o.description=dd.__("The door of machine was open"),o.code=6102,i.door={},i.door.status="open";break;case"43":gn(r,Si,sr).call(r,"close"),o.message=dd.__("Door closed"),o.description=dd.__("The door of machine was closed"),o.code=6103,i.door={},i.door.status="closed"}break;case"43":switch(e[3].toString().toUpperCase()){case"43":e[4].toString().toUpperCase(),o.code=6115,"FD"===e[5].toString().toUpperCase()?(o.message=dd.__("Disabled"),o.description=dd.__("This channel is disconnected"),i.machine.channel=wn(r,ti),i.machine.status=0):"FC"===e[5].toString().toUpperCase()?(o.message=dd.__("Enabled"),o.description=dd.__("This channel is enabled"),i.machine.channel=wn(r,ti),i.machine.status=1):(o.message=dd.__("Sold out"),o.description=dd.__("This channel is empty"),i.machine.channel=wn(r,ti),i.machine.status=1),o.additional=JSON.stringify(i),wn(r,jn).push({machine:wn(r,An),selection:wn(r,ti),status:i.machine.status});break;case"54":i.working_temp=e[4],i.temp=(dd.hexToDec(e[4])-dd.hexToDec("80"))/2,this.extWorkingTemp(i,"jof"+wn(r,An)+"_assigned_working_temp");break;case"74":switch(e[4].toString().toUpperCase()){case"2B":i.sign="+";break;case"2E":i.sign="-";break;default:i.sign=null}switch(e[5].toString().toUpperCase()){case"30":case"31":case"32":case"33":case"34":case"35":case"36":case"37":case"38":case"39":i.temp_tens=dd.hexToDec(e[5])-48;break;default:i.temp_tens=null}switch(e[6].toString().toUpperCase()){case"30":case"31":case"32":case"33":case"34":case"35":case"36":case"37":case"38":case"39":i.temp_units=dd.hexToDec(e[6])-48;break;default:i.temp_units=null}switch(i.dec_point="?","2E"===e[7].toString().toUpperCase()&&(i.dec_point="."),e[8].toString().toUpperCase()){case"30":case"31":case"32":case"33":case"34":case"35":case"36":case"37":case"38":case"39":i.temp_decimals=dd.hexToDec(e[8])-48;break;default:i.temp_decimals=null}i.degradees="?","7F"===e[9].toString().toUpperCase()&&(i.degradees="°"),i.type_degradees="?","43"===e[10].toString().toUpperCase()?i.type_degradees="C":"46"===e[10].toString().toUpperCase()&&(i.type_degradees="F"),i.str=i.sign+i.temp_tens+i.temp_units+i.dec_point+i.temp_decimals+i.degradees+i.type_degradees,r.extCurrentTemp(i,"jof"+wn(r,An)+"_current_temp")}}n=o}else n.name=dd.__("Ok"),n.description=dd.__("The last command was executed successfully"),n.request=null,n.no_code=6001,n.additional=dd.__("Usually this happens when the request is made, however; You must begin to request the 'status' of the machine until it responds.");break;case"6":t&&dd.checkDevicesConnected(),e[1]&&!e[2]?n=gn(r,Li,lr).call(r,e):e[1]?(n.name=dd.__("Ok"),n.description=dd.__("The last command was executed successfully"),n.request=null,n.code=6001,n.additional=dd.__("Usually this happens when the request is made, however; You must begin to request the 'status' of the machine until it responds.")):(n.name=dd.__("Ok"),n.description=dd.__("The last command was executed successfully"),n.request=null,n.no_code=6001,n.additional=dd.__("Usually this happens when the request is made, however; You must begin to request the 'status' of the machine until it responds."),void 0!==wn(r,Qn)&&(mn(r,Jn,!1),clearInterval(wn(r,Qn)),mn(r,Qn,void 0)));break;case"15":n.name=dd.__("Error"),n.description=dd.__("The CheckSum is incorrect"),n.request=null,n.code=6e3,n.additional=dd.__("One or both checksums are wrong, please check the calculation.");break;default:n.request=dd.__("undefined"),n.name=dd.__("Response unrecognized"),n.description=dd.__("The response of application was received, but dont identify with any of current parameters"),n.no_code=404}this.extSerialMessage({code:e,message:n.name,description:n.description,request:n.request,no_code:n.no_code})}function ur(e){clearTimeout(wn(this,zn));var t={};switch(t.name="",t.description="",e.no_code){case 700:t.name=e.message,t.description=dd.__("The application connect successfully with website");break;case 701:t.name=e.message,t.description=dd.__("The connection with the serial device was ended by system request");break;case 702:t.name=e.message,t.description=dd.__("The last instruction is not compatible with this version of the application");break;case 703:gn(this,zi,mr).call(this),t.name=dd.__("Serial device disconnected"),t.description=e.description;break;case 704:t.name=e.message,t.description=e.description;break;case 705:gn(this,zi,mr).call(this),t.name=dd.__("Connection with the serial device is not complete"),t.description=dd.__("Check the device is connected correctly");break;case 706:t.name=e.message,t.description=dd.__("The port was not linked to the serial device, so we closed");break;case 707:t.name=e.message,t.description=dd.__("The response was not received in the time specified by the application");break;default:t.name=e.message,t.description=dd.__("Oops! you ran into an unknown error")}this.extAppMessage({message:t.name,description:t.description,no_code:e.no_code})}function hr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[],i=this;e.forEach((function(e){n.push(dd.hexMaker(e))})),n=dd.jofemarMakeBytes(n),void 0!==wn(i,zn)?(wn(i,In).push({bytes:n,to_do:t}),dd.warn(dd.__("You send a new command to serial device before have an answer")+". "+dd.__("Commands in queue:")+" "+wn(i,In).length),mn(i,Zn,setInterval((function(){void 0===wn(i,zn)&&wn(i,In).length>0&&(dd.log(dd.__("Sending in delay mode")+". "+dd.__("Commands in queue:")+" "+wn(i,In).length),clearInterval(wn(i,Zn)),mn(i,Zn,void 0),mn(i,zn,setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!wn(i,In)[0].bytes){e.next=3;break}return e.next=3,gn(i,ki,er).call(i,wn(i,In)[0].bytes,wn(i,In)[0].to_do);case 3:case"end":return e.stop()}}),e)}))),"dispense"===wn(i,In)[0].to_do?wn(i,Yn):wn(i,qn))),i.extSentData({message:t,hex:wn(i,In)[0].bytes}),gn(i,Ti,or).call(i,wn(i,In)[0].bytes),mn(i,In,wn(i,In).splice(1)))}),500))):(mn(i,In,[]),mn(i,zn,setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gn(i,ki,er).call(i,n,t);case 2:case"end":return e.stop()}}),e)}))),wn(i,"dispense"===t?Yn:qn))),i.extSentData({message:t,hex:n}),gn(i,Ti,or).call(i,n))}function pr(){this.extReconnectionMessage()}function _r(e){mn(this,yn,!1),window["owl_jof"+wn(this,An)+"_connected"]=wn(this,yn),dd.warn(e),this.extConnectionLost(e)}function fr(e){var t=this;mn(t,yn,!1),window["owl_jof"+wn(this,An)+"_connected"]=wn(t,yn),gn(t,Ni,_r).call(t,e),mn(t,Pn,0),setTimeout(ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.disconnect();case 2:case"end":return e.stop()}}),e)}))),100)}function vr(e,t){this.extDividedCodeMessage(e,t)}function gr(){this.extWithDevice()}function mr(){this.extWithoutDevice()}function wr(){return br.apply(this,arguments)}function br(){return(br=ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serial"in navigator)||!("forget"in SerialPort.prototype)){e.next=3;break}return e.next=3,wn(this,kn).forget();case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function yr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];wn(this,Nn).push({tray:e,channel:t,end:n}),gn(this,Yi,kr).call(this,e,t,n)}function kr(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];wn(this,Bn).push({tray:e,channel:t,end:n})}function xr(){gn(this,qi,yr).call(this,"80","80",!0)}function Cr(e){"object"===an(e.code)?(dd.warn(dd.__("Executing emulator be carefully")),wn(this,yn)||(mn(this,yn,!0),window["owl_jof"+wn(this,An)+"_connected"]=wn(this,yn),void 0!==wn(this,Gn)&&(clearInterval(wn(this,Gn)),mn(this,Gn,void 0))),clearTimeout(wn(this,zn)),mn(this,zn,void 0),gn(this,Ai,dr).call(this,e.code)):dd.error(dd.__("Invalid data to emulate"))}const Mr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;dn(this,e),hn(this,Hi),hn(this,Gi),hn(this,Yi),hn(this,qi),hn(this,Ui),hn(this,zi),hn(this,Ri),hn(this,Fi),hn(this,Wi),hn(this,Oi),hn(this,Bi),hn(this,Ni),hn(this,Ii),hn(this,ji),hn(this,Pi),hn(this,Ai),hn(this,Li),hn(this,Di),hn(this,Si),hn(this,Ei),hn(this,Ti),hn(this,Mi),hn(this,Ci),hn(this,xi),hn(this,ki),hn(this,yi),hn(this,bi),hn(this,wi),hn(this,mi),hn(this,gi),fn(this,yn,{writable:!0,value:!1}),fn(this,kn,{writable:!0,value:void 0}),fn(this,xn,{writable:!0,value:void 0}),fn(this,Cn,{writable:!0,value:void 0}),fn(this,Mn,{writable:!0,value:void 0}),fn(this,Tn,{writable:!0,value:void 0}),fn(this,En,{writable:!0,value:!0}),fn(this,Sn,{writable:!0,value:new Uint8Array(0)}),fn(this,Dn,{writable:!0,value:void 0}),fn(this,Ln,{writable:!0,value:dd.setJofemarConnectionConstant(1)}),fn(this,An,{writable:!0,value:1}),pn(this,"_serial_filters",[{usbVendorId:1027,usbProductId:24577}]),pn(this,"_serial_config_port",{baudRate:9600,dataBits:8,stopBits:1,parity:"none",bufferSize:32768,flowControl:"none"}),fn(this,Pn,{writable:!0,value:0}),pn(this,"_serial_btn_connect_serial",null),fn(this,jn,{writable:!0,value:[]}),fn(this,In,{writable:!0,value:[]}),fn(this,Nn,{writable:!0,value:[]}),fn(this,Bn,{writable:!0,value:[]}),fn(this,On,{writable:!0,value:!1}),fn(this,Wn,{writable:!0,value:!1}),fn(this,Fn,{writable:!0,value:0}),pn(this,"_custom_waiting_withdrawal_timer",null),fn(this,Rn,{writable:!0,value:void 0}),fn(this,zn,{writable:!0,value:void 0}),fn(this,Un,{writable:!0,value:500}),fn(this,qn,{writable:!0,value:800}),fn(this,Yn,{writable:!0,value:25e3}),fn(this,Gn,{writable:!0,value:void 0}),fn(this,Hn,{writable:!0,value:void 0}),fn(this,Qn,{writable:!0,value:void 0}),fn(this,Jn,{writable:!0,value:void 0}),fn(this,Vn,{writable:!0,value:0}),pn(this,"_last_error",{message:null,handler:null,code:null,no_code:666}),fn(this,Zn,{writable:!0,value:void 0}),fn(this,Xn,{writable:!0,value:7e3}),pn(this,"_show_without_device",!0),fn(this,$n,{writable:!0,value:"_id_vl_not_support"}),fn(this,Kn,{writable:!0,value:109}),fn(this,ei,{writable:!0,value:189}),fn(this,ti,{writable:!0,value:void 0}),fn(this,ni,{writable:!0,value:0}),fn(this,ii,{writable:!0,value:0}),fn(this,ri,{writable:!0,value:0}),fn(this,oi,{writable:!0,value:!1}),pn(this,"_auto_read_engines_on_fail",!1),fn(this,ai,{writable:!0,value:!0}),fn(this,si,{writable:!0,value:0}),fn(this,ci,{writable:!0,value:!1}),fn(this,li,{writable:!0,value:{_interval_reconnection:void 0,_waiting_for_sense:void 0,_timer_until_response:void 0,_status_dispense:void 0,_time_response_general:900,_time_response_connect_start:500,_time_response_engines:25e3,_time_to_reconnect:7e3,_last_error:{message:null,handler:null,code:null,no_code:666},_channel_start_verification:109,_channel_stop_verification:189,_multi_session:!1,_number_dispensing:0,_multi_dispense_queue:[],_backup_multi_dispense_queue:[],_arr_multi_dispense:[],__arr_multi_dispense__original:[],_waiting_withdrawal:!1,_waiting_withdrawal_timer:0,_waiting_withdrawal_interval:void 0,_quantity_dispensed_cart:0,_waiting_aux:!1}}),fn(this,di,{writable:!0,value:0}),fn(this,ui,{writable:!0,value:2e3}),fn(this,hi,{writable:!0,value:1e3}),pn(this,"__sense_selection",null),pn(this,"__sense_id_movement",null),fn(this,pi,{writable:!0,value:!1}),fn(this,_i,{writable:!0,value:0}),fn(this,fi,{writable:!0,value:[]}),fn(this,vi,{writable:!0,value:[]});var i="color:white;font-family:system-ui;font-size:2rem;-webkit-text-stroke: 1px black;font-weight:bold";console.debug("%cJofemar webserial. %s",i,"\n\rCreated by danidoble."),dd.addButtonToPermissions("Jofemar",wn(this,An)),null!==t&&(this._serial_filters=t),null!==n&&(this._serial_config_port={baudRate:n.baudRate?n.baudRate:9600,dataBits:n.dataBits?n.dataBits:8,stopBits:n.stopBits?n.stopBits:1,parity:n.parity?n.parity:"none",bufferSize:n.bufferSize?n.bufferSize:32768,flowControl:n.flowControl?n.flowControl:"none"}),gn(this,gi,Qi).call(this)}var t,n,i,r,o;return t=e,n=[{key:"clearSenseProduct",value:function(){void 0!==wn(this,Hn)&&0!==wn(this,Hn)&&clearInterval(wn(this,Hn)),void 0!==wn(this,Qn)&&0!==wn(this,Qn)&&clearInterval(wn(this,Qn)),mn(this,Hn,void 0),mn(this,Jn,void 0),mn(this,On,!1),mn(this,di,0)}},{key:"validateTray",value:function(e){var t=!0;return"string"==typeof e&&(e=dd.hexToDec(e)),"number"==typeof e&&(e>=128&&(e-=128),e>=11&&e<=23&&(t=!1,e=dd.decToHex((128+e).toString()))),{error:t,tray:e}}},{key:"validateChannel",value:function(e){var t=!0;return"string"==typeof e&&(e=dd.hexToDec(e)),"number"==typeof e&&(e>=128&&(e-=128),e>=0&&e<=9&&(t=!1,e=dd.decToHex((128+e).toString()))),{error:t,channel:e}}},{key:"__isConnected",get:function(){return wn(this,yn)},set:function(e){mn(this,yn,e),window["owl_jof"+wn(this,An)+"_connected"]=wn(this,yn)}},{key:"__originalValues",get:function(){return wn(this,li)}},{key:"__serialPort",get:function(){return wn(this,kn)}},{key:"channelStartVerification",get:function(){return wn(this,Kn)},set:function(e){mn(this,Kn,e)}},{key:"channelStopVerification",get:function(){return wn(this,ei)},set:function(e){mn(this,ei,e)}},{key:"toString",value:function(){var e=this;return JSON.stringify({__class:"Jofemar",__number_device:wn(e,An),__connected:wn(e,yn),__connection:wn(e,Ln)})}},{key:"useWarnings",get:function(){return wn(this,ai)},set:function(e){mn(this,ai,e)}},{key:"disconnect",value:(o=ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wn(this,yn)&&this.extAppMessage({description:"Disconnected",message:"disconnect",no_code:303}),e.next=3,gn(this,wi,Zi).call(this);case 3:mn(this,yn,!1),window["owl_jof"+wn(this,An)+"_connected"]=wn(this,yn);case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"forgetSerial",value:function(){"serial"in navigator&&"forget"in SerialPort.prototype?gn(this,Ui,wr).call(this).then((function(){dd.log(__("Port forgotten"))})):dd.warn("Navigator don't support forget by now")}},{key:"initSerial",value:(r=ln(sn().mark((function e(){return sn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dd.isWebserialSupported(wn(this,$n))){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,gn(this,mi,Ji).call(this);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setBytesConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;mn(this,An,e),mn(this,Ln,dd.setJofemarConnectionConstant(e)),dd.addButtonToPermissions("Jofemar",wn(this,An))}},{key:"setDOMElsBtnConnect",value:function(e){this._serial_btn_connect_serial=document.querySelectorAll(e)}},{key:"softReload",value:function(){mn(this,Gn,wn(this,li)._interval_reconnection),mn(this,Hn,wn(this,li)._waiting_for_sense),mn(this,zn,wn(this,li)._timer_until_response),mn(this,Jn,wn(this,li)._status_dispense),mn(this,qn,wn(this,li)._time_response_general),mn(this,Xn,wn(this,li)._time_to_reconnect),this._last_error=wn(this,li)._last_error,mn(this,Yn,wn(this,li)._time_response_engines),mn(this,Kn,wn(this,li)._channel_start_verification),mn(this,ei,wn(this,li)._channel_stop_verification),mn(this,_i,wn(this,li)._number_dispensing),mn(this,Bn,wn(this,li)._backup_multi_dispense_queue),mn(this,Nn,[]),mn(this,fi,[]),mn(this,vi,[]),mn(this,di,0),mn(this,Wn,wn(this,li)._waiting_withdrawal),mn(this,Fn,wn(this,li)._waiting_withdrawal_timer),mn(this,Rn,wn(this,li)._waiting_withdrawal_interval),mn(this,Vn,wn(this,li)._quantity_dispensed_cart),mn(this,On,wn(this,li)._waiting_aux),this.extSoftReload()}},{key:"connect",value:function(){for(var e=[],t=0;t<wn(this,Ln).length;t++)e.push(wn(this,Ln)[t].toLowerCase().replaceAll("0x",""));gn(this,ji,hr).call(this,e,"connect")}},{key:"deviceConnected",value:function(e){var t=this;mn(t,yn,!0),window["owl_jof"+wn(this,An)+"_connected"]=wn(t,yn),wn(t,kn).ondisconnect=function(e){gn(t,Oi,fr).call(t,e)},wn(t,kn).onconnect=function(e){t.deviceConnected(e)},dd.log(e)}},{key:"machineStatus",value:function(){var e=["02","30","30",(128+wn(this,An)).toString(16),"53","FF","FF"];gn(this,ji,hr).call(this,e,"status")}},{key:"dispense",value:function(e,t){var n=this.validateTray(e);if(!0!==n.error){var i=this.validateChannel(t);if(!0!==i.error){e=n.tray,t=i.channel;var r=["02","30","30",(128+wn(this,An)).toString(16),"56",e.toString(),t.toString()],o=this;gn(this,ji,hr).call(this,r,"dispense"),setTimeout((function(){mn(o,Qn,setInterval((function(){o.machineStatus()}),2e3))}),4e3)}else dd.messageDisplay(dd.__("Error"),dd.__("Channel requested is invalid"),"error")}else dd.messageDisplay(dd.__("Error"),dd.__("Tray requested is invalid"),"error")}},{key:"addMultiDispense",value:function(e,t,n,i){var r=this.validateTray(e);if(!0!==r.error){var o=this.validateChannel(t);!0!==o.error?(e=r.tray,t=o.channel,wn(this,fi).push({tray:e,channel:t,uuid:n,id:i}),mn(this,vi,wn(this,fi))):dd.messageDisplay(dd.__("Error"),dd.__("Channel requested is invalid"),"error")}else dd.messageDisplay(dd.__("Error"),dd.__("Tray requested is invalid"),"error")}},{key:"beginMultiDispense",value:function(){var e=this,t=!1;mn(e,pi,!0),mn(e,Bn,[]);for(var n=function(n){wn(e,fi).length-1===n&&(t=!0,setTimeout((function(){gn(e,Gi,xr).call(e),setTimeout((function(){e.continueMultiple()}),10)}),50*(n+1))),setTimeout((function(){gn(e,qi,yr).call(e,wn(e,fi)[n].tray,wn(e,fi)[n].channel,t)}),40*(n+1))},i=0;i<wn(e,fi).length;i++)n(i)}},{key:"continueMultiple",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(wn(t,On))wn(t,_i)<wn(t,fi).length+1&&setTimeout((function(){t.continueMultiple(e)}),1e3);else if(void 0!==wn(t,Hn)&&0!==wn(t,Hn)||void 0!==wn(t,Hn)&&0!==wn(t,Hn)||!(wn(t,Nn).length>0))wn(t,Nn).length>0&&setTimeout((function(){t.continueMultiple(e)}),1e3);else{var n;if(mn(t,_i,(n=wn(t,_i),++n)),mn(t,di,0),mn(t,On,!0),!0===e){var i=wn(t,_i)-2;if(mn(t,Nn,wn(t,Bn)),i>0){mn(t,_i,wn(t,_i)-1);var r=JSON.parse(JSON.stringify(wn(t,Bn)));mn(t,Nn,wn(t,Bn).splice(i)),mn(t,Bn,r)}else mn(t,_i,wn(t,_i)-1),mn(t,Bn,JSON.parse(JSON.stringify(wn(t,Bn))))}dd.log(dd.__("Dispensing product: ")+wn(t,_i));var o=wn(t,Nn)[0].tray,a=wn(t,Nn)[0].channel,s=wn(t,Nn)[0].end;t.waitingForSense(0,0);var c=["02","30","30",(128+wn(t,An)).toString(16),"4D",o.toString(),a.toString()];gn(t,ji,hr).call(t,c,"multi_dispense"),mn(t,ci,!(!0===s||"80"===o&&"80"===a)),setTimeout((function(){mn(t,Qn,setInterval((function(){t.machineStatus()}),2e3))}),4e3),mn(t,Nn,wn(t,Nn).splice(1))}}},{key:"isMultiple",value:function(){return wn(this,Nn).length>0}},{key:"multiDispenseQueue",get:function(){return wn(this,Nn)}},{key:"channelsMachine",get:function(){return wn(this,jn)}},{key:"collect",value:function(){var e=["02","30","30",(128+wn(this,An)).toString(16),"4E","FF","FF"];gn(this,ji,hr).call(this,e,"collect")}},{key:"reset",value:function(e){var t=["02","30","30",(128+wn(this,An)).toString(16),"52",e,"FF"];gn(this,ji,hr).call(this,t,"reset")}},{key:"resetAll",value:function(){var e,t=this;"function"==typeof window.Swal.fire?Swal.fire({title:dd.__("Reset errors, wait..."),html:dd.__("The window will close automatically en [b] seconds").replaceAll("[b]","<b></b>"),timer:21e3,timerProgressBar:!0,allowOutsideClick:!1,didOpen:function(){setTimeout((function(){t.reset("80"),setTimeout((function(){t.reset("81"),setTimeout((function(){t.reset("FF")}),500)}),500)}),100),Swal.showLoading();var n=Swal.getHtmlContainer().querySelector("b");e=setInterval((function(){n.textContent=parseInt((1+Swal.getTimerLeft()/1e3).toString()).toString()}),1e3)},willClose:function(){clearInterval(e)}}):(t.reset("80"),setTimeout((function(){t.reset("81"),setTimeout((function(){t.reset("FF")}),500)}),500))}},{key:"lights",value:function(e){var t=["02","30","30",(128+wn(this,An)).toString(16),"4C",e,"FF"];gn(this,ji,hr).call(this,t,"light")}},{key:"program",value:function(e,t){var n=["02","30","30",(128+wn(this,An)).toString(16),"50",e,t];gn(this,ji,hr).call(this,n,"program")}},{key:"motorVoltage",value:function(e,t){var n=["02","30","30",(128+wn(this,An)).toString(16),"47",e,t];gn(this,ji,hr).call(this,n,"voltage")}},{key:"pushOutProduct",value:function(e,t){var n=["02","30","30",(128+wn(this,An)).toString(16),"4F",e,t];gn(this,ji,hr).call(this,n,"push_out")}},{key:"afterDispensing",value:function(e,t){var n=["02","30","30",(128+wn(this,An)).toString(16),"45",e,t];gn(this,ji,hr).call(this,n,"after_dispensing")}},{key:"consult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FF",n=["02","30","30",(128+wn(this,An)).toString(16),"43",e,t];gn(this,ji,hr).call(this,n,"check_data")}},{key:"displayConfig",value:function(e,t){for(var n=["02","30","30",(128+wn(this,An)).toString(16),"44",e],i=0;i<t.length;i++)n.push(t[i]);gn(this,ji,hr).call(this,n,"display")}},{key:"watch",value:function(e){var t=["02","30","30",(128+wn(this,An)).toString(16),"72"];e.split(" ").forEach((function(e){t.push(e)})),gn(this,ji,hr).call(this,t,"watch")}},{key:"statusEvent",value:function(e){var t=["02","30","30",(128+wn(this,An)).toString(16),"41","41",e];gn(this,ji,hr).call(this,t,"event-status")}},{key:"custom",value:function(e){for(var t=[],n=e.split(" "),i=0;i<n.length;i++)t.push(dd.hexMaker(n[i]));gn(this,ji,hr).call(this,t,"custom")}},{key:"assignChannels",value:function(){var e=this;mn(e,ri,wn(e,ei)-wn(e,li)._channel_start_verification),mn(e,si,100*wn(e,ni)/wn(e,ri));var t=wn(e,oi);mn(e,oi,!1),"function"==typeof Swal.fire&&(Swal.isVisible()||Swal.fire({title:t?dd.__("An error was received, engines reading in process!"):dd.__("In process!"),html:dd.__("Wait, the active channels are being assigned! This message will close when finished.")+"<br/><b></b>",icon:t?"error":"warning",showCancelButton:!1,showConfirmButton:!1,didOpen:function(){Swal.showLoading();var t=Swal.getHtmlContainer().querySelector("b");mn(e,ii,setInterval((function(){t.textContent=wn(e,si).format(0,3,",",".")+"%"}),100))},allowOutsideClick:!1})),wn(e,Kn)<=wn(e,ei)?(mn(e,ti,wn(e,Kn)),e.consult("43",wn(e,Kn).toString(16)),setTimeout((function(){var t,n;mn(e,Kn,(t=wn(e,Kn),++t)),mn(e,ni,(n=wn(e,ni),++n)),e.assignChannels()}),700)):("function"==typeof Swal.fire&&Swal.isVisible()&&Swal.close(),mn(e,Kn,wn(e,li)._channel_start_verification),mn(e,ti,void 0),mn(e,ni,0),clearInterval(wn(e,ii)),mn(e,ii,0),mn(e,ri,0),mn(e,si,0),e.extActiveChannels(wn(e,jn)))}},{key:"waitingForSense",value:function(e,t){var n=this,i=this;i.__sense_selection=e,i.__sense_id_movement=t,mn(i,Hn,setInterval((function(){var e;if(void 0===wn(i,Jn))!0===wn(i,pi)?dd.log("dispensing... Multiple #timeout:",wn(i,di)+"/50"):dd.log("dispensing... #timeout:",wn(i,di)+"/50"),wn(i,di)>=50?(mn(i,di,0),mn(i,Jn,!1)):mn(i,di,(e=wn(i,di),++e)),!0===wn(i,pi)?i.extWaitingForSenseCart("undefined",wn(i,ci)):i.extWaitingForSense("undefined",wn(i,ci));else if(!0===wn(i,Jn))if(i.clearSenseProduct(),!0===wn(i,pi)){var t;wn(i,fi).length+1!==wn(i,_i)&&(dd.log(dd.__("Product dispensed successfully: "),wn(i,_i)),mn(i,Vn,(t=wn(i,Vn),++t))),void 0!==wn(i,fi)[wn(i,_i)-1]&&i.extStockMinus(JSON.stringify({data:wn(i,vi),uuid:wn(i,vi)[wn(i,_i)-1].uuid,id:wn(i,vi)[wn(i,_i)-1].id})),wn(i,_i)<wn(i,fi).length+1&&setTimeout((function(){wn(i,Wn)?(i.extPickupAndContinue(),clearInterval(wn(i,Rn)),mn(i,Rn,void 0),mn(i,Rn,setInterval((function(){var e=wn(i,Fn)/1e3;mn(i,Fn,wn(i,Fn)-1e3),i.extPickupAndContinue(e),wn(i,Fn)<=0&&(clearInterval(wn(i,Rn)),mn(i,Rn,void 0),mn(i,Fn,0),mn(i,On,!1),mn(i,Wn,!1),i.continueMultiple(!0))}),1e3))):i.continueMultiple()}),400),wn(i,fi).length+1===wn(i,_i)&&(dd.log(dd.__("Multi dispense finished, delivered: ")+wn(i,Vn)),0===wn(i,Vn)?(i.extFailedStock(),setTimeout((function(){i.softReload()}),wn(i,ui))):i.extWaitingForSenseCart("dispensed",{dispensed_quantity:wn(i,Vn),arr_multi_dispense:wn(i,vi)}))}else dd.log("dispensing: "+wn(i,Jn)),i.continueMultiple(),i.extWaitingForSense("dispensed",wn(i,ci));else!1===wn(i,Jn)&&(i.clearSenseProduct(),!0===wn(i,pi)?(wn(i,fi).length+1!==wn(i,_i)&&dd.warn(dd.__("Product not-dispensed: "),wn(i,_i)),void 0!==wn(i,fi)[wn(i,_i)-1]&&i.extStockMinus(JSON.stringify({data:wn(i,vi),uuid:wn(i,vi)[wn(i,_i)-1].uuid,id:wn(i,vi)[wn(i,_i)-1].id,zero:!0})),wn(i,_i)<wn(i,fi).length+1&&setTimeout((function(){wn(i,Wn)?(i.extPickupAndContinue(),clearInterval(wn(i,Rn)),mn(i,Rn,void 0),mn(i,Rn,setInterval((function(){var e=wn(i,Fn)/1e3;mn(i,Fn,wn(i,Fn)-1e3),i.extPickupAndContinue(e),wn(i,Fn)<=0&&(clearInterval(wn(i,Rn)),mn(i,Rn,void 0),mn(i,Fn,0),mn(i,On,!1),mn(i,Wn,!1),i.continueMultiple(!0))}),1e3))):i.continueMultiple()}),400),wn(i,fi).length+1===wn(i,_i)&&(dd.log(dd.__("Multi dispense finished, delivered: ")+wn(i,Vn)),0===wn(i,Vn)?(i.extFailedStock(),setTimeout((function(){i.softReload()}),wn(i,ui))):i.extWaitingForSenseCart("not-dispensed",{dispensed_quantity:wn(i,Vn),arr_multi_dispense:wn(i,vi)}))):(i.continueMultiple(),i.extWaitingForSense("not-dispensed",wn(i,ci))));"ELEVATOR"===wn(i,Jn)&&(wn(i,fi).length+1!==wn(n,_i)&&(null!==i._custom_waiting_withdrawal_timer?dd.warn(dd.__("Elevator full, pickup some products, will continue after :seconds seconds").replace(":seconds",i._custom_waiting_withdrawal_timer.toString())):dd.warn(dd.__("Elevator full, pickup some products, will continue after 1 minute"))),wn(i,_i)<wn(i,fi).length+1?(i.collect(),mn(i,Jn,void 0),i.clearSenseProduct(),setTimeout((function(){i.extPickupAndContinue(),clearInterval(wn(i,Rn)),mn(i,Rn,void 0),mn(i,Rn,setInterval((function(){var e=wn(i,Fn)/1e3;mn(i,Fn,wn(i,Fn)-1e3),i.extPickupAndContinue(e),wn(i,Fn)<=0&&(clearInterval(wn(i,Rn)),mn(i,Rn,void 0),mn(i,Fn,0),mn(i,On,!1),mn(i,Wn,!1),i.continueMultiple(!0))}),1e3))}),400)):(dd.log(dd.__("Pickup all products from elevator, no more products will been dispensed")),i.collect(),mn(i,Jn,!0)))}),wn(i,hi)))}},{key:"continueMultipleNow",value:function(){mn(this,Fn,0)}},{key:"setCustomWithdrawalTimer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;e<1&&(e=60),this._custom_waiting_withdrawal_timer=1e3*e}},{key:"waitingForSenseTest",value:function(e,t){var n=this;n.__sense_selection=e,n.__sense_id_movement=t,mn(n,Hn,setInterval((function(){var e;void 0===wn(n,Jn)?(dd.log("dispensing... #timeout:",wn(n,di)+"/50"),wn(n,di)>=50?(mn(n,di,0),mn(n,Jn,!1)):mn(n,di,(e=wn(n,di),++e)),n.extWaitingForSenseTest("undefined")):!0===wn(n,Jn)?(dd.log("dispensing: "+wn(n,Jn)),n.clearSenseProduct(),n.extWaitingForSenseTest("dispensed"),setTimeout((function(){n.softReload()}),wn(n,ui))):!1===wn(n,Jn)&&(n.clearSenseProduct(),n.extWaitingForSenseTest("not-dispensed"),setTimeout((function(){n.softReload()}),wn(n,ui)))}),wn(n,hi)))}},{key:"readCurrentTemperature",value:function(){var e=["02","30","30",(128+wn(this,An)).toString(16),"43","74","FF"];gn(this,ji,hr).call(this,e,"current temperature")}},{key:"readWorkingTemperature",value:function(){var e=["02","30","30",(128+wn(this,An)).toString(16),"43","54","FF"];gn(this,ji,hr).call(this,e,"working temperature")}},{key:"setWorkingTemperature",value:function(e){this.program("54",e);var t=this;setTimeout((function(){t.readWorkingTemperature()}),2e3)}},{key:"extSerialMessage",value:function(e){dd.log(e)}},{key:"extAppMessage",value:function(e){dd.log(e)}},{key:"extReconnectionMessage",value:function(){dd.log(dd.__("Trying reconnect"))}},{key:"extTimeoutMessage",value:function(e,t){dd.warn("Timeout",e,t)}},{key:"extConnectionLost",value:function(e){dd.log("Make your own function with this same name","Example: jof1.extConnectionLost = function(){console.log('stuffs')}")}},{key:"extSoftReload",value:function(){dd.log("Make your own function with this same name","Example: jof1.extSoftReload = function(){console.log('stuffs')}")}},{key:"extSentData",value:function(e){dd.log(e)}},{key:"extUnexpectedDisconnection",value:function(e){dd.warn(dd.__("There was an unexpected disconnection. an attempt was made to disconnect the port but it was already disconnected"),e)}},{key:"extDividedCodeMessage",value:function(e,t){dd.log(e,t)}},{key:"extDefaultLoad",value:function(){dd.log(dd.__("Change this function if you want do some after receive 'ok' in status request"))}},{key:"extWithDevice",value:function(){dd.log(dd.__("Device connected"))}},{key:"extWithoutDevice",value:function(){dd.log(dd.__("Without device"))}},{key:"extDoorOpen",value:function(){dd.log(dd.__("Door open"))}},{key:"extDoorClose",value:function(){dd.log(dd.__("Door closed"))}},{key:"extWorkingTemp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jof1_assigned_working_temp",n=document.getElementById(t);null!==n&&(n.innerText=dd.__("Current cutoff temperature: ")+e.temp+"°C"),dd.log(dd.__("Cutting temperature"),e)}},{key:"extCurrentTemp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jof1_current_temp",n=document.getElementById(t);null!==n&&(n.innerText=e.str),dd.log(e)}},{key:"extErrorDisplay",value:function(e){"error"===e.type?dd.error(e):dd.warn(e)}},{key:"extWaitingForSense",value:function(e){var t=this;switch(e){case"dispensed":dd.log('Result of dispense: "dispensed"'),setTimeout((function(){t.softReload()}),wn(t,ui));break;case"not-dispensed":dd.log('not-Result of dispense: "dispensed"'),setTimeout((function(){t.softReload()}),wn(t,ui))}}},{key:"extWaitingForSenseCart",value:function(e){var t=this;switch(e){case"dispensed":dd.log('Result of dispense: "dispensed"'),setTimeout((function(){t.softReload()}),wn(t,ui));break;case"not-dispensed":dd.log('not-Result of dispense: "dispensed"'),setTimeout((function(){t.softReload()}),wn(t,ui))}}},{key:"extWaitingForSenseTest",value:function(e){switch(e){case"dispensed":dd.log('Result of test dispense: "dispensed"');break;case"not-dispensed":dd.log('not-Result of test dispense: "not dispensed"')}}},{key:"extActiveChannels",value:function(e){dd.log(e)}},{key:"extPickupAndContinue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e?dd.warn("pickup and continue started"):dd.warn("continue in "+e)}},{key:"extStockMinus",value:function(e){dd.log(e)}},{key:"extFailedStock",value:function(){dd.log("Nothing dispensed")}},{key:"extThermometer",value:function(e){switch(e.code){case 6027:dd.warn(e,"Will be remove the thermometer request"),this.program("54","80");break;case 6028:dd.warn(e);break;case 6029:dd.error(e)}dd.log("Nothing dispensed")}},{key:"extEmulate",value:function(e){gn(this,Hi,Cr).call(this,e)}}],n&&un(t.prototype,n),i&&un(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Er(){Er=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new M(r||[]);return i(a,"_invoke",{value:y(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function h(){}function p(){}function _(){}var f={};c(f,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&n.call(g,o)&&(f=g);var m=_.prototype=h.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Tr(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function y(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return E()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=_,i(m,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:p,configurable:!0}),p.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new b(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(m),c(m,s,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Sr(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function Dr(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Sr(o,i,r,a,s,"next",e)}function s(e){Sr(o,i,r,a,s,"throw",e)}a(void 0)}))}}function Lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ar(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Ir(i.key),i)}}function Pr(e,t){Br(e,t),t.add(e)}function jr(e,t,n){return(t=Ir(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e){var t=function(e,t){if("object"!==Tr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Tr(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Tr(t)?t:String(t)}function Nr(e,t,n){Br(e,t),t.set(e,n)}function Br(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Or(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Wr(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Rr(e,t,"set"),n),n}function Fr(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Rr(e,t,"get"))}function Rr(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var zr=new WeakMap,Ur=new WeakMap,qr=new WeakMap,Yr=new WeakMap,Gr=new WeakMap,Hr=new WeakMap,Qr=new WeakMap,Jr=new WeakMap,Vr=new WeakMap,Zr=new WeakMap,Xr=new WeakMap,$r=new WeakMap,Kr=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakMap,io=new WeakMap,ro=new WeakMap,oo=new WeakMap,ao=new WeakMap,so=new WeakMap,co=new WeakMap,lo=new WeakMap,uo=new WeakMap,ho=new WeakMap,po=new WeakMap,_o=new WeakMap,fo=new WeakMap,vo=new WeakMap,go=new WeakMap,mo=new WeakMap,wo=new WeakMap,bo=new WeakMap,yo=new WeakSet,ko=new WeakSet,xo=new WeakSet,Co=new WeakSet,Mo=new WeakSet,To=new WeakSet,Eo=new WeakSet,So=new WeakSet,Do=new WeakSet,Lo=new WeakSet,Ao=new WeakSet,Po=new WeakSet,jo=new WeakSet,Io=new WeakSet,No=new WeakSet,Bo=new WeakSet,Oo=new WeakSet,Wo=new WeakSet,Fo=new WeakSet,Ro=new WeakSet,zo=new WeakSet,Uo=new WeakSet,qo=new WeakMap,Yo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Lr(this,e),Pr(this,Uo),Pr(this,zo),Pr(this,Ro),Pr(this,Fo),Pr(this,Wo),Pr(this,Oo),Pr(this,Bo),Pr(this,No),Pr(this,Io),Pr(this,jo),Pr(this,Po),Pr(this,Ao),Pr(this,Lo),Pr(this,Do),Pr(this,So),Pr(this,Eo),Pr(this,To),Pr(this,Mo),Pr(this,Co),Pr(this,xo),Pr(this,ko),Pr(this,yo),Nr(this,zr,{writable:!0,value:!1}),Nr(this,Ur,{writable:!0,value:void 0}),Nr(this,qr,{writable:!0,value:void 0}),Nr(this,Yr,{writable:!0,value:void 0}),Nr(this,Gr,{writable:!0,value:void 0}),Nr(this,Hr,{writable:!0,value:void 0}),Nr(this,Qr,{writable:!0,value:void 0}),Nr(this,Jr,{writable:!0,value:!0}),Nr(this,Vr,{writable:!0,value:new Uint8Array(0)}),Nr(this,Zr,{writable:!0,value:void 0}),Nr(this,Xr,{writable:!0,value:dd.setLockerConnectionConstant(1)}),Nr(this,$r,{writable:!0,value:1}),Nr(this,Kr,{writable:!0,value:0}),Nr(this,eo,{writable:!0,value:void 0}),Nr(this,to,{writable:!0,value:500}),Nr(this,no,{writable:!0,value:void 0}),Nr(this,io,{writable:!0,value:void 0}),Nr(this,ro,{writable:!0,value:"_id_vl_not_support"}),Nr(this,oo,{writable:!0,value:{_interval_reconnection:void 0,_timer_until_response:void 0,_status_dispense:void 0,_time_response_general:2e3,_time_response_connect_start:500,_time_to_reconnect:7e3,_last_error:{message:null,handler:null,code:null,no_code:666}}}),Nr(this,ao,{writable:!0,value:[]}),Nr(this,so,{writable:!0,value:{baudRate:9600,dataBits:8,stopBits:1,parity:"none",bufferSize:32768,flowControl:"none"}}),Nr(this,co,{writable:!0,value:7e3}),Nr(this,lo,{writable:!0,value:void 0}),Nr(this,uo,{writable:!0,value:2e3}),Nr(this,ho,{writable:!0,value:null}),Nr(this,po,{writable:!0,value:null}),Nr(this,_o,{writable:!0,value:[]}),Nr(this,fo,{writable:!0,value:!0}),Nr(this,vo,{writable:!0,value:{message:null,handler:null,code:null,no_code:666}}),Nr(this,go,{writable:!0,value:0}),Nr(this,mo,{writable:!0,value:!1}),Nr(this,wo,{writable:!0,value:0}),Nr(this,bo,{writable:!0,value:0}),jr(this,"default_alert",!1),Nr(this,qo,{writable:!0,value:{open:{g1:["02","09","40","03","01","74","26","B0","5C","A0","4A","03","1E"],g2:["02","09","40","03","02","A1","35","08","E3","08","CE","03","F0"],g3:["02","09","40","03","03","29","63","B8","7B","48","0D","03","84"],g4:["02","09","40","03","04","64","21","48","2C","20","20","03","6E"],g5:["02","09","40","03","05","0D","04","C0","27","68","68","03","A0"],g6:["02","09","40","03","06","BE","94","A0","3A","F0","25","03","28"],g7:["02","09","40","03","07","93","86","10","B9","98","84","03","EC"],g8:["02","09","40","03","08","75","7C","40","5F","A8","43","03","BE"],g9:["02","09","40","03","09","61","75","C8","23","08","D5","03","60"],g10:["02","09","40","03","0A","C6","97","B8","52","30","A4","03","6E"],g11:["02","09","40","03","0B","ED","A4","40","C7","68","0E","03","E8"],g12:["02","09","40","03","0C","0A","58","C0","1E","50","9F","03","04"],g13:["02","09","40","03","0D","4A","18","00","DE","50","A0","03","3A"],g14:["02","09","40","03","0E","5A","1E","70","0E","D0","D7","03","78"],g15:["02","09","40","03","0F","94","31","88","BC","A0","BB","03","CE"],g16:["02","09","40","03","10","B4","E6","70","1C","A0","D9","03","1C"],g17:["02","09","40","03","11","7D","29","E8","77","E8","01","03","78"],g18:["02","09","40","03","12","D6","F2","90","82","B0","9F","03","40"],g19:["02","09","40","03","13","48","C2","90","D8","40","C8","03","12"],g20:["02","09","40","03","14","BC","3E","30","34","E0","55","03","6C"],g21:["02","09","40","03","15","A0","35","A8","E0","00","75","03","F6"],g22:["02","09","40","03","16","A4","E1","C8","EC","20","72","03","6E"],g23:["02","09","40","03","17","8A","83","D8","9E","50","ED","03","AE"],g24:["02","09","40","03","18","3E","14","20","BA","F0","37","03","24"],g25:["02","09","40","03","19","43","C1","68","C9","18","69","03","00"],g26:["02","09","40","03","1A","E1","F5","08","A3","08","A6","03","40"],g27:["02","09","40","03","1B","16","07","78","42","B0","A5","03","6E"],g28:["02","09","40","03","1C","0C","04","60","24","60","13","03","68"],g29:["02","09","40","03","1D","54","1C","60","FC","A0","8C","03","AE"],g30:["02","09","40","03","1E","8F","85","48","AD","78","A2","03","60"],g31:["02","09","40","03","1F","13","06","10","39","98","1C","03","EC"],g32:["02","09","40","03","20","88","D8","80","98","40","DB","03","B8"],g33:["02","09","40","03","21","2D","B9","68","87","68","61","03","18"],g34:["02","09","40","03","22","32","10","00","96","90","8D","03","C0"],g35:["02","09","40","03","23","0F","5A","30","2D","78","64","03","3C"],g36:["02","09","40","03","24","E7","A2","B0","B5","38","4D","03","5A"],g37:["02","09","40","03","25","71","D0","A0","53","88","E4","03","50"],g38:["02","09","40","03","26","19","08","A0","4B","C8","FD","03","A2"],g39:["02","09","40","03","27","96","87","78","C2","B0","31","03","46"],g40:["02","09","40","03","28","ED","F9","28","C7","68","68","03","98"],g41:["02","09","40","03","29","11","5B","F8","33","88","4B","03","20"],g42:["02","09","40","03","2A","5E","1F","F8","1A","F0","AC","03","9E"],g43:["02","09","40","03","2B","5A","73","58","0E","D0","31","03","FE"],g44:["02","09","40","03","2C","24","0C","A0","6C","20","8B","03","28"],g45:["02","09","40","03","2D","DF","F5","88","9D","F8","21","03","80"],g46:["02","09","40","03","2E","9D","34","80","D7","E8","41","03","32"],g47:["02","09","40","03","2F","9F","35","08","DD","F8","E3","03","00"],g48:["02","09","40","03","30","DF","4A","F0","9D","F8","E1","03","9A"],g49:["02","09","40","03","31","66","CC","20","32","30","E8","03","1A"],g50:["02","09","40","03","32","00","AA","90","00","00","6F","03","2C"],g51:["02","09","40","03","33","C7","42","70","55","38","3C","03","DC"],g52:["02","09","40","03","34","CA","43","18","5E","50","0A","03","EA"],g53:["02","09","40","03","35","AD","39","68","07","68","F5","03","18"],g54:["02","09","40","03","36","19","B3","F8","4B","C8","10","03","BC"],g55:["02","09","40","03","37","47","17","18","D5","38","BD","03","64"],g56:["02","09","40","03","38","31","65","08","93","88","F4","03","C0"],g57:["02","09","40","03","39","19","08","60","4B","C8","D0","03","50"],g58:["02","09","40","03","3A","58","72","D0","08","C0","9F","03","DC"],g59:["02","09","40","03","3B","B9","E8","E0","2B","C8","B2","03","90"],g60:["02","09","40","03","3C","E5","A1","68","AF","28","04","03","D8"],g61:["02","09","40","03","3D","95","31","28","BF","A8","95","03","78"],g62:["02","09","40","03","3E","A8","38","00","F8","40","59","03","04"],g63:["02","09","40","03","3F","EE","A4","60","CA","70","6E","03","8A"],g64:["02","09","40","03","40","25","0C","C0","6F","28","CB","03","6E"],g65:["02","09","40","03","41","C2","96","F0","46","10","E2","03","1A"],g66:["02","09","40","03","42","F0","A5","68","D0","80","92","03","F6"],g67:["02","09","40","03","43","4F","C5","88","ED","78","47","03","D8"],g68:["02","09","40","03","44","0C","04","60","24","60","3B","03","18"],g69:["02","09","40","03","45","DA","F3","D8","8E","D0","4B","03","EA"],g70:["02","09","40","03","46","31","BB","38","93","88","88","03","2C"],g71:["02","09","40","03","47","5F","CA","B0","1D","F8","38","03","F4"],g72:["02","09","40","03","48","F5","51","E8","DF","A8","00","03","38"],g73:["02","09","40","03","49","0C","04","A0","24","60","80","03","6E"],g74:["02","09","40","03","4A","40","15","E8","C0","00","4A","03","36"],g75:["02","09","40","03","4B","67","CD","C8","35","38","B7","03","D8"],g76:["02","09","40","03","4C","2D","64","80","87","68","4F","03","6E"],g77:["02","09","40","03","4D","F1","A5","48","D3","88","89","03","C8"],g78:["02","09","40","03","4E","30","65","68","90","80","5E","03","76"],g79:["02","09","40","03","4F","C3","EB","38","49","18","99","03","DC"],g80:["02","09","40","03","50","2C","B9","08","84","60","24","03","46"],g81:["02","09","40","03","51","3C","14","20","B4","E0","58","03","1E"],g82:["02","09","40","03","52","02","56","30","06","10","F3","03","98"],g83:["02","09","40","03","53","B7","92","F0","25","B8","6C","03","3C"],g84:["02","09","40","03","54","B1","90","60","13","88","93","03","56"],g85:["02","09","40","03","55","AE","3A","90","0A","70","4A","03","2A"],g86:["02","09","40","03","56","02","AB","D8","06","10","F4","03","8E"],g87:["02","09","40","03","57","72","7B","98","56","90","C5","03","8E"],g88:["02","09","40","03","58","50","1A","90","F0","80","C5","03","7C"],g89:["02","09","40","03","59","17","07","18","45","B8","8F","03","68"],g90:["02","09","40","03","5A","9E","34","A0","DA","F0","99","03","A8"]},activate:{g1:["02","09","30","03","01","01","01","28","87","68","1D","03","E0"],g2:["02","09","30","03","01","02","01","48","E3","08","3A","03","A0"],g3:["02","09","30","03","01","03","01","68","42","B0","62","03","C0"],g4:["02","09","30","03","01","04","01","88","71","D8","DA","03","C4"],g5:["02","09","30","03","01","05","01","A8","9D","F8","47","03","B4"],g6:["02","09","30","03","01","06","01","C8","56","90","B9","03","8A"],g7:["02","09","30","03","01","07","01","E8","B2","30","D6","03","80"],g8:["02","09","30","03","01","08","01","08","11","D8","FE","03","0C"],g9:["02","09","30","03","01","09","01","28","6D","78","1B","03","14"],g10:["02","09","30","03","02","01","01","68","99","98","A0","03","F0"],g11:["02","09","30","03","02","02","01","88","C8","C0","18","03","A2"],g12:["02","09","30","03","02","03","01","A8","24","60","35","03","E2"],g13:["02","09","30","03","02","04","01","C8","53","88","AD","03","82"],g14:["02","09","30","03","02","05","01","E8","82","B0","25","03","C2"],g15:["02","09","30","03","02","06","01","08","26","10","4A","03","4A"],g16:["02","09","30","03","02","07","01","28","97","E8","B4","03","DC"],g17:["02","09","30","03","02","08","01","48","F6","90","DC","03","C2"],g18:["02","09","30","03","02","09","01","68","52","30","F9","03","C2"],g19:["02","09","30","03","03","01","01","A8","AE","D0","2E","03","C0"],g20:["02","09","30","03","03","02","01","C8","DD","F8","A6","03","70"],g21:["02","09","30","03","03","03","01","E8","39","98","C3","03","B0"],g22:["02","09","30","03","03","04","01","08","68","C0","3B","03","A6"],g23:["02","09","30","03","03","05","01","28","94","E0","A8","03","C8"],g24:["02","09","30","03","03","06","01","48","3B","48","D8","03","DC"],g25:["02","09","30","03","03","07","01","68","A9","18","37","03","D0"],g26:["02","09","30","03","03","08","01","88","08","C0","5F","03","2E"],g27:["02","09","30","03","03","09","01","A8","64","60","7C","03","E0"],g28:["02","09","30","03","04","01","01","E8","C0","00","B1","03","A6"],g29:["02","09","30","03","04","02","01","08","EC","20","1E","03","E6"],g30:["02","09","30","03","04","03","01","28","48","C0","3B","03","A6"],g31:["02","09","30","03","04","04","01","48","A4","60","58","03","EE"],g32:["02","09","30","03","04","05","01","68","18","40","CD","03","C6"],g33:["02","09","30","03","04","06","01","88","47","68","45","03","DA"],g34:["02","09","30","03","04","07","01","A8","B8","40","AF","03","C6"],g35:["02","09","30","03","04","08","01","C8","14","E0","CC","03","C6"],g36:["02","09","30","03","04","09","01","E8","40","00","39","03","A6"],g37:["02","09","30","03","05","01","01","28","9F","A8","79","03","58"],g38:["02","09","30","03","05","02","01","48","FB","48","96","03","50"],g39:["02","09","30","03","05","03","01","68","27","68","03","03","18"],g40:["02","09","30","03","05","04","01","88","86","10","2B","03","0E"],g41:["02","09","30","03","05","05","01","A8","B2","30","98","03","88"],g42:["02","09","30","03","05","06","01","C8","29","18","18","03","D8"],g43:["02","09","30","03","05","07","01","E8","58","40","90","03","58"],g44:["02","09","30","03","05","08","01","08","B4","E0","AD","03","C6"],g45:["02","09","30","03","05","09","01","28","E0","00","1A","03","E4"],g46:["02","09","30","03","06","01","01","68","0C","20","9F","03","E6"],g47:["02","09","30","03","06","02","01","88","3B","48","17","03","D2"],g48:["02","09","30","03","06","03","01","A8","AC","20","81","03","9A"],g49:["02","09","30","03","06","04","01","C8","08","C0","9E","03","A6"],g50:["02","09","30","03","06","05","01","E8","64","60","BB","03","6E"],g51:["02","09","30","03","06","06","01","08","08","C0","E0","03","1A"],g52:["02","09","30","03","06","07","01","28","37","E8","58","03","94"],g53:["02","09","30","03","06","08","01","48","66","10","D0","03","DA"],g54:["02","09","30","03","06","09","01","68","C2","B0","ED","03","C2"],g55:["02","09","30","03","07","01","01","A8","F1","D8","7D","03","C0"],g56:["02","09","30","03","07","02","01","C8","1D","F8","EA","03","F8"],g57:["02","09","30","03","07","03","01","E8","79","98","07","03","30"],g58:["02","09","30","03","07","04","01","08","EA","70","71","03","DA"],g59:["02","09","30","03","07","05","01","28","49","18","99","03","D8"],g60:["02","09","30","03","07","06","01","48","ED","78","BE","03","58"],g61:["02","09","30","03","07","07","01","68","49","18","DB","03","D8"],g62:["02","09","30","03","07","08","01","88","78","40","53","03","D6"],g63:["02","09","30","03","07","09","01","A8","D4","E0","70","03","D8"],g64:["02","09","30","03","08","01","01","E8","30","80","A5","03","CE"],g65:["02","09","30","03","08","02","01","08","5F","A8","1D","03","D2"],g66:["02","09","30","03","08","03","01","28","8B","C8","8A","03","D0"],g67:["02","09","30","03","08","04","01","48","F9","98","E9","03","F6"],g68:["02","09","30","03","08","05","01","68","55","38","06","03","34"],g69:["02","09","30","03","08","06","01","88","FC","A0","36","03","D6"],g70:["02","09","30","03","08","07","01","A8","58","40","53","03","D6"],g71:["02","09","30","03","08","08","01","C8","84","60","C0","03","D6"],g72:["02","09","30","03","08","09","01","E8","B3","88","38","03","D0"],g73:["02","09","30","03","09","01","01","28","0F","28","6D","03","50"],g74:["02","09","30","03","09","02","01","48","3E","50","E5","03","F2"],g75:["02","09","30","03","09","03","01","68","6A","70","52","03","10"],g76:["02","09","30","03","09","04","01","88","96","90","BF","03","06"],g77:["02","09","30","03","09","05","01","A8","F5","38","E7","03","B4"],g78:["02","09","30","03","09","06","01","C8","69","18","5C","03","D0"],g79:["02","09","30","03","09","07","01","E8","95","38","C9","03","B8"],g80:["02","09","30","03","09","08","01","08","06","10","33","03","16"],g81:["02","09","30","03","09","09","01","28","65","B8","5B","03","94"],g82:["02","09","30","03","0A","01","01","68","C1","58","90","03","50"],g83:["02","09","30","03","0A","02","01","88","F0","80","08","03","C2"],g84:["02","09","30","03","0A","03","01","A8","4C","20","25","03","D2"],g85:["02","09","30","03","0A","04","01","C8","78","40","92","03","56"],g86:["02","09","30","03","0A","05","01","E8","A7","68","0A","03","18"],g87:["02","09","30","03","0A","06","01","08","48","C0","24","03","92"],g88:["02","09","30","03","0A","07","01","28","A4","60","41","03","9A"],g89:["02","09","30","03","0A","08","01","48","D0","80","AE","03","8E"],g90:["02","09","30","03","0A","09","01","68","FF","A8","26","03","20"]},deactivate:{g1:["02","09","30","03","01","01","00","20","F6","90","AB","03","D6"],g2:["02","09","30","03","01","02","00","40","AF","28","1D","03","E2"],g3:["02","09","30","03","01","03","00","60","FC","A0","03","03","06"],g4:["02","09","30","03","01","04","00","80","49","18","E9","03","06"],g5:["02","09","30","03","01","05","00","A0","99","98","DA","03","44"],g6:["02","09","30","03","01","06","00","C0","DD","F8","9F","03","46"],g7:["02","09","30","03","01","07","00","E0","3C","A0","C7","03","86"],g8:["02","09","30","03","01","08","00","00","8C","20","B8","03","26"],g9:["02","09","30","03","01","09","00","20","D3","88","88","03","C0"],g10:["02","09","30","03","02","01","00","60","1A","F0","70","03","C2"],g11:["02","09","30","03","02","02","00","80","6A","70","61","03","C0"],g12:["02","09","30","03","02","03","00","A0","B7","E8","47","03","82"],g13:["02","09","30","03","02","04","00","C0","01","58","22","03","86"],g14:["02","09","30","03","02","05","00","E0","4B","C8","FD","03","A2"],g15:["02","09","30","03","02","06","00","00","68","C0","33","03","A4"],g16:["02","09","30","03","02","07","00","20","8B","C8","7F","03","22"],g17:["02","09","30","03","02","08","00","40","E4","60","91","03","64"],g18:["02","09","30","03","02","09","00","60","31","D8","77","03","CE"],g19:["02","09","30","03","03","01","00","A0","7B","48","6A","03","C0"],g20:["02","09","30","03","03","02","00","C0","C8","C0","50","03","A2"],g21:["02","09","30","03","03","03","00","E0","1B","48","4C","03","C4"],g22:["02","09","30","03","03","04","00","00","5F","A8","11","03","DA"],g23:["02","09","30","03","03","05","00","20","AF","28","02","03","98"],g24:["02","09","30","03","03","06","00","40","08","C0","14","03","A2"],g25:["02","09","30","03","03","07","00","60","46","10","C3","03","CA"],g26:["02","09","30","03","03","08","00","80","AE","D0","0C","03","C2"],g27:["02","09","30","03","03","09","00","A0","CB","C8","42","03","D0"],g28:["02","09","30","03","04","01","00","E0","F1","D8","B1","03","46"],g29:["02","09","30","03","04","02","00","00","3E","50","97","03","C4"],g30:["02","09","30","03","04","03","00","20","52","30","AC","03","D2"],g31:["02","09","30","03","04","04","00","40","AB","C8","BE","03","A6"],g32:["02","09","30","03","04","05","00","60","F8","40","A4","03","46"],g33:["02","09","30","03","04","06","00","80","39","98","5E","03","46"],g34:["02","09","30","03","04","07","00","A0","83","08","39","03","2A"],g35:["02","09","30","03","04","08","00","C0","21","58","48","03","C6"],g36:["02","09","30","03","04","09","00","E0","6B","C8","23","03","56"],g37:["02","09","30","03","05","01","00","20","A9","18","EA","03","44"],g38:["02","09","30","03","05","02","00","40","F9","98","DB","03","C6"],g39:["02","09","30","03","05","03","00","60","43","08","B6","03","A0"],g40:["02","09","30","03","05","04","00","80","6C","20","18","03","EE"],g41:["02","09","30","03","05","05","00","A0","B3","88","E8","03","48"],g42:["02","09","30","03","05","06","00","C0","D6","90","34","03","8A"],g43:["02","09","30","03","05","07","00","E0","20","00","0F","03","F6"],g44:["02","09","30","03","05","08","00","00","61","58","C9","03","C6"],g45:["02","09","30","03","05","09","00","20","FC","A0","CD","03","86"],g46:["02","09","30","03","06","01","00","60","3A","F0","94","03","02"],g47:["02","09","30","03","06","02","00","80","99","98","BC","03","02"],g48:["02","09","30","03","06","03","00","A0","D4","E0","60","03","CA"],g49:["02","09","30","03","06","04","00","C0","2D","78","72","03","DE"],g50:["02","09","30","03","06","05","00","E0","7A","F0","58","03","0A"],g51:["02","09","30","03","06","06","00","00","C4","60","33","03","AC"],g52:["02","09","30","03","06","07","00","20","0E","D0","0E","03","CA"],g53:["02","09","30","03","06","08","00","40","4F","28","C8","03","DA"],g54:["02","09","30","03","06","09","00","60","E1","58","AB","03","46"],g55:["02","09","30","03","07","01","00","A0","28","C0","93","03","E6"],g56:["02","09","30","03","07","02","00","C0","84","60","B0","03","AA"],g57:["02","09","30","03","07","03","00","E0","CE","D0","8B","03","4A"],g58:["02","09","30","03","07","04","00","00","1E","50","7C","03","0A"],g59:["02","09","30","03","07","05","00","20","59","98","20","03","F8"],g60:["02","09","30","03","07","06","00","40","A9","18","11","03","DA"],g61:["02","09","30","03","07","07","00","60","F9","98","02","03","38"],g62:["02","09","30","03","07","08","00","80","40","00","D2","03","26"],g63:["02","09","30","03","07","09","00","A0","9F","A8","FA","03","58"],g64:["02","09","30","03","08","01","00","E0","E6","10","E2","03","C6"],g65:["02","09","30","03","08","02","00","00","39","98","DE","03","4E"],g66:["02","09","30","03","08","03","00","20","8F","28","E5","03","52"],g67:["02","09","30","03","08","04","00","40","D9","98","C0","03","F6"],g68:["02","09","30","03","08","05","00","60","23","08","9B","03","E6"],g69:["02","09","30","03","08","06","00","80","61","58","4A","03","C6"],g70:["02","09","30","03","08","07","00","A0","BA","F0","5C","03","82"],g71:["02","09","30","03","08","08","00","C0","F5","38","00","03","36"],g72:["02","09","30","03","08","09","00","E0","99","98","25","03","FE"],g73:["02","09","30","03","09","01","00","20","DD","F8","02","03","34"],g74:["02","09","30","03","09","02","00","40","09","18","6F","03","0E"],g75:["02","09","30","03","09","03","00","60","50","80","3F","03","BE"],g76:["02","09","30","03","09","04","00","80","A0","00","30","03","26"],g77:["02","09","30","03","09","05","00","A0","EA","70","0B","03","06"],g78:["02","09","30","03","09","06","00","C0","34","E0","E6","03","C6"],g79:["02","09","30","03","09","07","00","E0","84","60","D7","03","E6"],g80:["02","09","30","03","09","08","00","00","C8","C0","9C","03","AE"],g81:["02","09","30","03","09","09","00","20","63","08","A0","03","D0"],g82:["02","09","30","03","0A","01","00","60","A4","60","72","03","E6"],g83:["02","09","30","03","0A","02","00","80","F4","E0","63","03","C4"],g84:["02","09","30","03","0A","03","00","A0","3B","48","33","03","D2"],g85:["02","09","30","03","0A","04","00","C0","91","D8","3A","03","86"],g86:["02","09","30","03","0A","05","00","E0","DB","48","15","03","52"],g87:["02","09","30","03","0A","06","00","00","25","B8","F0","03","5A"],g88:["02","09","30","03","0A","07","00","20","75","38","E1","03","BA"],g89:["02","09","30","03","0A","08","00","40","BF","A8","BC","03","D2"],g90:["02","09","30","03","0A","09","00","60","54","E0","AA","03","46"]}}});var i="color:white;font-family:system-ui;font-size:2rem;-webkit-text-stroke: 1px black;font-weight:bold";console.debug("%cLocker webserial. %s",i,"\n\rCreated by danidoble."),dd.addButtonToPermissions("Locker",Fr(this,$r)),null!==t&&Wr(this,ao,t),null!==n&&Wr(this,so,{baudRate:n.baudRate?n.baudRate:9600,dataBits:n.dataBits?n.dataBits:8,stopBits:n.stopBits?n.stopBits:1,parity:n.parity?n.parity:"none",bufferSize:n.bufferSize?n.bufferSize:32768,flowControl:n.flowControl?n.flowControl:"none"}),Or(this,To,ta).call(this)}var t,n,i,r,o;return t=e,n=[{key:"clickConnect",value:function(){var e=Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fr(this,Ur)){e.next=5;break}return e.next=3,Or(this,ko,Qo).call(this);case 3:return Or(this,So,ia).call(this,!1),e.abrupt("return");case 5:return e.next=7,Or(this,yo,Go).call(this);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:(o=Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fr(this,zr)&&this.extAppMessage({description:"Disconnected",message:"disconnect",no_code:303}),e.next=3,Or(this,ko,Qo).call(this);case 3:Wr(this,zr,!1),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr);case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"forgetSerial",value:function(){"serial"in navigator&&"forget"in SerialPort.prototype?Or(this,Co,Xo).call(this).then((function(){dd.log(__("Port forgotten"))})):dd.warn("Navigator don't support forget by now")}},{key:"initSerial",value:(r=Dr(Er().mark((function e(){var t,n=arguments;return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:1,dd.isWebserialSupported(Fr(this,ro))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Or(this,yo,Go).call(this,t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setBytesConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Wr(this,$r,e),Wr(this,Xr,dd.setLockerConnectionConstant(e)),dd.addButtonToPermissions("Locker",Fr(this,$r))}},{key:"setDOMElLog",value:function(e){Wr(this,ho,document.getElementById(e))}},{key:"setDOMElsBtnConnect",value:function(e){Wr(this,po,document.querySelectorAll(e))}},{key:"softReload",value:function(){Wr(this,no,Fr(this,oo)._interval_reconnection),Wr(this,eo,Fr(this,oo)._timer_until_response),Wr(this,lo,Fr(this,oo)._status_dispense),Wr(this,uo,Fr(this,oo)._time_response_general),Wr(this,co,Fr(this,oo)._time_to_reconnect),Wr(this,vo,Fr(this,oo)._last_error),this._log_time_door_open=[{name:"open",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()}],this._log_time_door_close=[{name:"close",listen_since:(new Date).getTime(),listen_until:(new Date).getTime()}],this._counter_sense_door=1,this._interval_sense_door=void 0,this._limit_sense_door=30,this.extSoftReload()}},{key:"sentBytes",value:function(e){dd.log("Sent to device",e)}},{key:"connect",value:function(){Or(this,Io,la).call(this,Fr(this,Xr),"connect")}},{key:"reconnect",value:function(){this.extReconnectionMessage()}},{key:"customCode",value:function(e){Or(this,Io,la).call(this,e,"custom code")}},{key:"clearErrors",value:function(){Wr(this,vo,Fr(this,oo)._last_error)}},{key:"reloadPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];void 0===Fr(this,fo)?dd.error(dd.__("You must declare a boolean value for '#_reload_when_finished'")):Fr(this,fo)&&(!0===e?location.reload():this.softReload())}},{key:"open",value:function(e){Or(this,Wo,ha).call(this,e)&&Or(this,Io,la).call(this,Fr(this,qo).open["g"+parseInt(e)],"open cell",e)}},{key:"activate",value:function(e){Or(this,Wo,ha).call(this,e)&&Or(this,Io,la).call(this,Fr(this,qo).activate["g"+e],"config cell")}},{key:"deactivate",value:function(e){Or(this,Wo,ha).call(this,e)&&Or(this,Io,la).call(this,Fr(this,qo).deactivate["g"+e],"config cell")}},{key:"testMatrix",value:function(){var e=1,t=this;Wr(t,mo,!0);var n=setInterval((function(){if(e>=90)return clearInterval(n),n=0,void(e=0);t.open(e),e+=1}),1)}},{key:"enableAllMatrix",value:function(){var e=1,t=setInterval((function(){if(e>=90)return clearInterval(t),t=0,void(e=0);(void 0).activate(e),e+=1}),900)}},{key:"disableAllMatrix",value:function(){var e=1,t=this,n=setInterval((function(){if(e>=90)return clearInterval(n),n=0,void(e=0);t.deactivate(e),e+=1}),900)}},{key:"dividedCodeMessage",value:function(e,t){dd.warn(e,t)}},{key:"__isConnected",get:function(){return Fr(this,zr)},set:function(e){Wr(this,zr,e),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr)}},{key:"__originalValues",get:function(){return Fr(this,oo)}},{key:"__serialPort",get:function(){return Fr(this,Ur)}},{key:"toString",value:function(){var e=this;return JSON.stringify({__class:"Locker",__number_device:Fr(e,$r),__connected:Fr(e,zr),__connection:Fr(e,Xr)})}},{key:"extSerialMessage",value:function(e){dd.log(e)}},{key:"extAppMessage",value:function(e){dd.log(e)}},{key:"extReconnectionMessage",value:function(){dd.log(dd.__("Trying reconnect"))}},{key:"extTimeoutMessage",value:function(e,t){dd.warn("Timeout",e,t)}},{key:"extConnectionLost",value:function(){dd.log("Make your own function with this same name","Example: lock1.extConnectionLost = function(){console.log('Customize me')}")}},{key:"extSoftReload",value:function(){dd.log("Make your own function with this same name","Example: lock1.extSoftReload = function(){console.log('Customize me')}")}},{key:"extSentData",value:function(e){dd.log(e)}},{key:"extUnexpectedDisconnection",value:function(e){dd.warn(dd.__("There was an unexpected disconnection. an attempt was made to disconnect the port but it was already disconnected"),e)}},{key:"extWithDevice",value:function(){dd.log(dd.__("Device connected"))}},{key:"extWithoutDevice",value:function(){dd.log(dd.__("Without device"))}},{key:"extPercentageTestMatrix",value:function(e){dd.log(dd.__("Percentage of test matrix")+": "+e.format(0,3,",",".")+"%")}},{key:"extEmulate",value:function(e){Or(this,Uo,va).call(this,e)}}],n&&Ar(t.prototype,n),i&&Ar(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Go(){return Ho.apply(this,arguments)}function Ho(){return Ho=Dr(Er().mark((function e(){var t,n,i,r,o,a=this,s=arguments;return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:0,e.prev=1,t=Fr(this,ao),e.next=5,navigator.serial.getPorts({filters:t});case 5:if(!((n=e.sent).length>0)){e.next=47;break}if(e.prev=7,!(Fr(this,Kr)<n.length)){e.next=22;break}if(i=Fr(this,Kr),r=n[i].getInfo(),!(t.length>0)){e.next=19;break}if(r.usbProductId!==t[0].usbProductId||r.usbVendorId!==t[0].usbVendorId){e.next=16;break}Wr(this,Ur,n[i]),e.next=17;break;case 16:throw new Error("The port is already open.");case 17:e.next=20;break;case 19:Wr(this,Ur,n[i]);case 20:e.next=37;break;case 22:return Wr(this,Kr,0),e.prev=23,e.t0=Wr,e.t1=this,e.t2=Ur,e.next=29,navigator.serial.requestPort({filters:t});case 29:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.next=37;break;case 33:return e.prev=33,e.t4=e.catch(23),Or(this,Eo,na).call(this,e.t4),e.abrupt("return");case 37:if(Fr(this,Ur)){e.next=39;break}throw new Error("Select another port please");case 39:e.next=45;break;case 41:return e.prev=41,e.t5=e.catch(7),Or(this,Eo,na).call(this,e.t5),e.abrupt("return");case 45:e.next=61;break;case 47:return e.prev=47,e.t6=Wr,e.t7=this,e.t8=Ur,e.next=53,navigator.serial.requestPort({filters:t});case 53:e.t9=e.sent,(0,e.t6)(e.t7,e.t8,e.t9),e.next=61;break;case 57:return e.prev=57,e.t10=e.catch(47),Or(this,Eo,na).call(this,e.t10),e.abrupt("return");case 61:e.next=66;break;case 63:e.prev=63,e.t11=e.catch(1),Or(this,Eo,na).call(this,e.t11);case 66:return e.prev=66,Or(this,So,ia).call(this,!0),e.next=70,Fr(this,Ur).open(Fr(this,so));case 70:return o=this,Fr(this,Ur).ondisconnect=function(e){Or(o,Bo,ua).call(o,e)},Fr(this,Ur).onconnect=function(e){Or(o,Bo,ua).call(o,e)},this.extSentData({message:"Locker  "+dd.__("Opening with"),hex:Fr(this,Xr)}),Wr(this,_o,[]),Wr(this,eo,setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(a,Mo,Ko).call(a,Fr(a,Xr),"connect_start");case 2:case"end":return e.stop()}}),e)}))),Fr(this,to))),Or(this,Lo,oa).call(this,Fr(this,Xr)),e.next=79,Or(this,xo,Vo).call(this);case 79:e.next=84;break;case 81:e.prev=81,e.t12=e.catch(66),Or(this,Eo,na).call(this,e.t12);case 84:return e.abrupt("return",0);case 85:case"end":return e.stop()}}),e,this,[[1,63],[7,41],[23,33],[47,57],[66,81]])}))),Ho.apply(this,arguments)}function Qo(){return Jo.apply(this,arguments)}function Jo(){return(Jo=Dr(Er().mark((function e(){var t,n=this;return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Fr(this,qr)){e.next=8;break}return(t=Fr(this,qr).cancel())&&t.then((function(e){e&&dd.log(e)})).catch((function(e){Or(n,Eo,na).call(n,e)})),e.next=6,Fr(this,Yr);case 6:Wr(this,qr,null),Wr(this,Yr,null);case 8:if(!Fr(this,Qr)){e.next=17;break}return e.next=11,Fr(this,Qr).getWriter().close();case 11:return e.next=13,Fr(this,Qr).getWriter().close();case 13:return e.next=15,Fr(this,Gr);case 15:Wr(this,Qr,null),Wr(this,Gr,null);case 17:Wr(this,Ur,null),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),Or(this,Eo,na).call(this,e.t0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})))).apply(this,arguments)}function Vo(){return Zo.apply(this,arguments)}function Zo(){return(Zo=Dr(Er().mark((function e(){var t,n,i=this;return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fr(this,Ur).readable||!Fr(this,Jr)){e.next=28;break}Wr(this,qr,Fr(this,Ur).readable.getReader()),e.prev=2;case 3:return e.next=6,Fr(this,qr).read();case 6:if(t=e.sent,n=t.value,!t.done){e.next=13;break}return Fr(this,qr).releaseLock(),Wr(this,Jr,!1),e.abrupt("break",18);case 13:Or(this,Do,ra).call(this,n),void 0!==Fr(this,Zr)&&(clearTimeout(Fr(this,Zr)),Wr(this,Zr,void 0)),Wr(this,Zr,setTimeout((function(){var e=[];for(var t in Fr(i,Vr))e.push(Fr(i,Vr)[t].toString(16));Fr(i,Vr)&&Or(i,Ao,aa).call(i,e),Wr(i,Vr,new Uint8Array(0))}),400)),e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),Or(this,Eo,na).call(this,e.t0);case 23:return e.prev=23,Fr(this,qr).releaseLock(),e.finish(23);case 26:e.next=0;break;case 28:return Wr(this,Jr,!0),e.next=31,Fr(this,Ur).close();case 31:case"end":return e.stop()}}),e,this,[[2,20,23,26]])})))).apply(this,arguments)}function Xo(){return $o.apply(this,arguments)}function $o(){return($o=Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serial"in navigator)||!("forget"in SerialPort.prototype)){e.next=3;break}return e.next=3,Fr(this,Ur).forget();case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ko(e,t){return ea.apply(this,arguments)}function ea(){return ea=Dr(Er().mark((function e(t,n){var i=arguments;return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.length>2&&void 0!==i[2]?i[2]:0,dd.log("code",n),Fr(this,vo).message=dd.__("Operation response timed out."),Fr(this,vo).handler=n,Fr(this,vo).code=t,clearTimeout(Fr(this,eo)),Wr(this,eo,void 0),"connect"!==Fr(this,vo).handler){e.next=12;break}Or(this,Ro,_a).call(this),this.reconnect(),e.next=19;break;case 12:if("connect_start"!==Fr(this,vo).handler){e.next=19;break}return Or(this,ko,Qo).call(this),Wr(this,zr,!1),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr),Wr(this,Kr,Fr(this,Kr)+1),e.next=19,Or(this,yo,Go).call(this);case 19:this.extTimeoutMessage(t,n);case 20:case"end":return e.stop()}}),e,this)}))),ea.apply(this,arguments)}function ta(){Object.freeze(Fr(this,oo))}function na(e){var t=this;if(null===document.getElementById(_id_vl_btn_open_modal_permissions))return dd.error(e),void dd.error("_id_vl_btn_open_modal_permissions doesn't exist in DOM");e.toString().includes("Failed to execute 'requestPort' on 'Serial': Must be handling a user gesture to show a permission request")?(document.getElementById(window["_id_lock"+Fr(this,$r)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("The port is already open.")?(dd.debug(e),dd.warn(dd.__("Failed to open serial port. Trying again.")),Or(this,Fo,pa).call(this),Or(this,ko,Qo).call(this),setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wr(t,Kr,Fr(t,Kr)+1),e.next=3,Or(t,yo,Go).call(t);case 3:case"end":return e.stop()}}),e)}))),500),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Cannot read properties of undefined (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),Or(this,Ro,_a).call(this),Or(this,ko,Qo).call(this),setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t,yo,Go).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Cannot read properties of null (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),Or(this,Ro,_a).call(this),Or(this,ko,Qo).call(this),setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t,yo,Go).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")?dd.warn(dd.__("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")):e.toString().includes("The port is closed.")?document.getElementById(_id_vl_btn_open_modal_permissions).click():e.toString().includes("Select another port please")||e.toString().includes("No port selected by the user")||e.toString().includes("Cannot read property 'writable' of null")?(document.getElementById(window["_id_lock"+Fr(this,$r)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Cannot read property 'writable' of undefined")?(document.getElementById(window["_id_lock"+Fr(this,$r)+"_btn_connect_serial"]).classList.remove("hidden"),Or(this,Ro,_a).call(this),setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initSerial();case 2:case"end":return e.stop()}}),e)}))),100)):e.toString().includes("The device has been lost")?(document.getElementById(window["_id_lock"+Fr(this,$r)+"_btn_connect_serial"]).classList.remove("hidden"),Or(this,Ro,_a).call(this)):e.toString().includes("Failed to open serial port")?(dd.warn(dd.__("Failed to open serial port. Trying again.")),Or(this,Ro,_a).call(this),Or(this,ko,Qo).call(this),setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t,yo,Go).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("navigator.serial is undefined")?document.getElementById(Fr(this,ro)).classList.remove("hidden"):e.toString().includes("This readable stream reader has been released and cannot be used to cancel its previous owner stream")?(document.getElementById(window["_id_lock"+Fr(this,$r)+"_btn_connect_serial"]).classList.remove("hidden"),Or(this,Ro,_a).call(this),dd.checkDevicesConnected(),this.extUnexpectedDisconnection(e)):dd.error(e)}function ia(e){Wr(this,zr,e),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr),dd.setDeviceStatus("Locker",Fr(this,$r),e);var t=dd.__("Connect");if(e?t=dd.__("Disconnect"):(this.__connected_devices-=1,dd.checkDevicesConnected()),null!==Fr(this,po))for(var n=0;n<Fr(this,po).length;n++)Fr(this,po)[n].textContent=t}function ra(e){if(void 0!==e){var t=new Uint8Array(Fr(this,Vr).length+e.byteLength);t.set(Fr(this,Vr),0),t.set(new Uint8Array(e),Fr(this,Vr).length),Wr(this,Vr,t)}}function oa(e){try{if(void 0===Fr(this,Ur))throw new Error("The port is closed.");var t=new Uint8Array(e),n=Fr(this,Ur).writable.getWriter();n.write(t).then((function(e){e&&dd.log(e)})),n.releaseLock()}catch(e){Or(this,Eo,na).call(this,e)}}function aa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;0===e?Or(this,jo,ca).call(this,t):e&&e.length>0?(Wr(this,zr,!0),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr),void 0!==Fr(this,no)&&(clearInterval(Fr(this,no)),Wr(this,no,void 0)),clearTimeout(Fr(this,eo)),Wr(this,eo,void 0),Or(this,Po,sa).call(this,e)):this.dividedCodeMessage(e,t)}function sa(e){var t={cell:null,finished_test:null};switch(e[1].toString().toUpperCase()){case"8":dd.checkDevicesConnected(),t.name=__("Connection with the serial device completed."),t.description=__("Your connection with the serial device was successfully completed."),t.request=__("connect"),t.no_code=100;break;case"7":if("5"===e[4].toString().toUpperCase())t.name=__("Cell inactive."),t.description=__("The selected cell is inactive or doesn't exist.")+" -- "+Fr(this,go),t.cell=Fr(this,go),t.request=__("open cell"),t.no_code=101,dd.warn(Fr(this,mo),Fr(this,go)>=89),Fr(this,mo)&&Fr(this,go)>=89?(Wr(this,bo,100),Or(this,zo,fa).call(this),t.finished_test=!0,Wr(this,mo,!1),Wr(this,go,0)):Fr(this,mo)&&(Wr(this,bo,100*Fr(this,go)/89),Or(this,zo,fa).call(this),t.finished_test=!1);else t.name=__("Cell open."),t.description=__("The selected cell was open successfully.")+" -- "+Fr(this,go),t.cell=Fr(this,go),t.request=__("open cell"),t.no_code=102,Fr(this,mo)&&Fr(this,go)>=89?(t.finished_test=!0,Wr(this,bo,100),Or(this,zo,fa).call(this),Wr(this,mo,!1),Wr(this,go,0)):Fr(this,mo)&&(t.finished_test=!1,Wr(this,bo,100*Fr(this,go)/89),Or(this,zo,fa).call(this));break;case"6":t.name=__("Configuration applied."),t.description=__("The configuration was successfully applied."),t.request=__("configure cell"),t.no_code=103;break;default:t.request=dd.__("undefined"),t.name=dd.__("Response unrecognized"),t.description=dd.__("The response of application was received, but dont identify with any of current parameters"),t.no_code=404}this.extSerialMessage({code:e,message:t.name,cell:t.cell,description:t.description,request:t.request,no_code:t.no_code})}function ca(e){clearTimeout(Fr(this,eo));var t={},n=this;switch(t.name="",t.description="",e.no_code){case 700:t.name=e.message,t.description=dd.__("The application connect successfully with website");break;case 701:t.name=e.message,t.description=dd.__("The connection with the serial device was ended by system request");break;case 702:t.name=e.message,t.description=dd.__("The last instruction is not compatible with this version of the application");break;case 703:Or(this,Ro,_a).call(this),void 0===Fr(this,no)&&Wr(this,no,setInterval((function(){n.reconnect()}),Fr(n,co))),t.name=dd.__("Serial device disconnected"),t.description=e.description;break;case 704:t.name=e.message,t.description=e.description;break;case 705:Or(this,Ro,_a).call(this),void 0===Fr(this,no)&&Wr(this,no,setInterval((function(){n.reconnect()}),Fr(n,co))),t.name=dd.__("Connection with the serial device is not complete"),t.description=dd.__("Check the device is connected correctly");break;case 706:t.name=e.message,t.description=dd.__("The port was not linked to the serial device, so we closed");break;case 707:t.name=e.message,t.description=dd.__("The response was not received in the time specified by the application");break;default:t.name=e.message,t.description=dd.__("Oops! you ran into an unknown error")}this.extAppMessage({message:t.name,description:t.description,no_code:e.no_code})}function la(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];e.forEach((function(e){r.push(dd.hexMaker(e))})),r=dd.add0x(r),void 0!==Fr(this,eo)?(Fr(this,_o).push({bytes:r,to_do:n,number:i}),dd.warn(dd.__("You send a new command to serial device before have an answer")+". "+dd.__("Commands in queue:")+" "+Fr(this,_o).length),Wr(this,io,setInterval((function(){void 0===Fr(t,eo)&&Fr(t,_o).length>0&&(dd.log(dd.__("Sending in delay mode")+". "+dd.__("Commands in queue:")+" "+Fr(t,_o).length),clearInterval(Fr(t,io)),Wr(t,io,void 0),"open cell"===Fr(t,_o)[0].to_do&&Wr(t,go,Fr(t,_o)[0].number),Wr(t,eo,setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fr(t,_o)[0].bytes){e.next=3;break}return e.next=3,Or(t,Mo,Ko).call(t,Fr(t,_o)[0].bytes,Fr(t,_o)[0].to_do,Fr(t,_o)[0].number);case 3:case"end":return e.stop()}}),e)}))),Fr(t,uo))),t.extSentData({message:n,number:i,hex:Fr(t,_o)[0].bytes}),Or(t,Lo,oa).call(t,Fr(t,_o)[0].bytes),Wr(t,_o,Fr(t,_o).splice(1)))}),500))):(Wr(this,_o,[]),"open cell"===n&&Wr(this,go,i),Wr(this,eo,setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Or(t,Mo,Ko).call(t,r,n,i);case 2:case"end":return e.stop()}}),e)}))),Fr(this,uo))),this.extSentData({message:n,number:i,hex:r}),Or(this,Lo,oa).call(this,r))}function da(e){Wr(this,zr,!1),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr),dd.warn(e),this.extConnectionLost(e)}function ua(e){var t=this;Wr(this,zr,!1),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr),Or(this,No,da).call(this,e),Wr(this,Kr,0),setTimeout(Dr(Er().mark((function e(){return Er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.disconnect();case 2:case"end":return e.stop()}}),e)}))),100)}function ha(e){var t=parseInt(e);return!isNaN(t)&&t>0&&t<91&&void 0!==Fr(this,qo).open["g"+t]&&void 0!==Fr(this,qo).activate["g"+t]&&void 0!==Fr(this,qo).deactivate["g"+t]||(dd.error("The number isn't valid"),!1)}function pa(){this.extWithDevice()}function _a(){this.extWithoutDevice()}function fa(){var e=this;this.default_alert&&(Fr(e,bo)>=0&&Fr(e,bo)<100?"function"==typeof Swal.fire&&(Swal.isVisible()||Swal.fire({title:"¡En proceso!",html:"¡Espera se está realizando una prueba de matriz!. Este mensaje se cerrará cuando termine.<br/><b></b>",icon:"warning",showCancelButton:!1,showConfirmButton:!1,didOpen:function(){Swal.showLoading();var t=Swal.getHtmlContainer().querySelector("b");Wr(e,wo,setInterval((function(){t.textContent=Fr(e,bo).format(0,3,",",".")+"%"}),100))},allowOutsideClick:!1})):Fr(e,bo)>=100&&"function"==typeof Swal.fire&&Swal.isVisible()&&(clearInterval(Fr(this,wo)),Wr(this,wo,0),Swal.close())),e.extPercentageTestMatrix(Fr(e,bo))}function va(e){"object"===Tr(e.code)?(dd.warn(dd.__("Executing emulator be carefully")),Fr(this,zr)||(Wr(this,zr,!0),window["owl_lock"+Fr(this,$r)+"_connected"]=Fr(this,zr),void 0!==Fr(this,no)&&(clearInterval(Fr(this,no)),Wr(this,no,void 0))),clearTimeout(Fr(this,eo)),Wr(this,eo,void 0),Or(this,Po,sa).call(this,e.code)):dd.error(dd.__("Invalid data to emulate"))}const ga=Yo;function ma(e){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(e)}function wa(){wa=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new M(r||[]);return i(a,"_invoke",{value:y(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function h(){}function p(){}function _(){}var f={};c(f,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&n.call(g,o)&&(f=g);var m=_.prototype=h.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==ma(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function y(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return E()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=_,i(m,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:p,configurable:!0}),p.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new b(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(m),c(m,s,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function ba(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function ya(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){ba(o,i,r,a,s,"next",e)}function s(e){ba(o,i,r,a,s,"throw",e)}a(void 0)}))}}function ka(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xa(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,o=void 0,o=function(e,t){if("object"!==ma(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==ma(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===ma(o)?o:String(o)),i)}var r,o}function Ca(e,t){Ta(e,t),t.add(e)}function Ma(e,t,n){Ta(e,t),t.set(e,n)}function Ta(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ea(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Sa(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,La(e,t,"set"),n),n}function Da(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,La(e,t,"get"))}function La(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Aa=new WeakMap,Pa=new WeakMap,ja=new WeakMap,Ia=new WeakMap,Na=new WeakMap,Ba=new WeakMap,Oa=new WeakMap,Wa=new WeakMap,Fa=new WeakMap,Ra=new WeakMap,za=new WeakMap,Ua=new WeakMap,qa=new WeakMap,Ya=new WeakMap,Ga=new WeakMap,Ha=new WeakMap,Qa=new WeakMap,Ja=new WeakMap,Va=new WeakMap,Za=new WeakMap,Xa=new WeakMap,$a=new WeakMap,Ka=new WeakMap,es=new WeakMap,ts=new WeakMap,ns=new WeakMap,is=new WeakMap,rs=new WeakMap,os=new WeakSet,as=new WeakSet,ss=new WeakSet,cs=new WeakSet,ls=new WeakSet,ds=new WeakSet,us=new WeakSet,hs=new WeakSet,ps=new WeakSet,_s=new WeakSet,fs=new WeakSet,vs=new WeakSet,gs=new WeakSet,ms=new WeakSet,ws=new WeakSet,bs=new WeakSet,ys=new WeakSet,ks=new WeakSet,xs=new WeakSet,Cs=new WeakSet,Ms=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;ka(this,e),Ca(this,Cs),Ca(this,xs),Ca(this,ks),Ca(this,ys),Ca(this,bs),Ca(this,ws),Ca(this,ms),Ca(this,gs),Ca(this,vs),Ca(this,fs),Ca(this,_s),Ca(this,ps),Ca(this,hs),Ca(this,us),Ca(this,ds),Ca(this,ls),Ca(this,cs),Ca(this,ss),Ca(this,as),Ca(this,os),Ma(this,Aa,{writable:!0,value:!1}),Ma(this,Pa,{writable:!0,value:void 0}),Ma(this,ja,{writable:!0,value:void 0}),Ma(this,Ia,{writable:!0,value:void 0}),Ma(this,Na,{writable:!0,value:void 0}),Ma(this,Ba,{writable:!0,value:void 0}),Ma(this,Oa,{writable:!0,value:void 0}),Ma(this,Wa,{writable:!0,value:!0}),Ma(this,Fa,{writable:!0,value:new Uint8Array(0)}),Ma(this,Ra,{writable:!0,value:void 0}),Ma(this,za,{writable:!0,value:dd.setRelayConnectionConstant(1)}),Ma(this,Ua,{writable:!0,value:1}),Ma(this,qa,{writable:!0,value:0}),Ma(this,Ya,{writable:!0,value:void 0}),Ma(this,Ga,{writable:!0,value:500}),Ma(this,Ha,{writable:!0,value:void 0}),Ma(this,Qa,{writable:!0,value:void 0}),Ma(this,Ja,{writable:!0,value:"_id_vl_not_support"}),Ma(this,Va,{writable:!0,value:{_interval_reconnection:void 0,_timer_until_response:void 0,_status_dispense:void 0,_time_response_general:2e3,_time_response_connect_start:500,_time_to_reconnect:7e3,_last_error:{message:null,handler:null,code:null,no_code:666}}}),Ma(this,Za,{writable:!0,value:[{usbVendorId:6790,usbProductId:29987}]}),Ma(this,Xa,{writable:!0,value:{activate:["A0","01","01","A2"],deactivate:["A0","01","00","A1"]}}),Ma(this,$a,{writable:!0,value:{baudRate:9600,dataBits:8,stopBits:1,parity:"none",bufferSize:32768,flowControl:"none"}}),Ma(this,Ka,{writable:!0,value:7e3}),Ma(this,es,{writable:!0,value:2e3}),Ma(this,ts,{writable:!0,value:null}),Ma(this,ns,{writable:!0,value:null}),Ma(this,is,{writable:!0,value:[]}),Ma(this,rs,{writable:!0,value:{message:null,handler:null,code:null,no_code:666}});var i="color:white;font-family:system-ui;font-size:2rem;-webkit-text-stroke: 1px black;font-weight:bold";console.debug("%cRelay webserial. %s",i,"\n\rCreated by danidoble."),dd.addButtonToPermissions("Relay",Da(this,Ua)),null!==t&&Sa(this,Za,t),null!==n&&Sa(this,$a,{baudRate:n.baudRate?n.baudRate:9600,dataBits:n.dataBits?n.dataBits:8,stopBits:n.stopBits?n.stopBits:1,parity:n.parity?n.parity:"none",bufferSize:n.bufferSize?n.bufferSize:32768,flowControl:n.flowControl?n.flowControl:"none"}),Ea(this,ds,Bs).call(this)}var t,n,i,r,o;return t=e,n=[{key:"clickConnect",value:function(){var e=ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Da(this,Pa)){e.next=5;break}return e.next=3,Ea(this,as,Ss).call(this);case 3:return Ea(this,hs,Ws).call(this,!1),e.abrupt("return");case 5:return e.next=7,Ea(this,os,Ts).call(this);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:(o=ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Da(this,Aa)&&this.extAppMessage({description:"Disconnected",message:"disconnect",no_code:303}),e.next=3,Ea(this,as,Ss).call(this);case 3:Sa(this,Aa,!1),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa);case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"forgetSerial",value:function(){"serial"in navigator&&"forget"in SerialPort.prototype?Ea(this,cs,Ps).call(this).then((function(){dd.log(__("Port forgotten"))})):dd.warn("Navigator don't support forget by now")}},{key:"initSerial",value:(r=ya(wa().mark((function e(){var t,n=arguments;return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:1,dd.isWebserialSupported(Da(this,Ja))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ea(this,os,Ts).call(this,t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setBytesConnection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Sa(this,Ua,e),Sa(this,za,dd.setRelayConnectionConstant(e)),dd.addButtonToPermissions("Relay",Da(this,Ua))}},{key:"setDOMElLog",value:function(e){Sa(this,ts,document.getElementById(e))}},{key:"setDOMElsBtnConnect",value:function(e){Sa(this,ns,document.querySelectorAll(e))}},{key:"softReload",value:function(){Sa(this,Ha,Da(this,Va)._interval_reconnection),Sa(this,Ya,Da(this,Va)._timer_until_response),Sa(this,es,Da(this,Va)._time_response_general),Sa(this,Ka,Da(this,Va)._time_to_reconnect),Sa(this,rs,Da(this,Va)._last_error),this.extSoftReload()}},{key:"sentBytes",value:function(e){dd.log("Sent to device",e)}},{key:"connect",value:function(){Ea(this,ms,Ys).call(this,Da(this,za),"connect")}},{key:"reconnect",value:function(){this.extReconnectionMessage()}},{key:"customCode",value:function(e){Ea(this,ms,Ys).call(this,e,"custom code")}},{key:"clearErrors",value:function(){Sa(this,rs,Da(this,Va)._last_error)}},{key:"setOn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Da(this,Xa).activate;t[1]=dd.hexMaker(dd.decToHex(e.toString())),t[3]=dd.relaySumHex(t),Ea(this,ms,Ys).call(this,t,"activate")}},{key:"setOff",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=Da(this,Xa).deactivate;t[1]=dd.hexMaker(dd.decToHex(e.toString())),t[3]=dd.relaySumHex(t),Ea(this,ms,Ys).call(this,t,"deactivate")}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;e?(t.setOff(),setTimeout((function(){t.setOn()}),300)):(t.setOn(),setTimeout((function(){t.setOff()}),300))}},{key:"dividedCodeMessage",value:function(e,t){dd.warn(e,t)}},{key:"__isConnected",get:function(){return Da(this,Aa)},set:function(e){Sa(this,Aa,e),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa)}},{key:"__originalValues",get:function(){return Da(this,Va)}},{key:"__serialPort",get:function(){return Da(this,Pa)}},{key:"toString",value:function(){var e=this;return JSON.stringify({__class:"Relay",__number_device:Da(e,Ua),__connected:Da(e,Aa),__connection:Da(e,za)})}},{key:"extSerialMessage",value:function(e){dd.log(e)}},{key:"extAppMessage",value:function(e){dd.log(e)}},{key:"extReconnectionMessage",value:function(){dd.log(dd.__("Trying reconnect"))}},{key:"extTimeoutMessage",value:function(e,t){dd.warn("Timeout",e,t)}},{key:"extConnectionLost",value:function(){dd.log("Make your own function with this same name","Example: relay1.extConnectionLost = function(){console.log('Customize me')}")}},{key:"extSoftReload",value:function(){dd.log("Make your own function with this same name","Example: relay1.extSoftReload = function(){console.log('Customize me')}")}},{key:"extSentData",value:function(e){dd.log(e)}},{key:"extUnexpectedDisconnection",value:function(e){dd.warn(dd.__("There was an unexpected disconnection. an attempt was made to disconnect the port but it was already disconnected"),e)}},{key:"extWithDevice",value:function(){dd.log(dd.__("Device connected"))}},{key:"extWithoutDevice",value:function(){dd.log(dd.__("Without device"))}},{key:"extEmulate",value:function(e){Ea(this,Cs,Vs).call(this,e)}}],n&&xa(t.prototype,n),i&&xa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ts(){return Es.apply(this,arguments)}function Es(){return Es=ya(wa().mark((function e(){var t,n,i,r,o,a=this,s=arguments;return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:0,e.prev=1,t=Da(this,Za),e.next=5,navigator.serial.getPorts({filters:t});case 5:if(!((n=e.sent).length>0)){e.next=47;break}if(e.prev=7,!(Da(this,qa)<n.length)){e.next=22;break}if(i=Da(this,qa),r=n[i].getInfo(),!(t.length>0)){e.next=19;break}if(r.usbProductId!==t[0].usbProductId||r.usbVendorId!==t[0].usbVendorId){e.next=16;break}Sa(this,Pa,n[i]),e.next=17;break;case 16:throw new Error("The port is already open.");case 17:e.next=20;break;case 19:Sa(this,Pa,n[i]);case 20:e.next=37;break;case 22:return Sa(this,qa,0),e.prev=23,e.t0=Sa,e.t1=this,e.t2=Pa,e.next=29,navigator.serial.requestPort({filters:t});case 29:e.t3=e.sent,(0,e.t0)(e.t1,e.t2,e.t3),e.next=37;break;case 33:return e.prev=33,e.t4=e.catch(23),Ea(this,us,Os).call(this,e.t4),e.abrupt("return");case 37:if(Da(this,Pa)){e.next=39;break}throw new Error("Select another port please");case 39:e.next=45;break;case 41:return e.prev=41,e.t5=e.catch(7),Ea(this,us,Os).call(this,e.t5),e.abrupt("return");case 45:e.next=61;break;case 47:return e.prev=47,e.t6=Sa,e.t7=this,e.t8=Pa,e.next=53,navigator.serial.requestPort({filters:t});case 53:e.t9=e.sent,(0,e.t6)(e.t7,e.t8,e.t9),e.next=61;break;case 57:return e.prev=57,e.t10=e.catch(47),Ea(this,us,Os).call(this,e.t10),e.abrupt("return");case 61:e.next=66;break;case 63:e.prev=63,e.t11=e.catch(1),Ea(this,us,Os).call(this,e.t11);case 66:return e.prev=66,Ea(this,hs,Ws).call(this,!0),e.next=70,Da(this,Pa).open(Da(this,$a));case 70:return o=this,Da(this,Pa).ondisconnect=function(e){Ea(o,bs,Hs).call(o,e)},Da(this,Pa).onconnect=function(e){Ea(o,bs,Hs).call(o,e)},this.extSentData({message:"Relay  "+dd.__("Opening with"),hex:Da(this,za)}),Sa(this,is,[]),Sa(this,Ya,setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(a,ls,Is).call(a,Da(a,za),"connect_start");case 2:case"end":return e.stop()}}),e)}))),Da(this,Ga))),Ea(this,_s,Rs).call(this,Da(this,za)),Ea(this,fs,zs).call(this,["DD","DD"],null),e.next=80,Ea(this,ss,Ls).call(this);case 80:e.next=85;break;case 82:e.prev=82,e.t12=e.catch(66),Ea(this,us,Os).call(this,e.t12);case 85:return e.abrupt("return",0);case 86:case"end":return e.stop()}}),e,this,[[1,63],[7,41],[23,33],[47,57],[66,82]])}))),Es.apply(this,arguments)}function Ss(){return Ds.apply(this,arguments)}function Ds(){return(Ds=ya(wa().mark((function e(){var t,n=this;return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Da(this,ja)){e.next=8;break}return(t=Da(this,ja).cancel())&&t.then((function(e){e&&dd.log(e)})).catch((function(e){Ea(n,us,Os).call(n,e)})),e.next=6,Da(this,Ia);case 6:Sa(this,ja,null),Sa(this,Ia,null);case 8:if(!Da(this,Oa)){e.next=17;break}return e.next=11,Da(this,Oa).getWriter().close();case 11:return e.next=13,Da(this,Oa).getWriter().close();case 13:return e.next=15,Da(this,Na);case 15:Sa(this,Oa,null),Sa(this,Na,null);case 17:Sa(this,Pa,null),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),Ea(this,us,Os).call(this,e.t0);case 23:case"end":return e.stop()}}),e,this,[[0,20]])})))).apply(this,arguments)}function Ls(){return As.apply(this,arguments)}function As(){return(As=ya(wa().mark((function e(){var t,n,i=this;return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Da(this,Pa).readable||!Da(this,Wa)){e.next=28;break}Sa(this,ja,Da(this,Pa).readable.getReader()),e.prev=2;case 3:return e.next=6,Da(this,ja).read();case 6:if(t=e.sent,n=t.value,!t.done){e.next=13;break}return Da(this,ja).releaseLock(),Sa(this,Wa,!1),e.abrupt("break",18);case 13:Ea(this,ps,Fs).call(this,n),void 0!==Da(this,Ra)&&(clearTimeout(Da(this,Ra)),Sa(this,Ra,void 0)),Sa(this,Ra,setTimeout((function(){var e=[];for(var t in Da(i,Fa))e.push(Da(i,Fa)[t].toString(16));Da(i,Fa)&&Ea(i,fs,zs).call(i,e),Sa(i,Fa,new Uint8Array(0))}),400)),e.next=3;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),Ea(this,us,Os).call(this,e.t0);case 23:return e.prev=23,Da(this,ja).releaseLock(),e.finish(23);case 26:e.next=0;break;case 28:return Sa(this,Wa,!0),e.next=31,Da(this,Pa).close();case 31:case"end":return e.stop()}}),e,this,[[2,20,23,26]])})))).apply(this,arguments)}function Ps(){return js.apply(this,arguments)}function js(){return(js=ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serial"in navigator)||!("forget"in SerialPort.prototype)){e.next=3;break}return e.next=3,Da(this,Pa).forget();case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Is(e,t){return Ns.apply(this,arguments)}function Ns(){return(Ns=ya(wa().mark((function e(t,n){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(dd.log("code",n),Da(this,rs).message=dd.__("Operation response timed out."),Da(this,rs).handler=n,Da(this,rs).code=t,clearTimeout(Da(this,Ya)),Sa(this,Ya,void 0),"connect"!==Da(this,rs).handler){e.next=11;break}Ea(this,xs,Js).call(this),this.reconnect(),e.next=18;break;case 11:if("connect_start"!==Da(this,rs).handler){e.next=18;break}return Ea(this,as,Ss).call(this),Sa(this,Aa,!1),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa),Sa(this,qa,Da(this,qa)+1),e.next=18,Ea(this,os,Ts).call(this);case 18:this.extTimeoutMessage(t,n);case 19:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Bs(){Object.freeze(Da(this,Va))}function Os(e){var t=this;if(null===document.getElementById(_id_vl_btn_open_modal_permissions))return dd.error(e),void dd.error("_id_vl_btn_open_modal_permissions doesn't exist in DOM");e.toString().includes("Failed to execute 'requestPort' on 'Serial': Must be handling a user gesture to show a permission request")?(document.getElementById(window["_id_relay"+Da(this,Ua)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("The port is already open.")?(dd.debug(e),dd.warn(dd.__("Failed to open serial port. Trying again.")),Ea(this,ks,Qs).call(this),Ea(this,as,Ss).call(this),setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sa(t,qa,Da(t,qa)+1),e.next=3,Ea(t,os,Ts).call(t);case 3:case"end":return e.stop()}}),e)}))),500),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Cannot read properties of undefined (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),Ea(this,xs,Js).call(this),Ea(this,as,Ss).call(this),setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(t,os,Ts).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Cannot read properties of null (reading 'writable')")?(dd.warn(dd.__("The port isn't open.")),Ea(this,xs,Js).call(this),Ea(this,as,Ss).call(this),setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(t,os,Ts).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")?dd.warn(dd.__("Failed to execute 'open' on 'SerialPort': A call to open() is already in progress.")):e.toString().includes("The port is closed.")?document.getElementById(_id_vl_btn_open_modal_permissions).click():e.toString().includes("Select another port please")||e.toString().includes("No port selected by the user")||e.toString().includes("Cannot read property 'writable' of null")?(document.getElementById(window["_id_relay"+Da(this,Ua)+"_btn_connect_serial"]).classList.remove("hidden"),document.getElementById(_id_vl_btn_open_modal_permissions).click()):e.toString().includes("Cannot read property 'writable' of undefined")?(document.getElementById(window["_id_relay"+Da(this,Ua)+"_btn_connect_serial"]).classList.remove("hidden"),Ea(this,xs,Js).call(this),setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initSerial();case 2:case"end":return e.stop()}}),e)}))),100)):e.toString().includes("The device has been lost")?(document.getElementById(window["_id_relay"+Da(this,Ua)+"_btn_connect_serial"]).classList.remove("hidden"),Ea(this,xs,Js).call(this)):e.toString().includes("Failed to open serial port")?(dd.warn(dd.__("Failed to open serial port. Trying again.")),Ea(this,xs,Js).call(this),Ea(this,as,Ss).call(this),setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(t,os,Ts).call(t);case 2:case"end":return e.stop()}}),e)}))),500)):e.toString().includes("navigator.serial is undefined")?document.getElementById(Da(this,Ja)).classList.remove("hidden"):e.toString().includes("This readable stream reader has been released and cannot be used to cancel its previous owner stream")?(document.getElementById(window["_id_relay"+Da(this,Ua)+"_btn_connect_serial"]).classList.remove("hidden"),Ea(this,xs,Js).call(this),dd.checkDevicesConnected(),this.extUnexpectedDisconnection(e)):dd.error(e)}function Ws(e){Sa(this,Aa,e),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa),dd.setDeviceStatus("Relay",Da(this,Ua),e);var t=dd.__("Connect");if(e?t=dd.__("Disconnect"):(this.__connected_devices-=1,dd.checkDevicesConnected()),null!==Da(this,ns))for(var n=0;n<Da(this,ns).length;n++)Da(this,ns)[n].textContent=t}function Fs(e){if(void 0!==e){var t=new Uint8Array(Da(this,Fa).length+e.byteLength);t.set(Da(this,Fa),0),t.set(new Uint8Array(e),Da(this,Fa).length),Sa(this,Fa,t)}}function Rs(e){try{if(void 0===Da(this,Pa))throw new Error("The port is closed.");var t=new Uint8Array(e),n=Da(this,Pa).writable.getWriter();n.write(t).then((function(e){e&&dd.log(e)})),n.releaseLock()}catch(e){Ea(this,us,Os).call(this,e)}}function zs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;0===e?Ea(this,gs,qs).call(this,t):e&&e.length>0?(Sa(this,Aa,!0),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa),void 0!==Da(this,Ha)&&(clearInterval(Da(this,Ha)),Sa(this,Ha,void 0)),clearTimeout(Da(this,Ya)),Sa(this,Ya,void 0),Ea(this,vs,Us).call(this,e)):this.dividedCodeMessage(e,t)}function Us(e){var t={cell:null,finished_test:null};switch(e[1].toString().toUpperCase()){case"DD":dd.checkDevicesConnected(),t.name=__("Connection with the serial device completed."),t.description=__("Your connection with the serial device was successfully completed."),t.request=__("connect"),t.no_code=100;break;case"DE":break;default:t.request=dd.__("undefined"),t.name=dd.__("Response unrecognized"),t.description=dd.__("The response of application was received, but dont identify with any of current parameters"),t.no_code=404}this.extSerialMessage({code:e,message:t.name,cell:t.cell,description:t.description,request:t.request,no_code:t.no_code})}function qs(e){clearTimeout(Da(this,Ya));var t={},n=this;switch(t.name="",t.description="",e.no_code){case 700:t.name=e.message,t.description=dd.__("The application connect successfully with website");break;case 701:t.name=e.message,t.description=dd.__("The connection with the serial device was ended by system request");break;case 702:t.name=e.message,t.description=dd.__("The last instruction is not compatible with this version of the application");break;case 703:Ea(this,xs,Js).call(this),void 0===Da(this,Ha)&&Sa(this,Ha,setInterval((function(){n.reconnect()}),Da(n,Ka))),t.name=dd.__("Serial device disconnected"),t.description=e.description;break;case 704:t.name=e.message,t.description=e.description;break;case 705:Ea(this,xs,Js).call(this),void 0===Da(this,Ha)&&Sa(this,Ha,setInterval((function(){n.reconnect()}),Da(n,Ka))),t.name=dd.__("Connection with the serial device is not complete"),t.description=dd.__("Check the device is connected correctly");break;case 706:t.name=e.message,t.description=dd.__("The port was not linked to the serial device, so we closed");break;case 707:t.name=e.message,t.description=dd.__("The response was not received in the time specified by the application");break;default:t.name=e.message,t.description=dd.__("Oops! you ran into an unknown error")}this.extAppMessage({message:t.name,description:t.description,no_code:e.no_code})}function Ys(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[];e.forEach((function(e){i.push(dd.hexMaker(e))})),i=dd.add0x(i),void 0!==Da(this,Ya)?(Da(this,is).push({bytes:i,to_do:n}),dd.warn(dd.__("You send a new command to serial device before have an answer")+". "+dd.__("Commands in queue:")+" "+Da(this,is).length),Sa(this,Qa,setInterval((function(){void 0===Da(t,Ya)&&Da(t,is).length>0&&(dd.log(dd.__("Sending in delay mode")+". "+dd.__("Commands in queue:")+" "+Da(t,is).length),clearInterval(Da(t,Qa)),Sa(t,Qa,void 0),Sa(t,Ya,setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Da(t,is)[0].bytes){e.next=3;break}return e.next=3,Ea(t,ls,Is).call(t,Da(t,is)[0].bytes,Da(t,is)[0].to_do);case 3:case"end":return e.stop()}}),e)}))),Da(t,es))),t.extSentData({message:n,hex:Da(t,is)[0].bytes}),Ea(t,_s,Rs).call(t,Da(t,is)[0].bytes),Ea(t,fs,zs).call(t,["DD","DE"],null),Sa(t,is,Da(t,is).splice(1)))}),500))):(Sa(this,is,[]),Sa(this,Ya,setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea(t,ls,Is).call(t,i,n);case 2:case"end":return e.stop()}}),e)}))),Da(this,es))),this.extSentData({message:n,hex:i}),Ea(this,_s,Rs).call(this,i),Ea(this,fs,zs).call(this,["DD","DE"],null))}function Gs(e){Sa(this,Aa,!1),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa),dd.warn(e),this.extConnectionLost(e)}function Hs(e){var t=this;Sa(this,Aa,!1),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa),Ea(this,ws,Gs).call(this,e),Sa(this,qa,0),setTimeout(ya(wa().mark((function e(){return wa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.disconnect();case 2:case"end":return e.stop()}}),e)}))),100)}function Qs(){this.extWithDevice()}function Js(){this.extWithoutDevice()}function Vs(e){"object"===ma(e.code)?(dd.warn(dd.__("Executing emulator be carefully")),Da(this,Aa)||(Sa(this,Aa,!0),window["owl_relay"+Da(this,Ua)+"_connected"]=Da(this,Aa),void 0!==Da(this,Ha)&&(clearInterval(Da(this,Ha)),Sa(this,Ha,void 0))),clearTimeout(Da(this,Ya)),Sa(this,Ya,void 0),Ea(this,vs,Us).call(this,e.code)):dd.error(dd.__("Invalid data to emulate"))}const Zs=Ms;function Xs(e){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xs(e)}function $s(){$s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new M(r||[]);return i(a,"_invoke",{value:y(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var u={};function h(){}function p(){}function _(){}var f={};c(f,o,(function(){return this}));var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==t&&n.call(g,o)&&(f=g);var m=_.prototype=h.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Xs(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function y(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return E()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function k(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),u;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:E}}function E(){return{value:void 0,done:!0}}return p.prototype=_,i(m,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:p,configurable:!0}),p.displayName=c(_,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,s,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(b.prototype),c(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new b(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(m),c(m,s,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=T,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},e}function Ks(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,r)}function ec(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){Ks(o,i,r,a,s,"next",e)}function s(e){Ks(o,i,r,a,s,"throw",e)}a(void 0)}))}}var tc=n(147).i8,nc=new I;window.webserial={Danidoble:I,Boardroid:on,Jofemar:Mr,Locker:ga,Emulate:ne,Relay:Zs,__:nc.__,version:tc},window.__=window.webserial.__,window.webserial_version=window.webserial.version,window.Danidoble=window.webserial.Danidoble,window.Boardroid=window.webserial.Boardroid,window.Jofemar=window.webserial.Jofemar,window.Locker=window.webserial.Locker,window.Emulate=window.webserial.Emulate,window.Relay=window.webserial.Relay,document.addEventListener("DOMContentLoaded",(function(){if(console.log(nc.__("Webserial version [no_version] created by danidoble. (https://github.com/danidoble)").replace("[no_version]",window.webserial_version)),nc.htmlData(),document.querySelector("body").append(window.__webserial_html__),document.getElementById(window._id_vl_btn_open_modal_permissions).addEventListener("click",ec($s().mark((function e(){return $s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById(window._id_vl_open_modal_permissions).classList.remove("hidden"),nc.showDisconnectedMessage();case 2:case"end":return e.stop()}}),e)})))),document.getElementById(window._id_vl_btn_close_not_support).addEventListener("click",ec($s().mark((function e(){return $s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById(window._id_vl_not_support).classList.add("hidden");case 1:case"end":return e.stop()}}),e)})))),"https:"!==window.location.protocol)if("function"==typeof Swal.fire)Swal.fire({title:nc.__("Security breach!"),html:nc.__("Webserial needs 'HTTPS' to work. Also please upgrade your request to avoid security breaches."),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:nc.__("Upgrade"),cancelButtonText:nc.__("Leave me alone"),allowOutsideClick:!1}).then((function(e){e.isConfirmed?location.href=location.href.replace("http://","https://"):console.error(nc.__("Security breach!"),nc.__("Webserial it will not work"))}));else{var e=new Error;e.name=nc.__("Security breach!"),e.message=nc.__("Webserial needs 'HTTPS' to work. Also please upgrade your request to avoid security breaches."),nc.error(e)}}))})()})();
//# sourceMappingURL=webserial.js.map